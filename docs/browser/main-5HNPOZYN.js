import{$ as pm,$a as ft,A as um,Aa as Gi,B as gn,Ba as wm,C as Cr,Ca as Em,D as Bi,Da as vt,E as Nu,Ea as it,F as Ar,Fa as zu,G as Ao,Ga as Im,H as _n,Ha as Wi,I as Mu,Ia as we,J as lm,Ja as bm,K as xu,Ka as Tm,L as Vu,La as Hu,M as rt,Ma as Ee,N as Fu,Na as Ki,O as xe,Oa as Qe,P as Lu,Pa as Kt,Q as hm,Qa as ge,R as fe,Ra as Cm,S as dm,Sa as Do,T as Sr,Ta as Am,U as oe,Ua as ko,V as $i,Va as Gu,W as fm,Wa as re,X as de,Xa as M,Y as me,Ya as O,Z as j,Za as be,_ as Rr,_a as st,a as U,aa as Un,ab as Sm,b as ue,ba as Ke,bb as Oo,c as C,ca as So,cb as et,d as rm,da as Ro,db as kt,e as Au,ea as Dt,eb as Qt,f as Ht,fa as dt,fb as x,g as Su,ga as qi,gb as Ye,h as Ru,ha as Uu,hb as pt,i as Pt,ia as ju,ib as Dr,j as lt,ja as Wt,jb as Rm,k as im,ka as mm,kb as Je,l as sm,la as Po,lb as Qi,m as Gt,ma as yn,mb as Pm,n as Pu,na as zi,nb as Wu,o as Du,oa as jn,ob as No,p as ku,pa as Hi,pb as Dm,q as We,qa as gm,qb as vn,r as W,ra as Bu,rb as km,s as ji,sa as _m,sb as Om,t as om,ta as Bn,tb as Mo,u as am,ua as $u,ub as mt,v as ne,va as qu,vb as xo,w as Ou,wa as Pr,wb as De,x as ht,xa as ym,xb as Nm,y as cm,ya as vm,yb as Mm,z as Co,za as $,zb as xm}from"./chunk-JOUGVSDN.js";var Yi=class{_doc;constructor(e){this._doc=e}manager},Vo=(()=>{class n extends Yi{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(me(dt))};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})(),Lo=new de(""),Xu=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof Vo));this._plugins=i.slice().reverse();let s=t.find(a=>a instanceof Vo);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(Lo),me(it))};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})(),Ku="ng-app-id";function Vm(n){for(let e of n)e.remove()}function Fm(n,e){let t=e.createElement("style");return t.textContent=n,t}function QE(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ku}="${e}"],link[${Ku}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ku),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Yu(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Zu=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,QE(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Fm);r?.forEach(i=>this.addUsage(i,this.external,Yu))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Vm(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Vm(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Fm(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Yu(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(dt),me(Bu),me($u,8),me(Bn))};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})(),Qu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},el=/%COMP%/g;var Um="%COMP%",YE=`_nghost-${Um}`,JE=`_ngcontent-${Um}`,XE=!0,ZE=new de("",{providedIn:"root",factory:()=>XE});function eI(n){return JE.replace(el,n)}function tI(n){return YE.replace(el,n)}function jm(n,e){return e.map(t=>t.replace(el,n))}var tl=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,a,c,l,d=null,p=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new Ji(t,a,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Fo?i.applyToHost(t):i instanceof Xi&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case qu.Emulated:s=new Fo(l,d,r,this.appId,p,a,c,g,v);break;case qu.ShadowDom:return new Ju(l,d,t,r,a,c,this.nonce,g,v);default:s=new Xi(l,d,r,p,a,c,g,v);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(Xu),me(Zu),me(Bu),me(ZE),me(dt),me(Bn),me(it),me($u),me(Em,8))};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})(),Ji=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Qu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Lm(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Lm(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Qu[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Qu[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gi.DashCase|Gi.Important)?e.style.setProperty(t,r,i&Gi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=vn().getGlobalEventTarget(this.doc,e),!e))throw new fe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Lm(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ju=class extends Ji{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,a,c,l,d){super(e,s,a,l,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=jm(i.id,p);for(let v of p){let S=document.createElement("style");c&&S.setAttribute("nonce",c),S.textContent=v,this.shadowRoot.appendChild(S)}let g=i.getExternalStyles?.();if(g)for(let v of g){let S=Yu(v,s);c&&S.setAttribute("nonce",c),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xi=class extends Ji{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,a,c,l,d){super(e,s,a,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=d?jm(d,p):p,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&wm.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Fo=class extends Xi{contentAttr;hostAttr;constructor(e,t,r,i,s,a,c,l,d){let p=i+"-"+r.id;super(e,t,r,s,a,c,l,d,p),this.contentAttr=eI(p),this.hostAttr=tI(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Uo=class n extends Om{supportsDOMEvents=!0;static makeCurrent(){km(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=nI();return t==null?null:rI(t)}resetBaseElement(){Zi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nm(document.cookie,e)}},Zi=null;function nI(){return Zi=Zi||document.head.querySelector("base"),Zi?Zi.getAttribute("href"):null}function rI(n){return new URL(n,document.baseURI).pathname}var iI=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})(),Bm=["alt","control","meta","shift"],sI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$m=(()=>{class n extends Yi{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vn().onAndCancel(t,a.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Bm.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=sI[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Bm.forEach(a=>{if(a!==i){let c=oI[a];c(t)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(dt))};static \u0275prov=oe({token:n,factory:n.\u0275fac})}return n})();function nl(n,e,t){let r=U({rootComponent:n,platformRef:t?.platformRef},aI(e));return Dm(r)}function aI(n){return{appProviders:[...dI,...n?.providers??[]],platformProviders:hI}}function cI(){Uo.makeCurrent()}function uI(){return new Uu}function lI(){return gm(document),document}var hI=[{provide:Bn,useValue:xm},{provide:_m,useValue:cI,multi:!0},{provide:dt,useFactory:lI}];var dI=[{provide:pm,useValue:"root"},{provide:Uu,useFactory:uI},{provide:Lo,useClass:Vo,multi:!0,deps:[dt]},{provide:Lo,useClass:$m,multi:!0,deps:[dt]},tl,Zu,Xu,{provide:Im,useExisting:tl},{provide:Mm,useClass:iI},[]];var qm=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(dt))};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var K="primary",ps=Symbol("RouteTitle"),al=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zn(n){return new al(n)}function Jm(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ot(n[t],e[t]))return!1;return!0}function Ot(n,e){let t=n?cl(n):void 0,r=e?cl(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Xm(n[i],e[i]))return!1;return!0}function cl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Xm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Zm(n){return n.length>0?n[n.length-1]:null}function Xt(n){return om(n)?n:Do(n)?We(Promise.resolve(n)):W(n)}var mI={exact:tg,subset:ng},eg={exact:gI,subset:_I,ignored:()=>!0};function zm(n,e,t){return mI[t.paths](n.root,e.root,t.matrixParams)&&eg[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function gI(n,e){return Ot(n,e)}function tg(n,e,t){if(!$n(n.segments,e.segments)||!$o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!tg(n.children[r],e.children[r],t))return!1;return!0}function _I(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xm(n[t],e[t]))}function ng(n,e,t){return rg(n,e,e.segments,t)}function rg(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!$n(i,t)||e.hasChildren()||!$o(i,t,r))}else if(n.segments.length===t.length){if(!$n(n.segments,t)||!$o(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ng(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!$n(n.segments,i)||!$o(n.segments,i,r)||!n.children[K]?!1:rg(n.children[K],e,s,r)}}function $o(n,e,t){return e.every((r,i)=>eg[t](n[i].parameters,r.parameters))}var Mt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){return wI.serialize(this)}},ie=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qo(this)}},wn=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zn(this.parameters),this._parameterMap}toString(){return sg(this)}};function yI(n,e){return $n(n,e)&&n.every((t,r)=>Ot(t.parameters,e[r].parameters))}function $n(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function vI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===K&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==K&&(t=t.concat(e(i,r)))}),t}var ms=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:()=>new Hn,providedIn:"root"})}return n})(),Hn=class{parse(e){let t=new ll(e);return new Mt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${es(e.root,!0)}`,r=bI(e.queryParams),i=typeof e.fragment=="string"?`#${EI(e.fragment)}`:"";return`${t}${r}${i}`}},wI=new Hn;function qo(n){return n.segments.map(e=>sg(e)).join("/")}function es(n,e){if(!n.hasChildren())return qo(n);if(e){let t=n.children[K]?es(n.children[K],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${es(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=vI(n,(r,i)=>i===K?[es(n.children[K],!1)]:[`${i}:${es(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[K]!=null?`${qo(n)}/${t[0]}`:`${qo(n)}/(${t.join("//")})`}}function ig(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jo(n){return ig(n).replace(/%3B/gi,";")}function EI(n){return encodeURI(n)}function ul(n){return ig(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zo(n){return decodeURIComponent(n)}function Hm(n){return zo(n.replace(/\+/g,"%20"))}function sg(n){return`${ul(n.path)}${II(n.parameters)}`}function II(n){return Object.entries(n).map(([e,t])=>`;${ul(e)}=${ul(t)}`).join("")}function bI(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${jo(t)}=${jo(i)}`).join("&"):`${jo(t)}=${jo(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var TI=/^[^\/()?;#]+/;function rl(n){let e=n.match(TI);return e?e[0]:""}var CI=/^[^\/()?;=#]+/;function AI(n){let e=n.match(CI);return e?e[0]:""}var SI=/^[^=?&#]+/;function RI(n){let e=n.match(SI);return e?e[0]:""}var PI=/^[^&#]+/;function DI(n){let e=n.match(PI);return e?e[0]:""}var ll=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[K]=new ie(e,t)),r}parseSegment(){let e=rl(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new wn(zo(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=AI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=rl(this.remaining);i&&(r=i,this.capture(r))}e[zo(t)]=zo(r)}parseQueryParam(e){let t=RI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=DI(this.remaining);a&&(r=a,this.capture(r))}let i=Hm(t),s=Hm(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=rl(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=K);let a=this.parseChildren();t[s??K]=Object.keys(a).length===1&&a[K]?a[K]:new ie([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function og(n){return n.segments.length>0?new ie([],{[K]:n}):n}function ag(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=ag(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ie(n.segments,e);return kI(t)}function kI(n){if(n.numberOfChildren===1&&n.children[K]){let e=n.children[K];return new ie(n.segments.concat(e.segments),e.children)}return n}function xr(n){return n instanceof Mt}function cg(n,e,t=null,r=null){let i=ug(n);return lg(i,e,t,r)}function ug(n){let e;function t(s){let a={};for(let l of s.children){let d=t(l);a[l.outlet]=d}let c=new ie(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=og(r);return e??i}function lg(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return il(i,i,i,t,r);let s=OI(e);if(s.toRoot())return il(i,i,new ie([],{}),t,r);let a=NI(s,i,n),c=a.processChildren?ns(a.segmentGroup,a.index,s.commands):dg(a.segmentGroup,a.index,s.commands);return il(i,a.segmentGroup,c,t,r)}function Ho(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ss(n){return typeof n=="object"&&n!=null&&n.outlets}function il(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=hg(n,e,t);let c=og(ag(a));return new Mt(c,s,i)}function hg(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=hg(s,e,t)}),new ie(n.segments,r)}var Go=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ho(r[0]))throw new fe(4003,!1);let i=r.find(ss);if(i&&i!==Zm(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function OI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Go(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Go(t,e,r)}var Nr=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function NI(n,e,t){if(n.isAbsolute)return new Nr(e,!0,0);if(!t)return new Nr(e,!1,NaN);if(t.parent===null)return new Nr(t,!0,0);let r=Ho(n.commands[0])?0:1,i=t.segments.length-1+r;return MI(t,i,n.numberOfDoubleDots)}function MI(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new Nr(r,!1,i-s)}function xI(n){return ss(n[0])?n[0].outlets:{[K]:n}}function dg(n,e,t){if(n??=new ie([],{}),n.segments.length===0&&n.hasChildren())return ns(n,e,t);let r=VI(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ie(n.segments.slice(0,r.pathIndex),{});return s.children[K]=new ie(n.segments.slice(r.pathIndex),n.children),ns(s,0,i)}else return r.match&&i.length===0?new ie(n.segments,{}):r.match&&!n.hasChildren()?hl(n,e,t):r.match?ns(n,0,i):hl(n,e,t)}function ns(n,e,t){if(t.length===0)return new ie(n.segments,{});{let r=xI(t),i={};if(Object.keys(r).some(s=>s!==K)&&n.children[K]&&n.numberOfChildren===1&&n.children[K].segments.length===0){let s=ns(n.children[K],e,t);return new ie(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=dg(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new ie(n.segments,i)}}function VI(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(ss(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Wm(l,d,a))return s;r+=2}else{if(!Wm(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hl(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ss(s)){let l=FI(s.outlets);return new ie(r,l)}if(i===0&&Ho(t[0])){let l=n.segments[e];r.push(new wn(l.path,Gm(t[0]))),i++;continue}let a=ss(s)?s.outlets[K]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&Ho(c)?(r.push(new wn(a,Gm(c))),i+=2):(r.push(new wn(a,{})),i++)}return new ie(r,{})}function FI(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=hl(new ie([],{}),0,r))}),e}function Gm(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Wm(n,e,t){return n==t.path&&Ot(e,t.parameters)}var rs="imperative",ke=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ke||{}),at=class{id;url;constructor(e,t){this.id=e,this.url=t}},Gn=class extends at{type=ke.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yt=class extends at{urlAfterRedirects;type=ke.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xe=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Xe||{}),os=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(os||{}),Nt=class extends at{reason;code;type=ke.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jt=class extends at{reason;code;type=ke.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Vr=class extends at{error;target;type=ke.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},as=class extends at{urlAfterRedirects;state;type=ke.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wo=class extends at{urlAfterRedirects;state;type=ke.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ko=class extends at{urlAfterRedirects;state;shouldActivate;type=ke.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qo=class extends at{urlAfterRedirects;state;type=ke.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yo=class extends at{urlAfterRedirects;state;type=ke.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jo=class{route;type=ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xo=class{route;type=ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zo=class{snapshot;type=ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ea=class{snapshot;type=ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ta=class{snapshot;type=ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},na=class{snapshot;type=ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var cs=class{},Fr=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function LI(n){return!(n instanceof cs)&&!(n instanceof Fr)}function UI(n,e){return n.providers&&!n._injector&&(n._injector=Hu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wt(n){return n.outlet||K}function jI(n,e){let t=n.filter(r=>wt(r)===e);return t.push(...n.filter(r=>wt(r)!==e)),t}function jr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ra=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return jr(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Br(this.rootInjector)}},Br=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ra(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(Un))};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ia=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=dl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=dl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=fl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fl(e,this._root).map(t=>t.value)}};function dl(n,e){if(n===e.value)return e;for(let t of e.children){let r=dl(n,t);if(r)return r}return null}function fl(n,e){if(n===e.value)return[e];for(let t of e.children){let r=fl(n,t);if(r.length)return r.unshift(e),r}return[]}var ot=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Or(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var us=class extends ia{snapshot;constructor(e,t){super(e),this.snapshot=t,El(this,e)}toString(){return this.snapshot.toString()}};function fg(n){let e=BI(n),t=new lt([new wn("",{})]),r=new lt({}),i=new lt({}),s=new lt({}),a=new lt(""),c=new En(t,r,s,a,i,K,n,e.root);return c.snapshot=e.root,new us(new ot(c,[]),e)}function BI(n){let e={},t={},r={},s=new qn([],e,r,"",t,K,n,null,{});return new ls("",new ot(s,[]))}var En=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ne(d=>d[ps]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>zn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>zn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sa(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&mg(i)&&(r.resolve[ps]=i.title),r}var qn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ps]}constructor(e,t,r,i,s,a,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ls=class extends ia{url;constructor(e,t){super(t),this.url=e,El(this,t)}toString(){return pg(this._root)}};function El(n,e){e.value._routerState=n,e.children.forEach(t=>El(n,t))}function pg(n){let e=n.children.length>0?` { ${n.children.map(pg).join(", ")} } `:"";return`${n.value}${e}`}function sl(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ot(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ot(e.params,t.params)||n.paramsSubject.next(t.params),pI(e.url,t.url)||n.urlSubject.next(t.url),Ot(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function pl(n,e){let t=Ot(n.params,e.params)&&yI(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||pl(n.parent,e.parent))}function mg(n){return typeof n.title=="string"||n.title===null}var gg=new de(""),gs=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=K;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=Pm();parentContexts=j(Br);location=j(bm);changeDetector=j(No);inputBinder=j(ua,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new ml(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zi]})}return n})(),ml=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===En?this.route:e===Br?this.childContexts:e===gg?this.outletData:this.parent.get(e,t)}},ua=new de("");var Il=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ee({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&be(0,"router-outlet")},dependencies:[gs],encapsulation:2})}return n})();function bl(n){let e=n.children&&n.children.map(bl),t=e?ue(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==K&&(t.component=Il),t}function $I(n,e,t){let r=hs(n,e._root,t?t._root:void 0);return new us(r,e)}function hs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=qI(n,e,t);return new ot(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>hs(n,c)),a}}let r=zI(e.value),i=e.children.map(s=>hs(n,s));return new ot(r,i)}}function qI(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hs(n,r,i);return hs(n,r)})}function zI(n){return new En(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var Lr=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},_g="ngNavigationCancelingError";function oa(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=xr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yg(!1,Xe.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function yg(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[_g]=!0,t.cancellationCode=e,t}function HI(n){return vg(n)&&xr(n.url)}function vg(n){return!!n&&n[_g]}var GI=(n,e,t,r)=>ne(i=>(new gl(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),gl=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Or(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Or(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Or(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Or(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new na(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ea(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(sl(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),sl(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},aa=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Mr=class{component;route;constructor(e,t){this.component=e,this.route=t}};function WI(n,e,t){let r=n._root,i=e?e._root:null;return ts(r,i,t,[r.value])}function KI(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $r(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fm(n)?n:e.get(n):r}function ts(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Or(e);return n.children.forEach(a=>{QI(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>is(c,t.getContext(a),i)),i}function QI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=YI(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new aa(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?ts(n,e,c?c.children:null,r,i):ts(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Mr(c.outlet.component,a))}else a&&is(e,c,i),i.canActivateChecks.push(new aa(r)),s.component?ts(n,null,c?c.children:null,r,i):ts(n,null,t,r,i);return i}function YI(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$n(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$n(n.url,e.url)||!Ot(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pl(n,e)||!Ot(n.queryParams,e.queryParams);case"paramsChange":default:return!pl(n,e)}}function is(n,e,t){let r=Or(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?is(a,e.children.getContext(s),t):is(a,null,t):is(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Mr(e.outlet.component,i)):t.canDeactivateChecks.push(new Mr(null,i)):t.canDeactivateChecks.push(new Mr(null,i))}function _s(n){return typeof n=="function"}function JI(n){return typeof n=="boolean"}function XI(n){return n&&_s(n.canLoad)}function ZI(n){return n&&_s(n.canActivate)}function e0(n){return n&&_s(n.canActivateChild)}function t0(n){return n&&_s(n.canDeactivate)}function n0(n){return n&&_s(n.canMatch)}function wg(n){return n instanceof am||n?.name==="EmptyError"}var Bo=Symbol("INITIAL_VALUE");function Ur(){return rt(n=>Ou(n.map(e=>e.pipe(Ar(1),Vu(Bo)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Bo)return Bo;if(t===!1||r0(t))return t}return!0}),gn(e=>e!==Bo),Ar(1)))}function r0(n){return xr(n)||n instanceof Lr}function i0(n,e){return ht(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?W(ue(U({},t),{guardsResult:!0})):s0(a,r,i,n).pipe(ht(c=>c&&JI(c)?o0(r,s,n,e):W(c)),ne(c=>ue(U({},t),{guardsResult:c})))})}function s0(n,e,t,r){return We(n).pipe(ht(i=>h0(i.component,i.route,t,e,r)),_n(i=>i!==!0,!0))}function o0(n,e,t,r){return We(e).pipe(Bi(i=>cm(c0(i.route.parent,r),a0(i.route,r),l0(n,i.path,t),u0(n,i.route,t))),_n(i=>i!==!0,!0))}function a0(n,e){return n!==null&&e&&e(new ta(n)),W(!0)}function c0(n,e){return n!==null&&e&&e(new Zo(n)),W(!0)}function u0(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>Co(()=>{let a=jr(e)??t,c=$r(s,a),l=ZI(c)?c.canActivate(e,n):Ke(a,()=>c(e,n));return Xt(l).pipe(_n())}));return W(i).pipe(Ur())}function l0(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>KI(a)).filter(a=>a!==null).map(a=>Co(()=>{let c=a.guards.map(l=>{let d=jr(a.node)??t,p=$r(l,d),g=e0(p)?p.canActivateChild(r,n):Ke(d,()=>p(r,n));return Xt(g).pipe(_n())});return W(c).pipe(Ur())}));return W(s).pipe(Ur())}function h0(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let a=s.map(c=>{let l=jr(e)??i,d=$r(c,l),p=t0(d)?d.canDeactivate(n,e,t,r):Ke(l,()=>d(n,e,t,r));return Xt(p).pipe(_n())});return W(a).pipe(Ur())}function d0(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(a=>{let c=$r(a,n),l=XI(c)?c.canLoad(e,t):Ke(n,()=>c(e,t));return Xt(l)});return W(s).pipe(Ur(),Eg(r))}function Eg(n){return Au(xe(e=>{if(typeof e!="boolean")throw oa(n,e)}),ne(e=>e===!0))}function f0(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(a=>{let c=$r(a,n),l=n0(c)?c.canMatch(e,t):Ke(n,()=>c(e,t));return Xt(l)});return W(s).pipe(Ur(),Eg(r))}var ds=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},fs=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function kr(n){return ji(new ds(n))}function p0(n){return ji(new fe(4e3,!1))}function m0(n){return ji(yg(!1,Xe.GuardRejected))}var _l=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[K])return p0(`${e.redirectTo}`);i=i.children[K]}}applyRedirectCommands(e,t,r,i,s){return g0(t,i,s).pipe(ne(a=>{if(a instanceof Mt)throw new fs(a);let c=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new fs(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Mt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new ie(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function g0(n,e,t){if(typeof n=="string")return W(n);let r=n,{queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,params:d,data:p,title:g}=e;return Xt(Ke(t,()=>r({params:d,data:p,queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,title:g})))}var yl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _0(n,e,t,r,i){let s=Ig(n,e,t);return s.matched?(r=UI(e,r),f0(r,e,t,i).pipe(ne(a=>a===!0?s:U({},yl)))):W(s)}function Ig(n,e,t){if(e.path==="**")return y0(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},yl):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Jm)(t,n,e);if(!i)return U({},yl);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function y0(n){return{matched:!0,parameters:n.length>0?Zm(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Km(n,e,t,r){return t.length>0&&E0(n,t,r)?{segmentGroup:new ie(e,w0(r,new ie(t,n.children))),slicedSegments:[]}:t.length===0&&I0(n,t,r)?{segmentGroup:new ie(n.segments,v0(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ie(n.segments,n.children),slicedSegments:t}}function v0(n,e,t,r){let i={};for(let s of t)if(la(n,e,s)&&!r[wt(s)]){let a=new ie([],{});i[wt(s)]=a}return U(U({},r),i)}function w0(n,e){let t={};t[K]=e;for(let r of n)if(r.path===""&&wt(r)!==K){let i=new ie([],{});t[wt(r)]=i}return t}function E0(n,e,t){return t.some(r=>la(n,e,r)&&wt(r)!==K)}function I0(n,e,t){return t.some(r=>la(n,e,r))}function la(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function b0(n,e,t){return e.length===0&&!n.children[t]}var vl=class{};function T0(n,e,t,r,i,s,a="emptyOnly"){return new wl(n,e,t,r,i,a,s).recognize()}var C0=31,wl=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new _l(this.urlSerializer,this.urlTree)}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Km(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new ot(r,t),s=new ls("",i),a=cg(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(e){let t=new qn([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,K,t).pipe(ne(r=>({children:r,rootSnapshot:t})),Cr(r=>{if(r instanceof fs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ds?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ne(a=>a instanceof ot?[a]:[]))}processChildren(e,t,r,i){let s=[];for(let a of Object.keys(r.children))a==="primary"?s.unshift(a):s.push(a);return We(s).pipe(Bi(a=>{let c=r.children[a],l=jI(t,a);return this.processSegmentGroup(e,l,c,a,i)}),xu((a,c)=>(a.push(...c),a)),Nu(null),lm(),ht(a=>{if(a===null)return kr(r);let c=bg(a);return A0(c),W(c)}))}processSegment(e,t,r,i,s,a,c){return We(t).pipe(Bi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,a,c).pipe(Cr(d=>{if(d instanceof ds)return W(null);throw d}))),_n(l=>!!l),Cr(l=>{if(wg(l))return b0(r,i,s)?W(new vl):kr(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,a,c,l){return wt(r)!==a&&(a===K||!la(i,s,r))?kr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a,l):kr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a,c){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:g,remainingSegments:v}=Ig(t,i,s);if(!l)return kr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>C0&&(this.allowRedirects=!1));let S=new qn(s,d,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Qm(i),wt(i),i.component??i._loadedComponent??null,i,Ym(i)),D=sa(S,c,this.paramsInheritanceStrategy);return S.params=Object.freeze(D.params),S.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(p,i.redirectTo,g,S,e).pipe(rt(k=>this.applyRedirects.lineralizeSegments(i,k)),ht(k=>this.processSegment(e,r,t,k.concat(v),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,a){let c=_0(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(rt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(rt(({routes:d})=>{let p=r._loadedInjector??e,{parameters:g,consumedSegments:v,remainingSegments:S}=l,D=new qn(v,g,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Qm(r),wt(r),r.component??r._loadedComponent??null,r,Ym(r)),V=sa(D,a,this.paramsInheritanceStrategy);D.params=Object.freeze(V.params),D.data=Object.freeze(V.data);let{segmentGroup:k,slicedSegments:G}=Km(t,v,S,d);if(G.length===0&&k.hasChildren())return this.processChildren(p,d,k,D).pipe(ne(H=>new ot(D,H)));if(d.length===0&&G.length===0)return W(new ot(D,[]));let z=wt(r)===s;return this.processSegment(p,d,k,G,z?K:s,!0,D).pipe(ne(H=>new ot(D,H instanceof ot?[H]:[])))}))):kr(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):d0(e,t,r,this.urlSerializer).pipe(ht(i=>i?this.configLoader.loadChildren(e,t).pipe(xe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):m0(t))):W({routes:[],injector:e})}};function A0(n){n.sort((e,t)=>e.value.outlet===K?-1:t.value.outlet===K?1:e.value.outlet.localeCompare(t.value.outlet))}function S0(n){let e=n.value.routeConfig;return e&&e.path===""}function bg(n){let e=[],t=new Set;for(let r of n){if(!S0(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bg(r.children);e.push(new ot(r.value,i))}return e.filter(r=>!t.has(r))}function Qm(n){return n.data||{}}function Ym(n){return n.resolve||{}}function R0(n,e,t,r,i,s){return ht(a=>T0(n,e,t,r,a.extractedUrl,i,s).pipe(ne(({state:c,tree:l})=>ue(U({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function P0(n,e){return ht(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of Tg(l))a.add(d);let c=0;return We(a).pipe(Bi(l=>s.has(l)?D0(l,r,n,e):(l.data=sa(l,l.parent,n).resolve,W(void 0))),xe(()=>c++),Mu(1),ht(l=>c===a.size?W(t):Gt))})}function Tg(n){let e=n.children.map(t=>Tg(t)).flat();return[n,...e]}function D0(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!mg(i)&&(s[ps]=i.title),Co(()=>(n.data=sa(n,n.parent,t).resolve,k0(s,n,e,r).pipe(ne(a=>(n._resolvedData=a,n.data=U(U({},n.data),a),null)))))}function k0(n,e,t,r){let i=cl(n);if(i.length===0)return W({});let s={};return We(i).pipe(ht(a=>O0(n[a],e,t,r).pipe(_n(),xe(c=>{if(c instanceof Lr)throw oa(new Hn,c);s[a]=c}))),Mu(1),ne(()=>s),Cr(a=>wg(a)?Gt:ji(a)))}function O0(n,e,t,r){let i=jr(e)??r,s=$r(n,i),a=s.resolve?s.resolve(e,t):Ke(i,()=>s(e,t));return Xt(a)}function ol(n){return rt(e=>{let t=n(e);return t?We(t).pipe(ne(()=>e)):W(e)})}var Tl=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===K);return r}getResolvedTitleForRoute(t){return t.data[ps]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:()=>j(Cg),providedIn:"root"})}return n})(),Cg=(()=>{class n extends Tl{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(qm))};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ys=new de("",{providedIn:"root",factory:()=>({})}),vs=new de(""),Ag=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(Rm);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Xt(Ke(t,()=>r.loadComponent())).pipe(ne(Rg),rt(Pg),xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Ao(()=>{this.componentLoaders.delete(r)})),s=new Ru(i,()=>new Pt).pipe(Su());return this.componentLoaders.set(r,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Sg(r,this.compiler,t,this.onLoadEndListener).pipe(Ao(()=>{this.childrenLoaders.delete(r)})),a=new Ru(s,()=>new Pt).pipe(Su());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sg(n,e,t,r){return Xt(Ke(t,()=>n.loadChildren())).pipe(ne(Rg),rt(Pg),ht(i=>i instanceof Tm||Array.isArray(i)?W(i):We(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(t).injector,a=s.get(vs,[],{optional:!0,self:!0}).flat()),{routes:a.map(bl),injector:s}}))}function N0(n){return n&&typeof n=="object"&&"default"in n}function Rg(n){return N0(n)?n.default:n}function Pg(n){return W(n)}var ha=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:()=>j(M0),providedIn:"root"})}return n})(),M0=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dg=new de("");var kg=new de(""),Og=(()=>{class n{currentNavigation=Wt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Pt;transitionAbortWithErrorSubject=new Pt;configLoader=j(Ag);environmentInjector=j(Un);destroyRef=j(qi);urlSerializer=j(ms);rootContexts=j(Br);location=j(Mo);inputBindingEnabled=j(ua,{optional:!0})!==null;titleStrategy=j(Tl);options=j(ys,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(ha);createViewTransition=j(Dg,{optional:!0});navigationErrorHandler=j(kg,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Jo(i)),r=i=>this.events.next(new Xo(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Je(()=>{this.transitions?.next(ue(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new lt(null),this.transitions.pipe(gn(r=>r!==null),rt(r=>{let i=!1;return W(r).pipe(rt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),Gt;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ue(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload")return this.events.next(new Jt(s.id,this.urlSerializer.serialize(s.rawUrl),"",os.IgnoredSameUrlNavigation)),s.resolve(!1),Gt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return W(s).pipe(rt(l=>(this.events.next(new Gn(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Gt:Promise.resolve(l))),R0(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=l.urlAfterRedirects,p));let d=new as(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:p,restoredState:g,extras:v}=s,S=new Gn(l,this.urlSerializer.serialize(d),p,g);this.events.next(S);let D=fg(this.rootComponentType).snapshot;return this.currentTransition=r=ue(U({},s),{targetSnapshot:D,urlAfterRedirects:d,extras:ue(U({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(V=>(V.finalUrl=d,V)),W(r)}else return this.events.next(new Jt(s.id,this.urlSerializer.serialize(s.extractedUrl),"",os.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Gt}),xe(s=>{let a=new Wo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ne(s=>(this.currentTransition=r=ue(U({},s),{guards:WI(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),i0(this.environmentInjector,s=>this.events.next(s)),xe(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw oa(this.urlSerializer,s.guardsResult);let a=new Ko(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),gn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Xe.GuardRejected),!1)),ol(s=>{if(s.guards.canActivateChecks.length!==0)return W(s).pipe(xe(a=>{let c=new Qo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),rt(a=>{let c=!1;return W(a).pipe(P0(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Xe.NoDataFromResolver)}}))}),xe(a=>{let c=new Yo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),ol(s=>{let a=c=>{let l=[];if(c.routeConfig?.loadComponent){let d=jr(c)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,c.routeConfig).pipe(xe(p=>{c.component=p}),ne(()=>{})))}for(let d of c.children)l.push(...a(d));return l};return Ou(a(s.targetSnapshot.root)).pipe(Nu(null),Ar(1))}),ol(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?We(c).pipe(ne(()=>r)):W(r)}),ne(s=>{let a=$I(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ue(U({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),xe(()=>{this.events.next(new cs)}),GI(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ar(1),Fu(new Ht(s=>{let a=r.abortController.signal,c=()=>s.next();return a.addEventListener("abort",c),()=>a.removeEventListener("abort",c)}).pipe(gn(()=>!i&&!r.targetRouterState),xe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Xe.Aborted)}))),xe({next:s=>{i=!0,this.lastSuccessfulNavigation=Je(this.currentNavigation),this.events.next(new Yt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Fu(this.transitionAbortWithErrorSubject.pipe(xe(s=>{throw s}))),Ao(()=>{i||this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Cr(s=>{if(this.destroyed)return r.resolve(!1),Gt;if(i=!0,vg(s))this.events.next(new Nt(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),HI(s)?this.events.next(new Fr(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Vr(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ke(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Lr){let{message:l,cancellationCode:d}=oa(this.urlSerializer,c);this.events.next(new Nt(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Fr(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Gt}))}))}cancelNavigationTransition(t,r,i){let s=new Nt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Je(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x0(n){return n!==rs}var Ng=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:()=>j(V0),providedIn:"root"})}return n})(),ca=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},V0=(()=>{class n extends ca{static \u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})();static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mg=(()=>{class n{urlSerializer=j(ms);options=j(ys,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Mo);urlHandlingStrategy=j(ha);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??s;return a instanceof Mt?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=fg(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:()=>j(F0),providedIn:"root"})}return n})(),F0=(()=>{class n extends Mg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Gn?this.updateStateMemento():t instanceof Jt?this.commitTransition(r):t instanceof as?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof cs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Nt&&t.code!==Xe.SupersededByNewNavigation&&t.code!==Xe.Redirect?this.restoreHistory(r):t instanceof Vr?this.restoreHistory(r,!0):t instanceof Yt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=U(U({},a),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=U(U({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})();static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cl(n,e){n.events.pipe(gn(t=>t instanceof Yt||t instanceof Nt||t instanceof Vr||t instanceof Jt),ne(t=>t instanceof Yt||t instanceof Jt?0:(t instanceof Nt?t.code===Xe.Redirect||t.code===Xe.SupersededByNewNavigation:!1)?2:1),gn(t=>t!==2),Ar(1)).subscribe(()=>{e()})}var L0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},U0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},da=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(Cm);stateManager=j(Mg);options=j(ys,{optional:!0})||{};pendingTasks=j(mm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(Og);urlSerializer=j(ms);location=j(Mo);urlHandlingStrategy=j(ha);injector=j(Un);_events=new Pt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(Ng);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(vs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(ua,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rm;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Je(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Nt&&r.code!==Xe.Redirect&&r.code!==Xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yt)this.navigated=!0;else if(r instanceof Fr){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||x0(i.source)},a);this.scheduleNavigation(c,rs,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}LI(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=U({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s).catch(l=>{this.disposed||this.injector.get(ju)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Je(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bl),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let v=i?i.snapshot:this.routerState.snapshot.root;g=ug(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return lg(g,t,p,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=xr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rs,null,r)}navigate(t,r={skipLocationChange:!1}){return j0(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(dm(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},L0):r===!1?i=U({},U0):i=r,xr(t))return zm(this.currentUrlTree,t,i);let s=this.parseUrl(t);return zm(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,v)=>{c=g,l=v});let p=this.pendingTasks.add();return Cl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j0(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new fe(4008,!1)}var q0=new de("");function Al(n,...e){return Rr([{provide:vs,multi:!0,useValue:n},[],{provide:En,useFactory:z0,deps:[da]},{provide:Am,multi:!0,useFactory:H0},e.map(t=>t.\u0275providers)])}function z0(n){return n.routerState.root}function H0(){let n=j(Dt);return e=>{let t=n.get(ko);if(e!==t.components[0])return;let r=n.get(da),i=n.get(G0);n.get(W0)===1&&r.initialNavigation(),n.get(K0,null,{optional:!0})?.setUpPreloading(),n.get(q0,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var G0=new de("",{factory:()=>new Pt}),W0=new de("",{providedIn:"root",factory:()=>1});var K0=new de("");function Y0(n,e){if(n&1){let t=Oo();M(0,"li")(1,"a",7),et("click",function(){So(t);let i=kt();return Ro(i.closeMobileMenu())}),x(2),O()()}if(n&2){let t=e.$implicit;$(),re("href",t.target,Pr),$(),Ye(t.label)}}var fa=class n{mobileMenuOpen=!1;scrolled=!1;links=[{label:"Start",target:"/#start"},{label:"\xDCber uns",target:"/#ueber-uns"},{label:"Preise",target:"/#preise"},{label:"Galerie",target:"/#galerie"},{label:"Kontakt",target:"/#kontakt"}];toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}closeMobileMenu(){this.mobileMenuOpen=!1}onScroll(){this.scrolled=window.scrollY>20}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-navigation"]],hostBindings:function(t,r){t&1&&et("scroll",function(){return r.onScroll()},vm)},decls:15,vars:5,consts:[[1,"nav-container"],["href","/#start",1,"brand",3,"click"],["type","button","aria-label","Men\xFC umschalten",1,"menu-toggle",3,"click"],[1,"nav-links"],[4,"ngFor","ngForOf"],[1,"cta"],["href","/#termine",3,"click"],[3,"click","href"]],template:function(t,r){t&1&&(M(0,"header")(1,"nav",0)(2,"a",1),et("click",function(){return r.closeMobileMenu()}),M(3,"span"),x(4,"City"),O(),x(5,"-Style "),O(),M(6,"button",2),et("click",function(){return r.toggleMobileMenu()}),be(7,"span")(8,"span")(9,"span"),O(),M(10,"ul",3),ge(11,Y0,3,2,"li",4),M(12,"li",5)(13,"a",6),et("click",function(){return r.closeMobileMenu()}),x(14,"Termin buchen"),O()()()()()),t&2&&(Qt("scrolled",r.scrolled),$(10),Qt("open",r.mobileMenuOpen),$(),re("ngForOf",r.links))},dependencies:[De,mt],styles:['header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000;transition:background-color .4s ease,box-shadow .4s ease,padding .4s ease;padding:1.75rem 0}header.scrolled[_ngcontent-%COMP%]{background:#0c0a18cc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.85rem 0;box-shadow:0 10px 30px #00000059}.nav-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between}.brand[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:1.9rem;font-weight:600;color:#fff;text-decoration:none;letter-spacing:.15rem;transition:color .3s ease}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e4c05f}.brand[_ngcontent-%COMP%]:hover{color:#dcbf68}.nav-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.4rem;list-style:none;margin:0;padding:0;transition:transform .4s ease,opacity .4s ease}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:500;letter-spacing:.04rem;position:relative;padding:.35rem 0;transition:color .3s ease}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:2px;background:linear-gradient(90deg,#f7e7b4,#dcbf68);transform:scaleX(0);transform-origin:right;transition:transform .3s ease}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:left}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dcbf68}.nav-links[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.55rem 1.3rem;border-radius:999px;background:linear-gradient(135deg,#f7e7b4,#dcbf68);color:#0c0a18;font-weight:600;box-shadow:0 10px 30px #dcbf6859}.nav-links[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0c0a18;box-shadow:0 10px 35px #dcbf687a}.menu-toggle[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:.4rem;background:transparent;border:none;cursor:pointer}.menu-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:2rem;height:.2rem;background:#fff;border-radius:999px;transition:transform .3s ease}@media (max-width: 900px){.menu-toggle[_ngcontent-%COMP%]{display:flex}.nav-links[_ngcontent-%COMP%]{position:absolute;top:100%;right:1.5rem;padding:1.5rem;background:#0c0a18f2;border-radius:1.2rem;flex-direction:column;align-items:flex-start;transform:translateY(-10px);opacity:0;pointer-events:none}.nav-links.open[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;pointer-events:auto}.nav-links[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{align-self:stretch;width:100%}.nav-links[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-align:center}}']})};var pa=class n{year=new Date().getFullYear();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-footer"]],decls:11,vars:1,consts:[[1,"footer"],[1,"footer-content"],[1,"links"],["href","/datenschutzundimpressum"],["href","/datenschutzundimpressum#datenschutz"],["href","/#termine"]],template:function(t,r){t&1&&(st(0,"footer",0)(1,"div",1)(2,"p"),x(3),ft(),st(4,"div",2)(5,"a",3),x(6,"Impressum"),ft(),st(7,"a",4),x(8,"Datenschutz"),ft(),st(9,"a",5),x(10,"Termin buchen"),ft()()()()),t&2&&($(3),pt("\xA9 ",r.year," City-Style Salon \xB7 Urban Hair Excellence"))},dependencies:[De],styles:[".footer[_ngcontent-%COMP%]{background:#0c0a18;color:#ffffffbf;padding:2rem 1.5rem}.footer-content[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:1rem}.links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffbf;text-decoration:none;font-weight:500;transition:color .3s ease}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dcbf68}@media (max-width: 600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}}"]})};var ma=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){t&1&&be(0,"app-navigation")(1,"router-outlet")(2,"app-footer")},dependencies:[gs,fa,pa],styles:["[_nghost-%COMP%]{display:block;background:#fdfcfe;color:#0c0a18;scroll-behavior:smooth}"]})};var ga=class n{highlights=["Signature-Stylings inspiriert von den Modemetropolen","Premium-Produkte & ma\xDFgeschneiderte Beratung","Late-Night-Services f\xFCr After-Work-Termine"];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-hero"]],decls:18,vars:0,consts:[["id","start",1,"hero"],[1,"backdrop"],[1,"hero-content"],["data-animate","fade-up",1,"intro"],[1,"eyebrow"],[1,"description"],[1,"cta-group"],["href","#termine",1,"primary-cta"],["href","#galerie",1,"secondary-cta"]],template:function(t,r){t&1&&(st(0,"section",0),Sm(1,"div",1),st(2,"div",2)(3,"div",3)(4,"p",4),x(5,"City-Style \xB7 Urban Eleganz"),ft(),st(6,"h1"),x(7," Dein exklusiver "),st(8,"span"),x(9,"Friseursalon"),ft(),x(10," im Herzen der Stadt "),ft(),st(11,"p",5),x(12," Erlebe personalisierte Looks, moderne Schnitte und Farbakzente, die Deinen Lifestyle widerspiegeln. Unsere Expert:innen bringen Runway-Trends direkt zu Dir \u2013 f\xFCr Selbstbewusstsein bei jedem Auftritt. "),ft(),st(13,"div",6)(14,"a",7),x(15,"Termin vereinbaren"),ft(),st(16,"a",8),x(17,"Inspiration entdecken"),ft()()()()())},dependencies:[De],styles:[".hero[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:5.5rem 1.5rem 3.5rem;color:#fff;background-image:url(https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=1600&q=80);background-size:cover;background-position:center;overflow:hidden}.backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(120deg,#0c0a18d9,#0c0a1866);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:0}.hero-content[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:1100px;width:100%;display:grid;grid-template-columns:1.2fr .8fr;gap:3rem;align-items:center}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5rem;font-weight:500;color:#fffc;margin-bottom:1.8rem}h1[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:clamp(2.75rem,4vw,4rem);line-height:1.1;margin-bottom:1.5rem}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e4c05f}.description[_ngcontent-%COMP%]{font-size:1.05rem;max-width:36rem;line-height:1.6;margin-bottom:1.9rem;color:#ffffffd9}.cta-group[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.primary-cta[_ngcontent-%COMP%], .secondary-cta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.9rem 2rem;border-radius:999px;font-weight:600;text-decoration:none;transition:transform .3s ease,box-shadow .3s ease,background .3s ease;letter-spacing:.05rem}.primary-cta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7e7b4,#dcbf68);color:#0c0a18;box-shadow:0 20px 35px #dcbf6859}.primary-cta[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 26px 45px #dcbf6873}.secondary-cta[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.45);color:#fff;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.secondary-cta[_ngcontent-%COMP%]:hover{transform:translateY(-4px);background:#ffffff26}.highlight-panel[_ngcontent-%COMP%]{background:#0c0a18a6;border-radius:1.8rem;padding:2rem;box-shadow:0 20px 45px #00000059;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.08);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.highlight-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:1.4rem}.highlight-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.85rem;font-size:1rem;color:#ffffffe6}.highlight-panel[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.35rem}.availability[_ngcontent-%COMP%]{margin-top:1.5rem;display:inline-flex;align-items:center;gap:.65rem;padding:.7rem 1.1rem;border-radius:999px;background:#1affad1f;color:#acffdc;font-weight:600;letter-spacing:.04rem}.availability[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:.7rem;height:.7rem;border-radius:50%;background:#1affad;box-shadow:0 0 15px #1affadcc}[data-animate=fade-up][_ngcontent-%COMP%], [data-animate=fade-left][_ngcontent-%COMP%]{opacity:0;transform:translate3d(0,20px,0);animation:_ngcontent-%COMP%_fadeIn 1.4s ease forwards .3s}[data-animate=fade-left][_ngcontent-%COMP%]{transform:translate3d(20px,0,0);animation-delay:.6s}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1;transform:translateZ(0)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-12px)}}@media (max-width: 900px){.hero[_ngcontent-%COMP%]{padding-top:7.5rem}.hero-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2.5rem}.highlight-panel[_ngcontent-%COMP%]{animation:none}}@media (max-width: 600px){.cta-group[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};function J0(n,e){if(n&1&&(M(0,"div",6)(1,"span",7),x(2),O(),M(3,"span",8),x(4),O()()),n&2){let t=e.$implicit;$(2),Ye(t.value),$(2),Ye(t.label)}}var _a=class n{highlights=[{value:"15+",label:"Jahre Erfahrung im Hair Design"},{value:"1.200+",label:"zufriedene Kunden"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-about"]],decls:13,vars:1,consts:[["id","ueber-uns",1,"about-section"],["data-animate","fade-right",1,"image-wrapper"],["src","assets/city1.jpeg","alt","Stylistin beim Schneiden eines modernen Haarschnitts"],["data-animate","fade-left",1,"content"],[1,"highlights"],["class","highlight",4,"ngFor","ngForOf"],[1,"highlight"],[1,"value"],[1,"label"]],template:function(t,r){t&1&&(M(0,"section",0)(1,"div",1)(2,"figure"),be(3,"img",2),O()(),M(4,"div",3)(5,"h2"),x(6,"\xDCber City-Style"),O(),M(7,"p"),x(8," City-Style vereint internationale Trends mit pers\xF6nlicher Beratung. Unser Team aus preisgekr\xF6nten Stylist:innen entwickelt individuelle Looks, die Deinen Charakter betonen und gleichzeitig f\xFCr Deinen Alltag funktionieren. Wir nehmen uns Zeit, h\xF6ren zu und arbeiten mit nachhaltigen Premium-Produkten, die Dein Haar langfristig st\xE4rken. "),O(),M(9,"p"),x(10," Egal ob Business-Look, mutige Coloration oder Glam-Event-Styling \u2013 unsere City-Style-Expert:innen begleiten Dich von der Idee bis zum Finish. Ganz nebenbei verwandeln wir Deinen Termin in eine kleine Auszeit vom Gro\xDFstadttrubel. "),O(),M(11,"div",4),ge(12,J0,5,2,"div",5),O()()()),t&2&&($(12),re("ngForOf",r.highlights))},dependencies:[De,mt],styles:['.about-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:3.5rem;align-items:center;max-width:1100px;margin:0 auto;padding:4.5rem 1.5rem;min-height:100vh}.image-wrapper[_ngcontent-%COMP%]{position:relative}.image-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2.5rem -2.5rem 2.5rem 2.5rem;background:linear-gradient(135deg,#e7c36b66,#dcbf6866);border-radius:2rem;filter:blur(40px);z-index:0}figure[_ngcontent-%COMP%]{position:relative;margin:0;border-radius:1.8rem;overflow:hidden;box-shadow:0 40px 80px #0c0a1833;z-index:1}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover;transform:scale(1.02);transition:transform .6s ease}figure[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.06)}figcaption[_ngcontent-%COMP%]{position:absolute;left:1.5rem;bottom:1.5rem;right:1.5rem;background:#0c0a18bf;color:#fff;padding:1.2rem 1.4rem;border-radius:1.2rem;font-size:.95rem;line-height:1.5;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.highlights[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1.3rem;margin-top:1.8rem}.highlight[_ngcontent-%COMP%]{padding:1.4rem;border-radius:1.2rem;background:linear-gradient(135deg,#e7c36b24,#dcbf682e);border:1px solid rgba(220,191,104,.4);box-shadow:0 12px 25px #dcbf6833;transition:transform .35s ease,box-shadow .35s ease}.highlight[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 18px 40px #dcbf684d}.highlight[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:#dcbf68}.highlight[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.95rem;color:#0c0a18a6;margin-top:.4rem}[data-animate=fade-right][_ngcontent-%COMP%], [data-animate=fade-left][_ngcontent-%COMP%]{opacity:0;transform:translate3d(-30px,0,0);animation:_ngcontent-%COMP%_aboutFade 1.1s ease forwards}[data-animate=fade-left][_ngcontent-%COMP%]{transform:translate3d(30px,0,0);animation-delay:.2s}@keyframes _ngcontent-%COMP%_aboutFade{to{opacity:1;transform:translateZ(0)}}@media (max-width: 900px){.about-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2.2rem}.highlights[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 600px){.highlights[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};function X0(n,e){if(n&1&&(M(0,"span",13),x(1),O()),n&2){let t=kt().$implicit;$(),Ye(t.note)}}function Z0(n,e){if(n&1&&(M(0,"tr")(1,"td",9)(2,"span",10),x(3),O(),ge(4,X0,2,1,"span",11),O(),M(5,"td",12),x(6),O()()),n&2){let t=e.$implicit;$(3),Ye(t.name),$(),re("ngIf",t.note),$(2),pt(" ",t.price," ")}}function eb(n,e){if(n&1&&(M(0,"div",5)(1,"div",6)(2,"h3"),x(3),O()(),M(4,"table",7)(5,"thead")(6,"tr")(7,"th"),x(8,"Service"),O(),M(9,"th"),x(10,"Preis"),O()()(),M(11,"tbody"),ge(12,Z0,7,3,"tr",8),O()()()),n&2){let t=e.$implicit;$(3),Ye(t.title),$(9),re("ngForOf",t.items)}}var ya=class n{categories=[{title:"Herren",items:[{name:"Schneiden/F\xF6hnen",price:"18 \u20AC"},{name:"Waschen/Schneiden/F\xF6hnen",price:"18 \u20AC"},{name:"Nassrasur",price:"10 \u20AC"},{name:"Schneiden/Formen mit Schere",price:"10 \u20AC"},{name:"Bart stutzen",price:"10 \u20AC"},{name:"Bart formen",price:"7 \u20AC"},{name:"Augenbrauen zupfen mit Faden",price:"15 \u20AC"},{name:"Wachs Gesicht komplett",price:"ab 25 \u20AC"},{name:"Augenbrauen mit Messer",price:"ab 40 \u20AC"},{name:"Farbe/Str\xE4hnen",price:"ab 50 \u20AC"},{name:"Dauerwelle",price:"ab 40 \u20AC"},{name:"Haare Gl\xE4ttung",price:"ab 50 \u20AC"},{name:"Haare Waschen",price:"3 \u20AC"}]},{title:"Damen",items:[{name:"Waschen/Schneiden (kurz)",price:"22 \u20AC"},{name:"Waschen/Schneiden (lang)",price:"25 \u20AC"},{name:"Waschen/Schneiden/F\xF6hnen",price:"35 \u20AC"},{name:"Haarmaske",price:"6 \u20AC"},{name:"Pony schneiden",price:"7 \u20AC"},{name:"Ans\xE4tze f\xE4rben",price:"ab 25 \u20AC"},{name:"Komplett f\xE4rben",price:"ab 30 \u20AC"},{name:"Str\xE4hnen am Oberkopf",price:"ab 40 \u20AC"},{name:"Str\xE4hnen komplett",price:"ab 80 \u20AC"},{name:"F\xF6hnen",price:"ab 45 \u20AC"},{name:"Dauerwelle",price:"ab 65 \u20AC"},{name:"Haare Gl\xE4ttung",price:"ab 150 \u20AC"},{name:"Augenbrauen zupfen (mit Fadentechnik)",price:"13 \u20AC"},{name:"Augenbrauen f\xE4rben",price:"20 \u20AC"},{name:"Wimpern f\xE4rben",price:"18 \u20AC"},{name:"Balayage",price:"220 - 300 \u20AC"}]},{title:"Kinder",items:[{name:"Jungs bis 7 Jahre",price:"13 \u20AC"},{name:"M\xE4dchen bis 7 Jahre",price:"20 \u20AC"}]}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-pricing"]],decls:10,vars:1,consts:[["id","preise",1,"pricing-section"],[1,"section-heading"],[1,"eyebrow"],[1,"tables"],["class","table-wrapper",4,"ngFor","ngForOf"],[1,"table-wrapper"],[1,"table-heading"],[1,"pricing-table"],[4,"ngFor","ngForOf"],[1,"service"],[1,"name"],["class","note",4,"ngIf"],[1,"price"],[1,"note"]],template:function(t,r){t&1&&(M(0,"section",0)(1,"div",1)(2,"span",2),x(3,"Preise"),O(),M(4,"h2"),x(5,"City-Style Pricing"),O(),M(6,"p"),x(7," Alle Preise auf einen Blick \u2013 \xFCbersichtlich nach Herren, Damen und Kinder sortiert. "),O()(),M(8,"div",3),ge(9,eb,13,2,"div",4),O()()),t&2&&($(9),re("ngForOf",r.categories))},dependencies:[De,mt,xo],styles:[".pricing-section[_ngcontent-%COMP%]{padding:4.5rem 1.5rem;background:linear-gradient(140deg,#0c0a18,#1c1133 50%,#34224d);color:#fff;min-height:100vh;display:flex;flex-direction:column;justify-content:center;gap:2.5rem}.section-heading[_ngcontent-%COMP%]{text-align:center;max-width:680px;margin:0 auto 2rem}.section-heading[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.45rem;color:#dcbf68;display:block;margin-bottom:1.1rem}.section-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:clamp(2.2rem,3.1vw,3.4rem);margin-bottom:1.2rem}.section-heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffbf;line-height:1.6;font-size:.98rem}.tables[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}.table-heading[_ngcontent-%COMP%]{background:#dcbf682e;padding:.9rem 1.1rem;border-bottom:1px solid rgba(220,191,104,.25)}.table-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#f7e7b4;letter-spacing:.05rem;font-size:1.05rem}.table-wrapper[_ngcontent-%COMP%]{background:#0c0a1859;border-radius:1.2rem;box-shadow:0 18px 40px #00000040;border:1px solid rgba(220,191,104,.25);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);overflow:hidden}.pricing-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:#ffffffd9;font-size:.92rem}.pricing-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#dcbf68a6;color:#0c0a18}.pricing-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pricing-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.85rem 1.1rem;text-align:left;vertical-align:top}.pricing-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;letter-spacing:.07rem;text-transform:uppercase}.pricing-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.08)}.pricing-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.pricing-table[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.01rem;color:#fff}.pricing-table[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{display:block;color:#ffffffa6;font-size:.85rem;margin-top:.25rem}.pricing-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#dcbf68;white-space:nowrap}.pricing-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#dcbf681f}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{border-radius:1rem}.pricing-table[_ngcontent-%COMP%]{font-size:.9rem}.pricing-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .pricing-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem}}"]})};var zg=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(we(Wi),we(Hi))};static \u0275dir=Qe({type:n})}return n})(),kl=(()=>{class n extends zg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[Kt]})}return n})(),Ra=new de("");var tb={provide:Ra,useExisting:Sr(()=>Pa),multi:!0};function nb(){let n=vn()?vn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rb=new de(""),Pa=(()=>{class n extends zg{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!nb())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(we(Wi),we(Hi),we(rb,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&et("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Dr([tb]),Kt]})}return n})();function Ol(n){return n==null||Nl(n)===0}function Nl(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Hg=new de(""),Gg=new de(""),ib=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Et=class{static min(e){return sb(e)}static max(e){return ob(e)}static required(e){return ab(e)}static requiredTrue(e){return cb(e)}static email(e){return ub(e)}static minLength(e){return lb(e)}static maxLength(e){return hb(e)}static pattern(e){return db(e)}static nullValidator(e){return Wg()}static compose(e){return Zg(e)}static composeAsync(e){return t_(e)}};function sb(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ob(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function ab(n){return Ol(n.value)?{required:!0}:null}function cb(n){return n.value===!0?null:{required:!0}}function ub(n){return Ol(n.value)||ib.test(n.value)?null:{email:!0}}function lb(n){return e=>{let t=e.value?.length??Nl(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function hb(n){return e=>{let t=e.value?.length??Nl(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function db(n){if(!n)return Wg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ol(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Wg(n){return null}function Kg(n){return n!=null}function Qg(n){return Do(n)?We(n):n}function Yg(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function Jg(n,e){return e.map(t=>t(n))}function fb(n){return!n.validate}function Xg(n){return n.map(e=>fb(e)?e:t=>e.validate(t))}function Zg(n){if(!n)return null;let e=n.filter(Kg);return e.length==0?null:function(t){return Yg(Jg(t,e))}}function e_(n){return n!=null?Zg(Xg(n)):null}function t_(n){if(!n)return null;let e=n.filter(Kg);return e.length==0?null:function(t){let r=Jg(t,e).map(Qg);return um(r).pipe(ne(Yg))}}function n_(n){return n!=null?t_(Xg(n)):null}function xg(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function r_(n){return n._rawValidators}function i_(n){return n._rawAsyncValidators}function Sl(n){return n?Array.isArray(n)?n:[n]:[]}function Ea(n,e){return Array.isArray(n)?n.includes(e):n===e}function Vg(n,e){let t=Sl(e);return Sl(n).forEach(i=>{Ea(t,i)||t.push(i)}),t}function Fg(n,e){return Sl(e).filter(t=>!Ea(n,t))}var Ia=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=e_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=n_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Hr=class extends Ia{name;get formDirective(){return null}get path(){return null}},Cs=class extends Ia{_parent=null;name=null;valueAccessor=null},ba=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pb={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Z1=ue(U({},pb),{"[class.ng-submitted]":"isSubmitted"}),s_=(()=>{class n extends ba{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(we(Cs,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Qt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Kt]})}return n})(),o_=(()=>{class n extends ba{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(we(Hr,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Qt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Kt]})}return n})();var Es="VALID",va="INVALID",qr="PENDING",Is="DISABLED",In=class{},Ta=class extends In{value;source;constructor(e,t){super(),this.value=e,this.source=t}},bs=class extends In{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ts=class extends In{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},zr=class extends In{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Rl=class extends In{source;constructor(e){super(),this.source=e}},As=class extends In{source;constructor(e){super(),this.source=e}};function Ml(n){return(Da(n)?n.validators:n)||null}function mb(n){return Array.isArray(n)?e_(n):n||null}function xl(n,e){return(Da(e)?e.asyncValidators:n)||null}function gb(n){return Array.isArray(n)?n_(n):n||null}function Da(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function a_(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[t])throw new fe(1001,"")}function c_(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new fe(1002,"")})}var Gr=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Je(this.statusReactive)}set status(e){Je(()=>this.statusReactive.set(e))}_status=Qi(()=>this.statusReactive());statusReactive=Wt(void 0);get valid(){return this.status===Es}get invalid(){return this.status===va}get pending(){return this.status==qr}get disabled(){return this.status===Is}get enabled(){return this.status!==Is}errors;get pristine(){return Je(this.pristineReactive)}set pristine(e){Je(()=>this.pristineReactive.set(e))}_pristine=Qi(()=>this.pristineReactive());pristineReactive=Wt(!0);get dirty(){return!this.pristine}get touched(){return Je(this.touchedReactive)}set touched(e){Je(()=>this.touchedReactive.set(e))}_touched=Qi(()=>this.touchedReactive());touchedReactive=Wt(!1);get untouched(){return!this.touched}_events=new Pt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fg(e,this._rawAsyncValidators))}hasValidator(e){return Ea(this._rawValidators,e)}hasAsyncValidator(e){return Ea(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ts(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ts(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new bs(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new bs(!0,r))}markAsPending(e={}){this.status=qr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Is,this.errors=null,this._forEachChild(i=>{i.disable(ue(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ta(this.value,r)),this._events.next(new zr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Es,this._forEachChild(r=>{r.enable(ue(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Es||this.status===qr)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ta(this.value,t)),this._events.next(new zr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Is:Es}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=qr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Qg(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new zr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Is:this.errors?va:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qr)?qr:this._anyControlsHaveStatus(va)?va:Es}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new bs(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ts(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Da(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mb(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gb(this._rawAsyncValidators)}},Ca=class extends Gr{constructor(e,t,r){super(Ml(t),xl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){c_(this,!0,e),Object.keys(e).forEach(r=>{a_(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new As(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Pl=class extends Ca{};var u_=new de("",{providedIn:"root",factory:()=>Vl}),Vl="always";function _b(n,e){return[...e.path,n]}function Lg(n,e,t=Vl){Fl(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),vb(n,e),Eb(n,e),wb(n,e),yb(n,e)}function Ug(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sa(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Aa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yb(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Fl(n,e){let t=r_(n);e.validator!==null?n.setValidators(xg(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=i_(n);e.asyncValidator!==null?n.setAsyncValidators(xg(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Aa(e._rawValidators,i),Aa(e._rawAsyncValidators,i)}function Sa(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=r_(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(a=>a!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=i_(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(a=>a!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Aa(e._rawValidators,r),Aa(e._rawAsyncValidators,r),t}function vb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&l_(n,e)})}function wb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&l_(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function l_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Eb(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Ib(n,e){n==null,Fl(n,e)}function bb(n,e){return Sa(n,e)}function Tb(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Cb(n){return Object.getPrototypeOf(n.constructor)===kl}function Ab(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Sb(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Pa?t=s:Cb(s)?r=s:i=s}),i||r||t||null}function Rb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jg(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bg(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var wa=class extends Gr{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Ml(t),xl(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Da(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Bg(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new As(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Bg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Pb=n=>n instanceof wa;var h_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var d_=new de("");var Db={provide:Hr,useExisting:Sr(()=>Ll)},Ll=(()=>{class n extends Hr{callSetDisabledState;get submitted(){return Je(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Qi(()=>this._submittedReactive());_submittedReactive=Wt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new vt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sa(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Lg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ug(t.control||null,t,!1),Rb(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Ab(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Rl(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Ug(r||null,t),Pb(i)&&(Lg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Ib(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&bb(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fl(this.form,this),this._oldForm&&Sa(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(we(Hg,10),we(Gg,10),we(u_,8))};static \u0275dir=Qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&et("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Dr([Db]),Kt,zi]})}return n})();var kb={provide:Cs,useExisting:Sr(()=>Ul)},Ul=(()=>{class n extends Cs{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new vt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,a){super(),this._ngModelWarningConfig=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Sb(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Tb(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return _b(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(we(Hr,13),we(Hg,10),we(Gg,10),we(Ra,10),we(d_,8))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Dr([kb]),Kt,zi]})}return n})();var Ob={provide:Ra,useExisting:Sr(()=>ka),multi:!0};function f_(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Nb(n){return n.split(":")[0]}var ka=(()=>{class n extends kl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(ko).injector;destroyRef=j(qi);cdr=j(No);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,zu({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=f_(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Nb(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&et("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Dr([Ob]),Kt]})}return n})(),p_=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(f_(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(we(Hi),we(Wi),we(ka,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Mb={provide:Ra,useExisting:Sr(()=>m_),multi:!0};function $g(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function xb(n){return n.split(":")[0]}var m_=(()=>{class n extends kl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);i.push(d)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=xb(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&et("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Dr([Mb]),Kt]})}return n})(),g_=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($g(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($g(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(we(Hi),we(Wi),we(m_,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Vb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ki({type:n});static \u0275inj=$i({})}return n})(),Dl=class extends Gr{constructor(e,t,r){super(Ml(t),xl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){c_(this,!1,e),e.forEach((r,i)=>{a_(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new As(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function qg(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var __=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return qg(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Ca(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Pl(i,r)}control(t,r,i){let s={};return this.useNonNullable?(qg(r)?s=r:(s.validators=r,s.asyncValidators=i),new wa(t,ue(U({},s),{nonNullable:!0}))):new wa(t,r,i)}array(t,r,i){let s=t.map(a=>this._createControl(a));return new Dl(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof wa)return t;if(t instanceof Gr)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var y_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:d_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:u_,useValue:t.callSetDisabledState??Vl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ki({type:n});static \u0275inj=$i({imports:[Vb]})}return n})();var v_=()=>{};var I_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Lb=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Oa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,p=s>>2,g=(s&3)<<4|c>>4,v=(c&15)<<2|d>>6,S=d&63;l||(S=64,a||(v=64)),r.push(t[p],t[g],t[v],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(I_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Lb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new Bl;let v=s<<2|c>>4;if(r.push(v),d!==64){let S=c<<4&240|d>>2;if(r.push(S),g!==64){let D=d<<6&192|g;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Bl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ub=function(n){let e=I_(n);return Oa.encodeByteArray(e,!0)},Rs=function(n){return Ub(n).replace(/\./g,"")},Na=function(n){try{return Oa.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ql(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jb=()=>ql().__FIREBASE_DEFAULTS__,Bb=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$b=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Na(n[1]);return e&&JSON.parse(e)},Ma=()=>{try{return v_()||jb()||Bb()||$b()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b_=n=>{var e,t;return(t=(e=Ma())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},T_=n=>{let e=b_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zl=()=>{var n;return(n=Ma())===null||n===void 0?void 0:n.config},C_=n=>{var e;return(e=Ma())===null||e===void 0?void 0:e[`_${n}`]};var Wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Kn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Hl(n){return C(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function A_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rs(JSON.stringify(t)),Rs(JSON.stringify(a)),""].join(".")}var Ss={};function qb(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ss))Ss[e]?n.emulator.push(e):n.prod.push(e);return n}function zb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var w_=!1;function Gl(n,e){if(typeof window>"u"||typeof document>"u"||!Kn(window.location.host)||Ss[n]===e||Ss[n]||w_)return;Ss[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=qb().prod.length>0;function a(){let v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function l(v,S){v.setAttribute("width","24"),v.setAttribute("id",S),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{w_=!0,a()},v}function p(v,S){v.setAttribute("id",S),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){let v=zb(r),S=t("text"),D=document.getElementById(S)||document.createElement("span"),V=t("learnmore"),k=document.getElementById(V)||document.createElement("a"),G=t("preprendIcon"),z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let H=v.element;c(H),p(k,V);let le=d();l(z,G),H.append(z,D,k,le),document.body.appendChild(H)}s?(D.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function Hb(){var n;let e=(n=Ma())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function D_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k_(){return!Hb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ps(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Gb="FirebaseError",gt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Gb,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}},It=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Wb(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new gt(i,c,r)}};function Wb(n,e){return n.replace(Kb,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Kb=/\{\$([^}]+)}/g;function Qn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(E_(s)&&E_(a)){if(!Qn(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function E_(n){return n!==null&&typeof n=="object"}function Wl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function N_(n,e){let t=new $l(n,e);return t.subscribe.bind(t)}var $l=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Qb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=jl),i.error===void 0&&(i.error=jl),i.complete===void 0&&(i.complete=jl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Qb(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jl(){}var ik=14400*1e3;function tt(n){return n&&n._delegate?n._delegate:n}var Ze=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yn="[DEFAULT]";var Kl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jb(e))try{this.getOrInitializeService({instanceIdentifier:Yn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Yn){return this.instances.has(e)}getOptions(e=Yn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yn){return this.component?this.component.multipleInstances?e:Yn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Yb(n){return n===Yn?void 0:n}function Jb(n){return n.instantiationMode==="EAGER"}var xa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Kl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Xb=[],X=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(X||{}),Zb={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},eT=X.INFO,tT={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},nT=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=tT[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xt=class{constructor(e){this.name=e,this._logLevel=eT,this._logHandler=nT,this._userLogHandler=null,Xb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var rT=(n,e)=>e.some(t=>n instanceof t),M_,x_;function iT(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sT(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var V_=new WeakMap,Yl=new WeakMap,F_=new WeakMap,Ql=new WeakMap,Xl=new WeakMap;function oT(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Vt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&V_.set(t,n)}).catch(()=>{}),Xl.set(e,n),e}function aT(n){if(Yl.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Yl.set(n,e)}var Jl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Yl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||F_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function L_(n){Jl=n(Jl)}function cT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Va(this),e,...t);return F_.set(r,e.sort?e.sort():[e]),Vt(r)}:sT().includes(n)?function(...e){return n.apply(Va(this),e),Vt(V_.get(this))}:function(...e){return Vt(n.apply(Va(this),e))}}function uT(n){return typeof n=="function"?cT(n):(n instanceof IDBTransaction&&aT(n),rT(n,iT())?new Proxy(n,Jl):n)}function Vt(n){if(n instanceof IDBRequest)return oT(n);if(Ql.has(n))return Ql.get(n);let e=uT(n);return e!==n&&(Ql.set(n,e),Xl.set(e,n)),e}var Va=n=>Xl.get(n);function j_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=Vt(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Vt(a.result),l.oldVersion,l.newVersion,Vt(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var lT=["get","getKey","getAll","getAllKeys","count"],hT=["put","add","delete","clear"],Zl=new Map;function U_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zl.get(e))return Zl.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=hT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lT.includes(t)))return;let s=function(a,...c){return C(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Zl.set(e,s),s}L_(n=>ue(U({},n),{get:(e,t,r)=>U_(e,t)||n.get(e,t,r),has:(e,t)=>!!U_(e,t)||n.has(e,t)}));var th=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dT(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function dT(n){let e=n.getComponent();return e?.type==="VERSION"}var nh="@firebase/app",B_="0.13.2";var en=new xt("@firebase/app"),fT="@firebase/app-compat",pT="@firebase/analytics-compat",mT="@firebase/analytics",gT="@firebase/app-check-compat",_T="@firebase/app-check",yT="@firebase/auth",vT="@firebase/auth-compat",wT="@firebase/database",ET="@firebase/data-connect",IT="@firebase/database-compat",bT="@firebase/functions",TT="@firebase/functions-compat",CT="@firebase/installations",AT="@firebase/installations-compat",ST="@firebase/messaging",RT="@firebase/messaging-compat",PT="@firebase/performance",DT="@firebase/performance-compat",kT="@firebase/remote-config",OT="@firebase/remote-config-compat",NT="@firebase/storage",MT="@firebase/storage-compat",xT="@firebase/firestore",VT="@firebase/ai",FT="@firebase/firestore-compat",LT="firebase",UT="11.10.0";var rh="[DEFAULT]",jT={[nh]:"fire-core",[fT]:"fire-core-compat",[mT]:"fire-analytics",[pT]:"fire-analytics-compat",[_T]:"fire-app-check",[gT]:"fire-app-check-compat",[yT]:"fire-auth",[vT]:"fire-auth-compat",[wT]:"fire-rtdb",[ET]:"fire-data-connect",[IT]:"fire-rtdb-compat",[bT]:"fire-fn",[TT]:"fire-fn-compat",[CT]:"fire-iid",[AT]:"fire-iid-compat",[ST]:"fire-fcm",[RT]:"fire-fcm-compat",[PT]:"fire-perf",[DT]:"fire-perf-compat",[kT]:"fire-rc",[OT]:"fire-rc-compat",[NT]:"fire-gcs",[MT]:"fire-gcs-compat",[xT]:"fire-fst",[FT]:"fire-fst-compat",[VT]:"fire-vertex","fire-js":"fire-js",[LT]:"fire-js-all"};var Ds=new Map,BT=new Map,ih=new Map;function $_(n,e){try{n.container.addComponent(e)}catch(t){en.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bt(n){let e=n.name;if(ih.has(e))return en.debug(`There were multiple attempts to register component ${e}.`),!1;ih.set(e,n);for(let t of Ds.values())$_(t,n);for(let t of BT.values())$_(t,n);return!0}function Fa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tn(n){return n==null?!1:n.settings!==void 0}var $T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bn=new It("app","Firebase",$T);var sh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}};var Wr=UT;function ch(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:rh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bn.create("bad-app-name",{appName:String(i)});if(t||(t=zl()),!t)throw bn.create("no-options");let s=Ds.get(i);if(s){if(Qn(t,s.options)&&Qn(r,s.config))return s;throw bn.create("duplicate-app",{appName:i})}let a=new xa(i);for(let l of ih.values())a.addComponent(l);let c=new sh(t,r,a);return Ds.set(i,c),c}function Kr(n=rh){let e=Ds.get(n);if(!e&&n===rh&&zl())return ch();if(!e)throw bn.create("no-app",{appName:n});return e}function La(){return Array.from(Ds.values())}function Te(n,e,t){var r;let i=(r=jT[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),en.warn(c.join(" "));return}bt(new Ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qT="firebase-heartbeat-database",zT=1,ks="firebase-heartbeat-store",eh=null;function G_(){return eh||(eh=j_(qT,zT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ks)}catch(t){console.warn(t)}}}}).catch(n=>{throw bn.create("idb-open",{originalErrorMessage:n.message})})),eh}function HT(n){return C(this,null,function*(){try{let t=(yield G_()).transaction(ks),r=yield t.objectStore(ks).get(W_(n));return yield t.done,r}catch(e){if(e instanceof gt)en.warn(e.message);else{let t=bn.create("idb-get",{originalErrorMessage:e?.message});en.warn(t.message)}}})}function q_(n,e){return C(this,null,function*(){try{let r=(yield G_()).transaction(ks,"readwrite");yield r.objectStore(ks).put(e,W_(n)),yield r.done}catch(t){if(t instanceof gt)en.warn(t.message);else{let r=bn.create("idb-set",{originalErrorMessage:t?.message});en.warn(r.message)}}})}function W_(n){return`${n.name}!${n.options.appId}`}var GT=1024,WT=30,oh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ah(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=z_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>WT){let a=QT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){en.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=z_(),{heartbeatsToSend:r,unsentEntries:i}=KT(this._heartbeatsCache.heartbeats),s=Rs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return en.warn(t),""}})}};function z_(){return new Date().toISOString().substring(0,10)}function KT(n,e=GT){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),H_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),H_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ah=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return Ps()?O_().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return q_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return q_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function H_(n){return Rs(JSON.stringify({version:2,heartbeats:n})).length}function QT(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function YT(n){bt(new Ze("platform-logger",e=>new th(e),"PRIVATE")),bt(new Ze("heartbeat",e=>new oh(e),"PRIVATE")),Te(nh,B_,n),Te(nh,B_,"esm2017"),Te("fire-js","")}YT("");var JT="firebase",XT="11.10.0";Te(JT,XT,"app");function K_(n){n===void 0&&(n=j(Dt));let e=n.get(Po);return t=>new Ht(r=>{let i=e.add(),s=!1;function a(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return c.add(()=>{r.unsubscribe(),a()}),c})}var Xn=new Lu("ANGULARFIRE2_VERSION");function ja(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Yr=(n,e)=>{let t=e?[e]:La(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Qr=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Qr||{}),Q_=Wu()&&typeof Zone<"u"?Qr.WARN:Qr.SILENT;var Ua=class{zone;delegate;constructor(e,t=sm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(s,t,r)}},Zn=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(it);this.outsideAngular=t.runOutsideAngular(()=>new Ua(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ua(typeof Zone>"u"?void 0:Zone.current,im))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y_=!1;function ZT(n,e){!Y_&&(Q_>Qr.SILENT||Wu())&&(Y_=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Q_>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function eC(n){let e=j(it,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Jn(n){let e=j(it,{optional:!0});return e?e.run(()=>n()):n()}var tC=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ke(t,()=>Jn(()=>n.apply(void 0,r)))),Tt=(n,e,t)=>(t||=e?Qr.WARN:Qr.VERBOSE,function(){let r,i=arguments,s,a,c;try{s=j(Zn),a=j(Po),c=j(Un)}catch{return ZT(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Jn(()=>a.add())),i[d]=tC(i[d],r,c));let l=eC(()=>n.apply(this,i));return e?l instanceof Ht?l.pipe(ku(s.outsideAngular),Du(s.insideAngular),K_(c)):l instanceof Promise?Jn(()=>{let d=a.add();return new Promise((p,g)=>{l.then(v=>Ke(c,()=>Jn(()=>p(v))),v=>Ke(c,()=>Jn(()=>g(v)))).finally(d)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Jn(()=>l):l instanceof Ht?l.pipe(ku(s.outsideAngular),Du(s.insideAngular)):Jn(()=>l)});var er=class{constructor(e){return e}},Os=class{constructor(){return La()}};function nC(n){return n&&n.length===1?n[0]:new er(Kr())}var uh=new de("angularfire2._apps"),rC={provide:er,useFactory:nC,deps:[[new yn,uh]]},iC={provide:Os,deps:[[new yn,uh]]};function sC(n){return(e,t)=>{let r=t.get(Bn);Te("angularfire",Xn.full,"core"),Te("angularfire",Xn.full,"app"),Te("angular",hm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function J_(n,...e){return Rr([rC,iC,{provide:uh,useFactory:sC(n),multi:!0,deps:[it,Dt,Zn,...e]}])}var X_=Tt(ch,!0);var oC=new Map,aC={activated:!1,tokenObservers:[]},cC={initialized:!1,enabled:!1};function Ct(n){return oC.get(n)||Object.assign({},aC)}function ny(){return cC}var uC="https://content-firebaseappcheck.googleapis.com/v1";var lC="exchangeDebugToken",Z_={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},aO=1440*60*1e3;var dh=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new Wn,this.pending.promise.catch(t=>{}),yield hC(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function hC(n){return new Promise(e=>{setTimeout(e,n)})}var dC={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Tn=new It("appCheck","AppCheck",dC);function ry(n){if(!Ct(n).activated)throw Tn.create("use-before-activation",{appName:n.name})}function iy(r,i){return C(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let S=yield a.getHeartbeatsHeader();S&&(s["X-Firebase-Client"]=S)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,c)}catch(S){throw Tn.create("fetch-network-error",{originalErrorMessage:S?.message})}if(l.status!==200)throw Tn.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(S){throw Tn.create("fetch-parse-error",{originalErrorMessage:S?.message})}let p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Tn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(p[1])*1e3,v=Date.now();return{token:d.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function sy(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uC}/projects/${t}/apps/${r}:${lC}?key=${i}`,body:{debug_token:e}}}var fC="firebase-app-check-database",pC=1,fh="firebase-app-check-store";var Ba=null;function mC(){return Ba||(Ba=new Promise((n,e)=>{try{let t=indexedDB.open(fC,pC);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Tn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fh,{keyPath:"compositeKey"})}}}catch(t){e(Tn.create("storage-open",{originalErrorMessage:t?.message}))}}),Ba)}function gC(n,e){return _C(yC(n),e)}function _C(n,e){return C(this,null,function*(){let r=(yield mC()).transaction(fh,"readwrite"),s=r.objectStore(fh).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=l=>{a()},r.onerror=l=>{var d;c(Tn.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function yC(n){return`${n.options.appId}-${n.name}`}var Ns=new xt("@firebase/app-check");function lh(n,e){return Ps()?gC(n,e).catch(t=>{Ns.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function oy(){return ny().enabled}function ay(){return C(this,null,function*(){let n=ny();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vC={error:"UNKNOWN_ERROR"};function wC(n){return Oa.encodeString(JSON.stringify(n),!1)}function ph(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;ry(r);let i=Ct(r),s=i.token,a;if(s&&!Ms(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(Ms(d)?s=d:yield lh(r,void 0))}if(!e&&s&&Ms(s))return{token:s.token};let c=!1;if(oy())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iy(sy(r,yield ay()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield lh(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ns.warn(d.message):t&&Ns.error(d),hh(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield Ct(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Ns.warn(d.message):t&&Ns.error(d),a=d}let l;return s?a?Ms(s)?l={token:s.token,internalError:a}:l=hh(a):(l={token:s.token},i.token=s,yield lh(r,s)):l=hh(a),c&&TC(r,l),l})}function EC(n){return C(this,null,function*(){let e=n.app;ry(e);let{provider:t}=Ct(e);if(oy()){let r=yield ay(),{token:i}=yield iy(sy(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function IC(n,e,t,r){let{app:i}=n,s=Ct(i),a={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&Ms(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),ey(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ey(n))}function cy(n,e){let t=Ct(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ey(n){let{app:e}=n,t=Ct(e),r=t.tokenRefresher;r||(r=bC(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bC(n){let{app:e}=n;return new dh(()=>C(null,null,function*(){let t=Ct(e),r;if(t.token?r=yield ph(n,!0):r=yield ph(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ct(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Z_.RETRIAL_MIN_WAIT,Z_.RETRIAL_MAX_WAIT)}function TC(n,e){let t=Ct(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ms(n){return n.expireTimeMillis-Date.now()>0}function hh(n){return{token:wC(vC),error:n}}var mh=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ct(this.app);for(let t of e)cy(this.app,t.next);return Promise.resolve()}};function CC(n,e){return new mh(n,e)}function AC(n){return{getToken:e=>ph(n,e),getLimitedUseToken:()=>EC(n),addTokenListener:e=>IC(n,"INTERNAL",e),removeTokenListener:e=>cy(n.app,e)}}var SC="@firebase/app-check",RC="0.10.1";var PC="app-check",ty="app-check-internal";function DC(){bt(new Ze(PC,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return CC(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ty).initialize()})),bt(new Ze(ty,n=>{let e=n.getProvider("app-check").getImmediate();return AC(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Te(SC,RC)}DC();var kC="app-check";var $a=class{constructor(){return Yr(kC)}};var OC=["localhost","0.0.0.0","127.0.0.1"],wO=typeof window<"u"&&OC.includes(window.location.hostname);function gy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _y=gy,yy=new It("auth","Firebase",gy());var Ga=new xt("@firebase/auth");function MC(n,...e){Ga.logLevel<=X.WARN&&Ga.warn(`Auth (${Wr}): ${n}`,...e)}function za(n,...e){Ga.logLevel<=X.ERROR&&Ga.error(`Auth (${Wr}): ${n}`,...e)}function uy(n,...e){throw Sh(n,...e)}function Ah(n,...e){return Sh(n,...e)}function vy(n,e,t){let r=Object.assign(Object.assign({},_y()),{[e]:t});return new It("auth","Firebase",r).create(e,{appName:n.name})}function Ha(n){return vy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yy.create(n,...e)}function se(n,e,...t){if(!n)throw Sh(e,...t)}function xs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw za(e),new Error(e)}function Wa(n,e){n||xs(e)}function xC(){return ly()==="http:"||ly()==="https:"}function ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function VC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||P_()||"connection"in navigator)?navigator.onLine:!0}function FC(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var rr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wa(t>e,"Short delay should be less than long delay!"),this.isMobile=S_()||D_()}get(){return VC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function LC(n,e){Wa(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ka=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BC=new rr(3e4,6e4);function wy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Za(s,a,c,l){return C(this,arguments,function*(n,e,t,r,i={}){return Ey(n,i,()=>C(null,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let g=Wl(Object.assign({key:n.config.apiKey},p)).slice(1),v=yield n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:v},d);return R_()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&Kn(n.emulatorConfig.host)&&(S.credentials="include"),Ka.fetch()(yield Iy(n,n.config.apiHost,t,g),S)}))})}function Ey(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},UC),e);try{let i=new yh(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw qa(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qa(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw qa(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw qa(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vy(n,p,d);uy(n,p)}}catch(i){if(i instanceof gt)throw i;uy(n,"network-request-failed",{message:String(i)})}})}function Iy(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,s=n,a=s.config.emulator?LC(n.config,i):`${n.config.apiScheme}://${i}`;return jC.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}var yh=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ah(this.auth,"network-request-failed")),BC.get())})}};function qa(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ah(n,e,r);return i.customData._tokenResponse=t,i}function $C(n,e){return C(this,null,function*(){return Za(n,"POST","/v1/accounts:delete",e)})}function Qa(n,e){return C(this,null,function*(){return Za(n,"POST","/v1/accounts:lookup",e)})}function Vs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Rh(n,e=!1){return C(this,null,function*(){let t=tt(n),r=yield t.getIdToken(e),i=by(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Vs(gh(i.auth_time)),issuedAtTime:Vs(gh(i.iat)),expirationTime:Vs(gh(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function gh(n){return Number(n)*1e3}function by(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return za("JWT malformed, contained fewer than 3 sections"),null;try{let i=Na(t);return i?JSON.parse(i):(za("Failed to decode base64 JWT payload"),null)}catch(i){return za("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hy(n){let e=by(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vh(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof gt&&qC(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function qC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var wh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ls=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vs(this.lastLoginAt),this.creationTime=Vs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ya(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield vh(n,Qa(t,{idToken:r}));se(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ty(s.providerUserInfo):[],c=zC(n.providerData,a),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=l?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ls(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)})}function Ph(n){return C(this,null,function*(){let e=tt(n);yield Ya(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function zC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ty(n){return n.map(e=>{var{providerId:t}=e,r=Pu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function HC(n,e){return C(this,null,function*(){let t=yield Ey(n,{},()=>C(null,null,function*(){let r=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=yield Iy(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Kn(n.emulatorConfig.host)&&(l.credentials="include"),Ka.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GC(n,e){return C(this,null,function*(){return Za(n,"POST","/v2/accounts:revokeToken",wy(n,e))})}var Fs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=hy(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield HC(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return xs("not implemented")}};function Cn(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var tr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Pu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ls(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield vh(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Rh(this,e)}reload(){return Ph(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ya(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(tn(this.auth.app))return Promise.reject(Ha(this.auth));let e=yield this.getIdToken();return yield vh(this,$C(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,l,d,p;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(a=t.photoURL)!==null&&a!==void 0?a:void 0,V=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:H,emailVerified:le,isAnonymous:ze,providerData:ce,stsTokenManager:E}=t;se(H&&E,e,"internal-error");let m=Fs.fromJSON(this.name,E);se(typeof H=="string",e,"internal-error"),Cn(g,e.name),Cn(v,e.name),se(typeof le=="boolean",e,"internal-error"),se(typeof ze=="boolean",e,"internal-error"),Cn(S,e.name),Cn(D,e.name),Cn(V,e.name),Cn(k,e.name),Cn(G,e.name),Cn(z,e.name);let y=new n({uid:H,auth:e,email:v,emailVerified:le,displayName:g,isAnonymous:ze,photoURL:D,phoneNumber:S,tenantId:V,stsTokenManager:m,createdAt:G,lastLoginAt:z});return ce&&Array.isArray(ce)&&(y.providerData=ce.map(w=>Object.assign({},w))),k&&(y._redirectEventId=k),y}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new Fs;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ya(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Ty(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Fs;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ls(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var dy=new Map;function nr(n){Wa(n instanceof Function,"Expected a class definition");let e=dy.get(n);return e?(Wa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dy.set(n,e),e)}var WC=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Eh=WC;function _h(n,e,t){return`firebase:${n}:${e}:${t}`}var Ja=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=_h(this.userKey,i.apiKey,s),this.fullPersistenceKey=_h("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Qa(this.auth,{idToken:e}).catch(()=>{});return t?tr._fromGetAccountInfoResponse(this.auth,t,e):null}return tr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(nr(Eh),e,r);let i=(yield Promise.all(t.map(d=>C(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||nr(Eh),a=_h(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let g;if(typeof p=="string"){let v=yield Qa(e,{idToken:p}).catch(()=>{});if(!v)break;g=yield tr._fromGetAccountInfoResponse(e,v,p)}else g=tr._fromJSON(e,p);d!==s&&(c=g),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>C(null,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function fy(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZC(e))return"Blackberry";if(eA(e))return"Webos";if(QC(e))return"Safari";if((e.includes("chrome/")||YC(e))&&!e.includes("edge/"))return"Chrome";if(XC(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KC(n=ct()){return/firefox\//i.test(n)}function QC(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YC(n=ct()){return/crios\//i.test(n)}function JC(n=ct()){return/iemobile/i.test(n)}function XC(n=ct()){return/android/i.test(n)}function ZC(n=ct()){return/blackberry/i.test(n)}function eA(n=ct()){return/webos/i.test(n)}function Cy(n,e=[]){let t;switch(n){case"Browser":t=fy(ct());break;case"Worker":t=`${fy(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wr}/${r}`}var Ih=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function tA(t){return C(this,arguments,function*(n,e={}){return Za(n,"GET","/v2/passwordPolicy",wy(n,e))})}var nA=6,bh=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:nA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Th=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xa(this),this.idTokenSubscription=new Xa(this),this.beforeStateQueue=new Ih(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nr(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield Ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield Qa(this,{idToken:e}),r=yield tr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(tn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Ya(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=FC()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(tn(this.app))return Promise.reject(Ha(this));let t=e?tt(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return tn(this.app)?Promise.reject(Ha(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tn(this.app)?Promise.reject(Ha(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield tA(this),t=new bh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new It("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield GC(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&nr(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=yield Ja.create(this,[nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&MC(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function rA(n){return tt(n)}var Xa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=N_(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iA={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sA(n){iA=n}function oA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function aA(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var OO=oA("rcb"),NO=new rr(3e4,6e4);var MO=new rr(2e3,1e4);var xO=600*1e3;var VO=new rr(3e4,6e4);var FO=new rr(5e3,15e3);var LO=encodeURIComponent("fac");var py="@firebase/auth",my="1.10.8";var Ch=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uA(n){bt(new Ze("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;se(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cy(n)},d=new Th(r,i,s,l);return aA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),bt(new Ze("auth-internal",e=>{let t=rA(e.getProvider("auth").getImmediate());return(r=>new Ch(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(py,my,cA(n)),Te(py,my,"esm2017")}var lA=300,UO=C_("authIdTokenMaxAge")||lA;function hA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sA({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Ah("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",hA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uA("Browser");var uS="auth";var ec=class{constructor(){return Yr(uS)}};var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sy={};var nn,Dh;(function(){var n;function e(E,m){function y(){}y.prototype=m.prototype,E.D=m.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(w,I,T){for(var _=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)_[$t-2]=arguments[$t];return m.prototype[I].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,y){y||(y=0);var w=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)w[I]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(I=0;16>I;++I)w[I]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=E.g[0],y=E.g[1],I=E.g[2];var T=E.g[3],_=m+(T^y&(I^T))+w[0]+3614090360&4294967295;m=y+(_<<7&4294967295|_>>>25),_=T+(I^m&(y^I))+w[1]+3905402710&4294967295,T=m+(_<<12&4294967295|_>>>20),_=I+(y^T&(m^y))+w[2]+606105819&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(m^I&(T^m))+w[3]+3250441966&4294967295,y=I+(_<<22&4294967295|_>>>10),_=m+(T^y&(I^T))+w[4]+4118548399&4294967295,m=y+(_<<7&4294967295|_>>>25),_=T+(I^m&(y^I))+w[5]+1200080426&4294967295,T=m+(_<<12&4294967295|_>>>20),_=I+(y^T&(m^y))+w[6]+2821735955&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(m^I&(T^m))+w[7]+4249261313&4294967295,y=I+(_<<22&4294967295|_>>>10),_=m+(T^y&(I^T))+w[8]+1770035416&4294967295,m=y+(_<<7&4294967295|_>>>25),_=T+(I^m&(y^I))+w[9]+2336552879&4294967295,T=m+(_<<12&4294967295|_>>>20),_=I+(y^T&(m^y))+w[10]+4294925233&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(m^I&(T^m))+w[11]+2304563134&4294967295,y=I+(_<<22&4294967295|_>>>10),_=m+(T^y&(I^T))+w[12]+1804603682&4294967295,m=y+(_<<7&4294967295|_>>>25),_=T+(I^m&(y^I))+w[13]+4254626195&4294967295,T=m+(_<<12&4294967295|_>>>20),_=I+(y^T&(m^y))+w[14]+2792965006&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(m^I&(T^m))+w[15]+1236535329&4294967295,y=I+(_<<22&4294967295|_>>>10),_=m+(I^T&(y^I))+w[1]+4129170786&4294967295,m=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(m^y))+w[6]+3225465664&4294967295,T=m+(_<<9&4294967295|_>>>23),_=I+(m^y&(T^m))+w[11]+643717713&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^m&(I^T))+w[0]+3921069994&4294967295,y=I+(_<<20&4294967295|_>>>12),_=m+(I^T&(y^I))+w[5]+3593408605&4294967295,m=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(m^y))+w[10]+38016083&4294967295,T=m+(_<<9&4294967295|_>>>23),_=I+(m^y&(T^m))+w[15]+3634488961&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^m&(I^T))+w[4]+3889429448&4294967295,y=I+(_<<20&4294967295|_>>>12),_=m+(I^T&(y^I))+w[9]+568446438&4294967295,m=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(m^y))+w[14]+3275163606&4294967295,T=m+(_<<9&4294967295|_>>>23),_=I+(m^y&(T^m))+w[3]+4107603335&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^m&(I^T))+w[8]+1163531501&4294967295,y=I+(_<<20&4294967295|_>>>12),_=m+(I^T&(y^I))+w[13]+2850285829&4294967295,m=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(m^y))+w[2]+4243563512&4294967295,T=m+(_<<9&4294967295|_>>>23),_=I+(m^y&(T^m))+w[7]+1735328473&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^m&(I^T))+w[12]+2368359562&4294967295,y=I+(_<<20&4294967295|_>>>12),_=m+(y^I^T)+w[5]+4294588738&4294967295,m=y+(_<<4&4294967295|_>>>28),_=T+(m^y^I)+w[8]+2272392833&4294967295,T=m+(_<<11&4294967295|_>>>21),_=I+(T^m^y)+w[11]+1839030562&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^m)+w[14]+4259657740&4294967295,y=I+(_<<23&4294967295|_>>>9),_=m+(y^I^T)+w[1]+2763975236&4294967295,m=y+(_<<4&4294967295|_>>>28),_=T+(m^y^I)+w[4]+1272893353&4294967295,T=m+(_<<11&4294967295|_>>>21),_=I+(T^m^y)+w[7]+4139469664&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^m)+w[10]+3200236656&4294967295,y=I+(_<<23&4294967295|_>>>9),_=m+(y^I^T)+w[13]+681279174&4294967295,m=y+(_<<4&4294967295|_>>>28),_=T+(m^y^I)+w[0]+3936430074&4294967295,T=m+(_<<11&4294967295|_>>>21),_=I+(T^m^y)+w[3]+3572445317&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^m)+w[6]+76029189&4294967295,y=I+(_<<23&4294967295|_>>>9),_=m+(y^I^T)+w[9]+3654602809&4294967295,m=y+(_<<4&4294967295|_>>>28),_=T+(m^y^I)+w[12]+3873151461&4294967295,T=m+(_<<11&4294967295|_>>>21),_=I+(T^m^y)+w[15]+530742520&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^m)+w[2]+3299628645&4294967295,y=I+(_<<23&4294967295|_>>>9),_=m+(I^(y|~T))+w[0]+4096336452&4294967295,m=y+(_<<6&4294967295|_>>>26),_=T+(y^(m|~I))+w[7]+1126891415&4294967295,T=m+(_<<10&4294967295|_>>>22),_=I+(m^(T|~y))+w[14]+2878612391&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~m))+w[5]+4237533241&4294967295,y=I+(_<<21&4294967295|_>>>11),_=m+(I^(y|~T))+w[12]+1700485571&4294967295,m=y+(_<<6&4294967295|_>>>26),_=T+(y^(m|~I))+w[3]+2399980690&4294967295,T=m+(_<<10&4294967295|_>>>22),_=I+(m^(T|~y))+w[10]+4293915773&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~m))+w[1]+2240044497&4294967295,y=I+(_<<21&4294967295|_>>>11),_=m+(I^(y|~T))+w[8]+1873313359&4294967295,m=y+(_<<6&4294967295|_>>>26),_=T+(y^(m|~I))+w[15]+4264355552&4294967295,T=m+(_<<10&4294967295|_>>>22),_=I+(m^(T|~y))+w[6]+2734768916&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~m))+w[13]+1309151649&4294967295,y=I+(_<<21&4294967295|_>>>11),_=m+(I^(y|~T))+w[4]+4149444226&4294967295,m=y+(_<<6&4294967295|_>>>26),_=T+(y^(m|~I))+w[11]+3174756917&4294967295,T=m+(_<<10&4294967295|_>>>22),_=I+(m^(T|~y))+w[2]+718787259&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var y=m-this.blockSize,w=this.B,I=this.h,T=0;T<m;){if(I==0)for(;T<=y;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<m;)if(w[I++]=E.charCodeAt(T++),I==this.blockSize){i(this,w),I=0;break}}else for(;T<m;)if(w[I++]=E[T++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var y=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=y&255,y/=256;for(this.u(E),E=Array(16),m=y=0;4>m;++m)for(var w=0;32>w;w+=8)E[y++]=this.g[m]>>>w&255;return E};function s(E,m){var y=c;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=m(E)}function a(E,m){this.h=m;for(var y=[],w=!0,I=E.length-1;0<=I;I--){var T=E[I]|0;w&&T==m||(y[I]=T,w=!1)}this.g=y}var c={};function l(E){return-128<=E&&128>E?s(E,function(m){return new a([m|0],0>m?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return k(d(-E));for(var m=[],y=1,w=0;E>=y;w++)m[w]=E/y|0,y*=4294967296;return new a(m,0)}function p(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return k(p(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),w=g,I=0;I<E.length;I+=8){var T=Math.min(8,E.length-I),_=parseInt(E.substring(I,I+T),m);8>T?(T=d(Math.pow(m,T)),w=w.j(T).add(d(_))):(w=w.j(y),w=w.add(d(_)))}return w}var g=l(0),v=l(1),S=l(16777216);n=a.prototype,n.m=function(){if(V(this))return-k(this).m();for(var E=0,m=1,y=0;y<this.g.length;y++){var w=this.i(y);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(V(this))return"-"+k(this).toString(E);for(var m=d(Math.pow(E,6)),y=this,w="";;){var I=le(y,m).g;y=G(y,I.j(m));var T=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=I,D(y))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function V(E){return E.h==-1}n.l=function(E){return E=G(this,E),V(E)?-1:D(E)?0:1};function k(E){for(var m=E.g.length,y=[],w=0;w<m;w++)y[w]=~E.g[w];return new a(y,~E.h).add(v)}n.abs=function(){return V(this)?k(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0,I=0;I<=m;I++){var T=w+(this.i(I)&65535)+(E.i(I)&65535),_=(T>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);w=_>>>16,T&=65535,_&=65535,y[I]=_<<16|T}return new a(y,y[y.length-1]&-2147483648?-1:0)};function G(E,m){return E.add(k(m))}n.j=function(E){if(D(this)||D(E))return g;if(V(this))return V(E)?k(this).j(k(E)):k(k(this).j(E));if(V(E))return k(this.j(k(E)));if(0>this.l(S)&&0>E.l(S))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,y=[],w=0;w<2*m;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<E.g.length;I++){var T=this.i(w)>>>16,_=this.i(w)&65535,$t=E.i(I)>>>16,Ei=E.i(I)&65535;y[2*w+2*I]+=_*Ei,z(y,2*w+2*I),y[2*w+2*I+1]+=T*Ei,z(y,2*w+2*I+1),y[2*w+2*I+1]+=_*$t,z(y,2*w+2*I+1),y[2*w+2*I+2]+=T*$t,z(y,2*w+2*I+2)}for(w=0;w<m;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=m;w<2*m;w++)y[w]=0;return new a(y,0)};function z(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function H(E,m){this.g=E,this.h=m}function le(E,m){if(D(m))throw Error("division by zero");if(D(E))return new H(g,g);if(V(E))return m=le(k(E),m),new H(k(m.g),k(m.h));if(V(m))return m=le(E,k(m)),new H(k(m.g),m.h);if(30<E.g.length){if(V(E)||V(m))throw Error("slowDivide_ only works with positive integers.");for(var y=v,w=m;0>=w.l(E);)y=ze(y),w=ze(w);var I=ce(y,1),T=ce(w,1);for(w=ce(w,2),y=ce(y,2);!D(w);){var _=T.add(w);0>=_.l(E)&&(I=I.add(y),T=_),w=ce(w,1),y=ce(y,1)}return m=G(E,I.j(m)),new H(I,m)}for(I=g;0<=E.l(m);){for(y=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=d(y),_=T.j(m);V(_)||0<_.l(E);)y-=w,T=d(y),_=T.j(m);D(T)&&(T=v),I=I.add(T),E=G(E,_)}return new H(I,E)}n.A=function(E){return le(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)&E.i(w);return new a(y,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)|E.i(w);return new a(y,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],w=0;w<m;w++)y[w]=this.i(w)^E.i(w);return new a(y,this.h^E.h)};function ze(E){for(var m=E.g.length+1,y=[],w=0;w<m;w++)y[w]=E.i(w)<<1|E.i(w-1)>>>31;return new a(y,E.h)}function ce(E,m){var y=m>>5;m%=32;for(var w=E.g.length-y,I=[],T=0;T<w;T++)I[T]=0<m?E.i(T+y)>>>m|E.i(T+y+1)<<32-m:E.i(T+y);return new a(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dh=Sy.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,nn=Sy.Integer=a}).apply(typeof Ay<"u"?Ay:typeof self<"u"?self:typeof window<"u"?window:{});var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rn={};var kh,lS,Jr,Oh,Us,nc,Nh,Mh,xh;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof tc=="object"&&tc];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var b=o[f];if(!(b in h))break e;h=h[b]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,f=!1,b={next:function(){if(!f&&h<o.length){var A=h++;return{value:u(A,o[A]),done:!1}}return f=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,h){return o.call.apply(o.bind,arguments)}function g(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,f),o.apply(u,b)}}return function(){return o.apply(u,arguments)}}function v(o,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function S(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function D(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,b,A){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return u.prototype[b].apply(f,N)}}function V(o){let u=o.length;if(0<u){let h=Array(u);for(let f=0;f<u;f++)h[f]=o[f];return h}return[]}function k(o,u){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let b=o.length||0,A=f.length||0;o.length=b+A;for(let N=0;N<A;N++)o[b+N]=f[N]}else o.push(f)}}class G{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function z(o){return/^[\s\xa0]*$/.test(o)}function H(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function le(o){return le[" "](o),o}le[" "]=function(){};var ze=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ce(o,u,h){for(let f in o)u.call(h,o[f],f,o)}function E(o,u){for(let h in o)u.call(void 0,o[h],h,o)}function m(o){let u={};for(let h in o)u[h]=o[h];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,u){let h,f;for(let b=1;b<arguments.length;b++){f=arguments[b];for(h in f)o[h]=f[h];for(let A=0;A<y.length;A++)h=y[A],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function I(o){var u=1;o=o.split(":");let h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function T(o){c.setTimeout(()=>{throw o},0)}function _(){var o=tu;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class $t{constructor(){this.h=this.g=null}add(u,h){let f=Ei.get();f.set(u,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Ei=new G(()=>new mE,o=>o.reset());class mE{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ii,bi=!1,tu=new $t,np=()=>{let o=c.Promise.resolve(void 0);Ii=()=>{o.then(gE)}};var gE=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(h){T(h)}var u=Ei;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}bi=!1};function dn(){this.s=this.s,this.C=this.C}dn.prototype.s=!1,dn.prototype.ma=function(){this.s||(this.s=!0,this.N())},dn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var _E=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return o})();function Ti(o,u){if(Ve.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ze){e:{try{le(u.nodeName);var b=!0;break e}catch{}b=!1}b||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:yE[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ti.aa.h.call(this)}}D(Ti,Ve);var yE={2:"touch",3:"pen",4:"mouse"};Ti.prototype.h=function(){Ti.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ci="closure_listenable_"+(1e6*Math.random()|0),vE=0;function wE(o,u,h,f,b){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.ha=b,this.key=++vE,this.da=this.fa=!1}function ao(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function co(o){this.src=o,this.g={},this.h=0}co.prototype.add=function(o,u,h,f,b){var A=o.toString();o=this.g[A],o||(o=this.g[A]=[],this.h++);var N=ru(o,u,f,b);return-1<N?(u=o[N],h||(u.fa=!1)):(u=new wE(u,this.src,A,!!f,b),u.fa=h,o.push(u)),u};function nu(o,u){var h=u.type;if(h in o.g){var f=o.g[h],b=Array.prototype.indexOf.call(f,u,void 0),A;(A=0<=b)&&Array.prototype.splice.call(f,b,1),A&&(ao(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function ru(o,u,h,f){for(var b=0;b<o.length;++b){var A=o[b];if(!A.da&&A.listener==u&&A.capture==!!h&&A.ha==f)return b}return-1}var iu="closure_lm_"+(1e6*Math.random()|0),su={};function rp(o,u,h,f,b){if(f&&f.once)return sp(o,u,h,f,b);if(Array.isArray(u)){for(var A=0;A<u.length;A++)rp(o,u[A],h,f,b);return null}return h=uu(h),o&&o[Ci]?o.K(u,h,d(f)?!!f.capture:!!f,b):ip(o,u,h,!1,f,b)}function ip(o,u,h,f,b,A){if(!u)throw Error("Invalid event type");var N=d(b)?!!b.capture:!!b,he=au(o);if(he||(o[iu]=he=new co(o)),h=he.add(u,h,f,N,A),h.proxy)return h;if(f=EE(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)_E||(b=N),b===void 0&&(b=!1),o.addEventListener(u.toString(),f,b);else if(o.attachEvent)o.attachEvent(ap(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function EE(){function o(h){return u.call(o.src,o.listener,h)}let u=IE;return o}function sp(o,u,h,f,b){if(Array.isArray(u)){for(var A=0;A<u.length;A++)sp(o,u[A],h,f,b);return null}return h=uu(h),o&&o[Ci]?o.L(u,h,d(f)?!!f.capture:!!f,b):ip(o,u,h,!0,f,b)}function op(o,u,h,f,b){if(Array.isArray(u))for(var A=0;A<u.length;A++)op(o,u[A],h,f,b);else f=d(f)?!!f.capture:!!f,h=uu(h),o&&o[Ci]?(o=o.i,u=String(u).toString(),u in o.g&&(A=o.g[u],h=ru(A,h,f,b),-1<h&&(ao(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete o.g[u],o.h--)))):o&&(o=au(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ru(u,h,f,b)),(h=-1<o?u[o]:null)&&ou(h))}function ou(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ci])nu(u.i,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(ap(h),f):u.addListener&&u.removeListener&&u.removeListener(f),(h=au(u))?(nu(h,o),h.h==0&&(h.src=null,u[iu]=null)):ao(o)}}}function ap(o){return o in su?su[o]:su[o]="on"+o}function IE(o,u){if(o.da)o=!0;else{u=new Ti(u,this);var h=o.listener,f=o.ha||o.src;o.fa&&ou(o),o=h.call(f,u)}return o}function au(o){return o=o[iu],o instanceof co?o:null}var cu="__closure_events_fn_"+(1e9*Math.random()>>>0);function uu(o){return typeof o=="function"?o:(o[cu]||(o[cu]=function(u){return o.handleEvent(u)}),o[cu])}function Fe(){dn.call(this),this.i=new co(this),this.M=this,this.F=null}D(Fe,dn),Fe.prototype[Ci]=!0,Fe.prototype.removeEventListener=function(o,u,h,f){op(this,o,u,h,f)};function He(o,u){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ve(u,o);else if(u instanceof Ve)u.target=u.target||o;else{var b=u;u=new Ve(f,o),w(u,b)}if(b=!0,h)for(var A=h.length-1;0<=A;A--){var N=u.g=h[A];b=uo(N,f,!0,u)&&b}if(N=u.g=o,b=uo(N,f,!0,u)&&b,b=uo(N,f,!1,u)&&b,h)for(A=0;A<h.length;A++)N=u.g=h[A],b=uo(N,f,!1,u)&&b}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],f=0;f<h.length;f++)ao(h[f]);delete o.g[u],o.h--}}this.F=null},Fe.prototype.K=function(o,u,h,f){return this.i.add(String(o),u,!1,h,f)},Fe.prototype.L=function(o,u,h,f){return this.i.add(String(o),u,!0,h,f)};function uo(o,u,h,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var b=!0,A=0;A<u.length;++A){var N=u[A];if(N&&!N.da&&N.capture==h){var he=N.listener,Me=N.ha||N.src;N.fa&&nu(o.i,N),b=he.call(Me,f)!==!1&&b}}return b&&!f.defaultPrevented}function cp(o,u,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function up(o){o.g=cp(()=>{o.g=null,o.i&&(o.i=!1,up(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class bE extends dn{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:up(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(o){dn.call(this),this.h=o,this.g={}}D(Ai,dn);var lp=[];function hp(o){ce(o.g,function(u,h){this.g.hasOwnProperty(h)&&ou(u)},o),o.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),hp(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lu=c.JSON.stringify,TE=c.JSON.parse,CE=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function hu(){}hu.prototype.h=null;function dp(o){return o.h||(o.h=o.i())}function fp(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function du(){Ve.call(this,"d")}D(du,Ve);function fu(){Ve.call(this,"c")}D(fu,Ve);var xn={},pp=null;function lo(){return pp=pp||new Fe}xn.La="serverreachability";function mp(o){Ve.call(this,xn.La,o)}D(mp,Ve);function Ri(o){let u=lo();He(u,new mp(u))}xn.STAT_EVENT="statevent";function gp(o,u){Ve.call(this,xn.STAT_EVENT,o),this.stat=u}D(gp,Ve);function Ge(o){let u=lo();He(u,new gp(u,o))}xn.Ma="timingevent";function _p(o,u){Ve.call(this,xn.Ma,o),this.size=u}D(_p,Ve);function Pi(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Di(){this.g=!0}Di.prototype.xa=function(){this.g=!1};function AE(o,u,h,f,b,A){o.info(function(){if(o.g)if(A)for(var N="",he=A.split("&"),Me=0;Me<he.length;Me++){var te=he[Me].split("=");if(1<te.length){var Le=te[0];te=te[1];var Ue=Le.split("_");N=2<=Ue.length&&Ue[1]=="type"?N+(Le+"="+te+"&"):N+(Le+"=redacted&")}}else N=null;else N=A;return"XMLHTTP REQ ("+f+") [attempt "+b+"]: "+u+`
`+h+`
`+N})}function SE(o,u,h,f,b,A,N){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+b+"]: "+u+`
`+h+`
`+A+" "+N})}function Er(o,u,h,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+PE(o,h)+(f?" "+f:"")})}function RE(o,u){o.info(function(){return"TIMEOUT: "+u})}Di.prototype.info=function(){};function PE(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var b=f[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var N=1;N<b.length;N++)b[N]=""}}}}return lu(h)}catch{return u}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pu;function fo(){}D(fo,hu),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},pu=new fo;function fn(o,u,h,f){this.j=o,this.i=u,this.l=h,this.R=f||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vp}function vp(){this.i=null,this.g="",this.h=!1}var wp={},mu={};function gu(o,u,h){o.L=1,o.v=_o(qt(u)),o.m=h,o.P=!0,Ep(o,null)}function Ep(o,u){o.F=Date.now(),po(o),o.A=qt(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),xp(h.i,"t",f),o.C=0,h=o.j.J,o.h=new vp,o.g=Zp(o.j,h?u:null,!o.m),0<o.O&&(o.M=new bE(v(o.Y,o,o.g),o.O)),u=o.U,h=o.g,f=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(lp[0]=b.toString()),b=lp);for(var A=0;A<b.length;A++){var N=rp(h,b[A],f||u.handleEvent,!1,u.h||u);if(!N)break;u.g[N.key]=N}u=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Ri(),AE(o.i,o.u,o.A,o.l,o.R,o.m)}fn.prototype.ca=function(o){o=o.target;let u=this.M;u&&zt(o)==3?u.j():this.Y(o)},fn.prototype.Y=function(o){try{if(o==this.g)e:{let Ue=zt(this.g);var u=this.g.Ba();let Tr=this.g.Z();if(!(3>Ue)&&(Ue!=3||this.g&&(this.h.h||this.g.oa()||$p(this.g)))){this.J||Ue!=4||u==7||(u==8||0>=Tr?Ri(3):Ri(2)),_u(this);var h=this.g.Z();this.X=h;t:if(Ip(this)){var f=$p(this.g);o="";var b=f.length,A=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),ki(this);var N="";break t}this.h.i=new c.TextDecoder}for(u=0;u<b;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(A&&u==b-1)});f.length=0,this.h.g+=o,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=h==200,SE(this.i,this.u,this.A,this.l,this.R,Ue,h),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Me=this.g;if((he=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(he)){var te=he;break t}}te=null}if(h=te)Er(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yu(this,h);else{this.o=!1,this.s=3,Ge(12),Vn(this),ki(this);break e}}if(this.P){h=!0;let yt;for(;!this.J&&this.C<N.length;)if(yt=DE(this,N),yt==mu){Ue==4&&(this.s=4,Ge(14),h=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==wp){this.s=4,Ge(15),Er(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else Er(this.i,this.l,yt,null),yu(this,yt);if(Ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||N.length!=0||this.h.h||(this.s=1,Ge(16),h=!1),this.o=this.o&&h,!h)Er(this.i,this.l,N,"[Invalid Chunked Response]"),Vn(this),ki(this);else if(0<N.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Tu(Le),Le.M=!0,Ge(11))}}else Er(this.i,this.l,N,null),yu(this,N);Ue==4&&Vn(this),this.o&&!this.J&&(Ue==4?Qp(this.j,this):(this.o=!1,po(this)))}else WE(this.g),h==400&&0<N.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Vn(this),ki(this)}}}catch{}finally{}};function Ip(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function DE(o,u){var h=o.C,f=u.indexOf(`
`,h);return f==-1?mu:(h=Number(u.substring(h,f)),isNaN(h)?wp:(f+=1,f+h>u.length?mu:(u=u.slice(f,f+h),o.C=f+h,u)))}fn.prototype.cancel=function(){this.J=!0,Vn(this)};function po(o){o.S=Date.now()+o.I,bp(o,o.I)}function bp(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Pi(v(o.ba,o),u)}function _u(o){o.B&&(c.clearTimeout(o.B),o.B=null)}fn.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(RE(this.i,this.A),this.L!=2&&(Ri(),Ge(17)),Vn(this),this.s=2,ki(this)):bp(this,this.S-o)};function ki(o){o.j.G==0||o.J||Qp(o.j,o)}function Vn(o){_u(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,hp(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function yu(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||vu(h.h,o))){if(!o.K&&vu(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var b=f;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Io(h),wo(h);else break e;bu(h),Ge(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Pi(v(h.Za,h),6e3));if(1>=Ap(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Ln(h,11)}else if((o.K||h.g==o)&&Io(h),!z(u))for(b=h.Da.g.parse(u),u=0;u<b.length;u++){let te=b[u];if(h.T=te[0],te=te[1],h.G==2)if(te[0]=="c"){h.K=te[1],h.ia=te[2];let Le=te[3];Le!=null&&(h.la=Le,h.j.info("VER="+h.la));let Ue=te[4];Ue!=null&&(h.Aa=Ue,h.j.info("SVER="+h.Aa));let Tr=te[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(f=1.5*Tr,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let yt=o.g;if(yt){let To=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(To){var A=f.h;A.g||To.indexOf("spdy")==-1&&To.indexOf("quic")==-1&&To.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(wu(A,A.h),A.h=null))}if(f.D){let Cu=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Cu&&(f.ya=Cu,pe(f.I,f.D,Cu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var N=o;if(f.qa=Xp(f,f.J?f.ia:null,f.W),N.K){Sp(f.h,N);var he=N,Me=f.L;Me&&(he.I=Me),he.B&&(_u(he),po(he)),f.g=N}else Wp(f);0<h.i.length&&Eo(h)}else te[0]!="stop"&&te[0]!="close"||Ln(h,7);else h.G==3&&(te[0]=="stop"||te[0]=="close"?te[0]=="stop"?Ln(h,7):Iu(h):te[0]!="noop"&&h.l&&h.l.ta(te),h.v=0)}}Ri(4)}catch{}}var kE=class{constructor(o,u){this.g=o,this.map=u}};function Tp(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ap(o){return o.h?1:o.g?o.g.size:0}function vu(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function wu(o,u){o.g?o.g.add(u):o.h=u}function Sp(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Tp.prototype.cancel=function(){if(this.i=Rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Rp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let h of o.g.values())u=u.concat(h.D);return u}return V(o.i)}function OE(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}u=[],h=0;for(f in o)u[h++]=o[f];return u}function NE(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(let f in o)u[h++]=f;return u}}}function Pp(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=NE(o),f=OE(o),b=f.length,A=0;A<b;A++)u.call(void 0,f[A],h&&h[A],o)}var Dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ME(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),b=null;if(0<=f){var A=o[h].substring(0,f);b=o[h].substring(f+1)}else A=o[h];u(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Fn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Fn){this.h=o.h,mo(this,o.j),this.o=o.o,this.g=o.g,go(this,o.s),this.l=o.l;var u=o.i,h=new Mi;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),kp(this,h),this.m=o.m}else o&&(u=String(o).match(Dp))?(this.h=!1,mo(this,u[1]||"",!0),this.o=Oi(u[2]||""),this.g=Oi(u[3]||"",!0),go(this,u[4]),this.l=Oi(u[5]||"",!0),kp(this,u[6]||"",!0),this.m=Oi(u[7]||"")):(this.h=!1,this.i=new Mi(null,this.h))}Fn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ni(u,Op,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ni(u,Op,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Ni(h,h.charAt(0)=="/"?FE:VE,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Ni(h,UE)),o.join("")};function qt(o){return new Fn(o)}function mo(o,u,h){o.j=h?Oi(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function go(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function kp(o,u,h){u instanceof Mi?(o.i=u,jE(o.i,o.h)):(h||(u=Ni(u,LE)),o.i=new Mi(u,o.h))}function pe(o,u,h){o.i.set(u,h)}function _o(o){return pe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Oi(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ni(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,xE),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function xE(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Op=/[#\/\?@]/g,VE=/[#\?:]/g,FE=/[#\?]/g,LE=/[#\?@]/g,UE=/#/g;function Mi(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function pn(o){o.g||(o.g=new Map,o.h=0,o.i&&ME(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Mi.prototype,n.add=function(o,u){pn(this),this.i=null,o=Ir(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Np(o,u){pn(o),u=Ir(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Mp(o,u){return pn(o),u=Ir(o,u),o.g.has(u)}n.forEach=function(o,u){pn(this),this.g.forEach(function(h,f){h.forEach(function(b){o.call(u,b,f,this)},this)},this)},n.na=function(){pn(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let f=0;f<u.length;f++){let b=o[f];for(let A=0;A<b.length;A++)h.push(u[f])}return h},n.V=function(o){pn(this);let u=[];if(typeof o=="string")Mp(this,o)&&(u=u.concat(this.g.get(Ir(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},n.set=function(o,u){return pn(this),this.i=null,o=Ir(this,o),Mp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function xp(o,u,h){Np(o,u),0<h.length&&(o.i=null,o.g.set(Ir(o,u),V(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var f=u[h];let A=encodeURIComponent(String(f)),N=this.V(f);for(f=0;f<N.length;f++){var b=A;N[f]!==""&&(b+="="+encodeURIComponent(String(N[f]))),o.push(b)}}return this.i=o.join("&")};function Ir(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function jE(o,u){u&&!o.j&&(pn(o),o.i=null,o.g.forEach(function(h,f){var b=f.toLowerCase();f!=b&&(Np(this,f),xp(this,b,h))},o)),o.j=u}function BE(o,u){let h=new Di;if(c.Image){let f=new Image;f.onload=S(mn,h,"TestLoadImage: loaded",!0,u,f),f.onerror=S(mn,h,"TestLoadImage: error",!1,u,f),f.onabort=S(mn,h,"TestLoadImage: abort",!1,u,f),f.ontimeout=S(mn,h,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function $E(o,u){let h=new Di,f=new AbortController,b=setTimeout(()=>{f.abort(),mn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(A=>{clearTimeout(b),A.ok?mn(h,"TestPingServer: ok",!0,u):mn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(b),mn(h,"TestPingServer: error",!1,u)})}function mn(o,u,h,f,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),f(h)}catch{}}function qE(){this.g=new CE}function zE(o,u,h){let f=h||"";try{Pp(o,function(b,A){let N=b;d(b)&&(N=lu(b)),u.push(f+A+"="+encodeURIComponent(N))})}catch(b){throw u.push(f+"type="+encodeURIComponent("_badmap")),b}}function xi(o){this.l=o.Ub||null,this.j=o.eb||!1}D(xi,hu),xi.prototype.g=function(){return new yo(this.l,this.j)},xi.prototype.i=(function(o){return function(){return o}})({});function yo(o,u){Fe.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(yo,Fe),n=yo.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Fi(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Vi(this):Fi(this),this.readyState==3&&Vp(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Vi(this))},n.Qa=function(o){this.g&&(this.response=o,Vi(this))},n.ga=function(){this.g&&Vi(this)};function Vi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Fi(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Fi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Fp(o){let u="";return ce(o,function(h,f){u+=f,u+=":",u+=h,u+=`\r
`}),u}function Eu(o,u,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=Fp(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):pe(o,u,h))}function ve(o){Fe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ve,Fe);var HE=/^https?$/i,GE=["POST","PUT"];n=ve.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pu.g(),this.v=this.o?dp(this.o):dp(pu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(A){Lp(this,A);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var b in f)h.set(b,f[b]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let A of f.keys())h.set(A,f.get(A));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(GE,u,void 0))||f||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,N]of h)this.g.setRequestHeader(A,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bp(this),this.u=!0,this.g.send(o),this.u=!1}catch(A){Lp(this,A)}};function Lp(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Up(o),vo(o)}function Up(o){o.A||(o.A=!0,He(o,"complete"),He(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,He(this,"complete"),He(this,"abort"),vo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jp(this):this.bb())},n.bb=function(){jp(this)};function jp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||zt(o)!=4||o.Z()!=2)){if(o.u&&zt(o)==4)cp(o.Ea,0,o);else if(He(o,"readystatechange"),zt(o)==4){o.h=!1;try{let N=o.Z();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var f;if(f=N===0){var b=String(o.D).match(Dp)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),f=!HE.test(b?b.toLowerCase():"")}h=f}if(h)He(o,"complete"),He(o,"success");else{o.m=6;try{var A=2<zt(o)?o.g.statusText:""}catch{A=""}o.l=A+" ["+o.Z()+"]",Up(o)}}finally{vo(o)}}}}function vo(o,u){if(o.g){Bp(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||He(o,"ready");try{h.onreadystatechange=f}catch{}}}function Bp(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function zt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),TE(u)}};function $p(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function WE(o){let u={};o=(o.g&&2<=zt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(z(o[f]))continue;var h=I(o[f]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=u[b]||[];u[b]=A,A.push(h)}E(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function qp(o){this.Aa=0,this.i=[],this.j=new Di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,o),this.cb=Li("retryDelaySeedMs",1e4,o),this.Wa=Li("forwardChannelMaxRetries",2,o),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Tp(o&&o.concurrentRequestLimit),this.Da=new qE,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qp.prototype,n.la=8,n.G=1,n.connect=function(o,u,h,f){Ge(0),this.W=o,this.H=u||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Xp(this,null,this.W),Eo(this)};function Iu(o){if(zp(o),o.G==3){var u=o.U++,h=qt(o.I);if(pe(h,"SID",o.K),pe(h,"RID",u),pe(h,"TYPE","terminate"),Ui(o,h),u=new fn(o,o.j,u),u.L=2,u.v=_o(qt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=Zp(u.j,null),u.g.ea(u.v)),u.F=Date.now(),po(u)}Jp(o)}function wo(o){o.g&&(Tu(o),o.g.cancel(),o.g=null)}function zp(o){wo(o),o.u&&(c.clearTimeout(o.u),o.u=null),Io(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Eo(o){if(!Cp(o.h)&&!o.s){o.s=!0;var u=o.Ga;Ii||np(),bi||(Ii(),bi=!0),tu.add(u,o),o.B=0}}function KE(o,u){return Ap(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Pi(v(o.Ga,o,u),Yp(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let b=new fn(this,this.j,o),A=this.o;if(this.S&&(A?(A=m(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Gp(this,b,u),h=qt(this.I),pe(h,"RID",o),pe(h,"CVER",22),this.D&&pe(h,"X-HTTP-Session-Id",this.D),Ui(this,h),A&&(this.O?u="headers="+encodeURIComponent(String(Fp(A)))+"&"+u:this.m&&Eu(h,this.m,A)),wu(this.h,b),this.Ua&&pe(h,"TYPE","init"),this.P?(pe(h,"$req",u),pe(h,"SID","null"),b.T=!0,gu(b,h,null)):gu(b,h,u),this.G=2}}else this.G==3&&(o?Hp(this,o):this.i.length==0||Cp(this.h)||Hp(this))};function Hp(o,u){var h;u?h=u.l:h=o.U++;let f=qt(o.I);pe(f,"SID",o.K),pe(f,"RID",h),pe(f,"AID",o.T),Ui(o,f),o.m&&o.o&&Eu(f,o.m,o.o),h=new fn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Gp(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),wu(o.h,h),gu(h,f,u)}function Ui(o,u){o.H&&ce(o.H,function(h,f){pe(u,f,h)}),o.l&&Pp({},function(h,f){pe(u,f,h)})}function Gp(o,u,h){h=Math.min(o.i.length,h);var f=o.l?v(o.l.Na,o.l,o):null;e:{var b=o.i;let A=-1;for(;;){let N=["count="+h];A==-1?0<h?(A=b[0].g,N.push("ofs="+A)):A=0:N.push("ofs="+A);let he=!0;for(let Me=0;Me<h;Me++){let te=b[Me].g,Le=b[Me].map;if(te-=A,0>te)A=Math.max(0,b[Me].g-100),he=!1;else try{zE(Le,N,"req"+te+"_")}catch{f&&f(Le)}}if(he){f=N.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,f}function Wp(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Ii||np(),bi||(Ii(),bi=!0),tu.add(u,o),o.v=0}}function bu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Pi(v(o.Fa,o),Yp(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Kp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Pi(v(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),wo(this),Kp(this))};function Tu(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Kp(o){o.g=new fn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=qt(o.qa);pe(u,"RID","rpc"),pe(u,"SID",o.K),pe(u,"AID",o.T),pe(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&pe(u,"TO",o.ja),pe(u,"TYPE","xmlhttp"),Ui(o,u),o.m&&o.o&&Eu(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=_o(qt(u)),h.m=null,h.P=!0,Ep(h,o)}n.Za=function(){this.C!=null&&(this.C=null,wo(this),bu(this),Ge(19))};function Io(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Qp(o,u){var h=null;if(o.g==u){Io(o),Tu(o),o.g=null;var f=2}else if(vu(o.h,u))h=u.D,Sp(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var b=o.B;f=lo(),He(f,new _p(f,h)),Eo(o)}else Wp(o);else if(b=u.s,b==3||b==0&&0<u.X||!(f==1&&KE(o,u)||f==2&&bu(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),b){case 1:Ln(o,5);break;case 4:Ln(o,10);break;case 3:Ln(o,6);break;default:Ln(o,2)}}}function Yp(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Ln(o,u){if(o.j.info("Error code "+u),u==2){var h=v(o.fb,o),f=o.Xa;let b=!f;f=new Fn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mo(f,"https"),_o(f),b?BE(f.toString(),h):$E(f.toString(),h)}else Ge(2);o.G=0,o.l&&o.l.sa(u),Jp(o),zp(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Jp(o){if(o.G=0,o.ka=[],o.l){let u=Rp(o.h);(u.length!=0||o.i.length!=0)&&(k(o.ka,u),k(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Xp(o,u,h){var f=h instanceof Fn?qt(h):new Fn(h);if(f.g!="")u&&(f.g=u+"."+f.g),go(f,f.s);else{var b=c.location;f=b.protocol,u=u?u+"."+b.hostname:b.hostname,b=+b.port;var A=new Fn(null);f&&mo(A,f),u&&(A.g=u),b&&go(A,b),h&&(A.l=h),f=A}return h=o.D,u=o.ya,h&&u&&pe(f,h,u),pe(f,"VER",o.la),Ui(o,f),f}function Zp(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ve(new xi({eb:h})):new ve(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function em(){}n=em.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function bo(){}bo.prototype.g=function(o,u){return new nt(o,u)};function nt(o,u){Fe.call(this),this.g=new qp(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!z(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!z(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new br(this)}D(nt,Fe),nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nt.prototype.close=function(){Iu(this.g)},nt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=lu(o),o=h);u.i.push(new kE(u.Ya++,o)),u.G==3&&Eo(u)},nt.prototype.N=function(){this.g.l=null,delete this.j,Iu(this.g),delete this.g,nt.aa.N.call(this)};function tm(o){du.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(tm,du);function nm(){fu.call(this),this.status=1}D(nm,fu);function br(o){this.g=o}D(br,em),br.prototype.ua=function(){He(this.g,"a")},br.prototype.ta=function(o){He(this.g,new tm(o))},br.prototype.sa=function(o){He(this.g,new nm)},br.prototype.ra=function(){He(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,nt.prototype.send=nt.prototype.o,nt.prototype.open=nt.prototype.m,nt.prototype.close=nt.prototype.close,xh=rn.createWebChannelTransport=function(){return new bo},Mh=rn.getStatEventTarget=function(){return lo()},Nh=rn.Event=xn,nc=rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Us=rn.ErrorCode=ho,yp.COMPLETE="complete",Oh=rn.EventType=yp,fp.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,Jr=rn.WebChannel=fp,lS=rn.FetchXmlHttpFactory=xi,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,kh=rn.XhrIo=ve}).apply(typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{});var Ry="@firebase/firestore",Py="4.8.0";var Oe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");var _i="11.10.0";var ur=new xt("@firebase/firestore");function Xr(){return ur.logLevel}function L(n,...e){if(ur.logLevel<=X.DEBUG){let t=e.map(Rf);ur.debug(`Firestore (${_i}): ${n}`,...t)}}function on(n,...e){if(ur.logLevel<=X.ERROR){let t=e.map(Rf);ur.error(`Firestore (${_i}): ${n}`,...t)}}function Dn(n,...e){if(ur.logLevel<=X.WARN){let t=e.map(Rf);ur.warn(`Firestore (${_i}): ${n}`,...t)}}function Rf(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Iv(n,r,t)}function Iv(n,e,t){let r=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw on(r),new Error(r)}function ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Iv(e,i,r)}function Q(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends gt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var uc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Oe.UNAUTHENTICATED))}shutdown(){}},Bh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},$h=class{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ae(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(()=>C(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new uc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Oe(e)}},qh=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},zh=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qh(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Hh=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ae(this.o===void 0,3512);let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.m;return this.m=s.token,L("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hS(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function bv(){return new TextEncoder}var Gs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=hS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function J(n,e){return n<e?-1:n>e?1:0}function Gh(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return J(r,i);{let s=bv(),a=dS(s.encode(Dy(n,t)),s.encode(Dy(e,t)));return a!==0?a:J(r,i)}}t+=r>65535?2:1}return J(n.length,e.length)}function Dy(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dS(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return J(n[t],e[t]);return J(n.length,e.length)}function oi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ky="__name__",hc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return J(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Gh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nn.fromString(e.substring(4,e.length-2))}},ye=class n extends hc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=class n extends hc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ky}static keyField(){return new n([ky])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};function Tv(n,e,t){if(!t)throw new F(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pS(n,e,t,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Oy(n){if(!B.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ny(n){if(B.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Bc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Bs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bc(n);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Re(n,e){let t={typeString:n};return e&&(t.value=e),t}function io(n,e){if(!Cv(n))throw new F(R.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new F(R.INVALID_ARGUMENT,t);return!0}var My=-62135596800,xy=1e6,Pe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*xy);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<My)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xy}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(io(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-My;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Re("string",Pe._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};var Y=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Pe(0,0))}static max(){return new n(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ws=-1,Wh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Wh.UNKNOWN_ID=-1;function mS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Pe(t+1,0):new Pe(t,r));return new lr(i,B.empty(),e)}function gS(n){return new lr(n.readTime,n.key,Ws)}var lr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),B.empty(),Ws)}static max(){return new n(Y.max(),B.empty(),Ws)}};function _S(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:J(n.largestBatchId,e.largestBatchId))}var yS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function yi(n){return C(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==yS)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function vS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vi(n){return n.name==="IndexedDbTransactionError"}var Pf=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Df=-1;function $c(n){return n==null}function Ks(n){return n===0&&1/n==-1/0}function wS(n){return typeof n=="number"&&Number.isInteger(n)&&!Ks(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Av="";function ES(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vy(e)),e=IS(n.get(t),e);return Vy(e)}function IS(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Av:t+="";break;default:t+=s}}return t}function Vy(n){return n+Av+""}var bS="remoteDocuments",Sv="owner";var Rv="mutationQueues";var Pv="mutations";var Dv="documentMutations",TS="remoteDocumentsV14";var kv="remoteDocumentGlobal";var Ov="targets";var Nv="targetDocuments";var Mv="targetGlobal",xv="collectionParents";var Vv="clientMetadata";var Fv="bundles";var Lv="namedQueries";var CS="indexConfiguration";var AS="indexState";var SS="indexEntries";var Uv="documentOverlays";var RS="globals";var PS=[Rv,Pv,Dv,bS,Ov,Sv,Mv,Nv,Vv,kv,xv,Fv,Lv],qN=[...PS,Uv],DS=[Rv,Pv,Dv,TS,Ov,Sv,Mv,Nv,Vv,kv,xv,Fv,Lv,Uv],kS=DS,OS=[...kS,CS,AS,SS];var zN=[...OS,RS];function Fy(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jv(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ie=class n{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ni(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ni(this.root,e,this.comparator,!1)}getReverseIterator(){return new ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ni(this.root,e,this.comparator,!0)}},ni=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class n{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dc(this.data.getIterator())}getIteratorFrom(e){return new dc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class n{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ne(ut.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var fc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fc("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var NS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function an(n){if(ae(!!n,39018),typeof n=="string"){let e=0,t=NS.exec(n);if(ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(n.seconds),nanos:_e(n.nanos)}}function _e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cn(n){return typeof n=="string"?qe.fromBase64String(n):qe.fromUint8Array(n)}var Bv="server_timestamp",$v="__type__",qv="__previous_value__",zv="__local_write_time__";function kf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$v])===null||t===void 0?void 0:t.stringValue)===Bv}function qc(n){let e=n.mapValue.fields[qv];return kf(e)?qc(e):e}function Qs(n){let e=an(n.mapValue.fields[zv].timestampValue);return new Pe(e.seconds,e.nanos)}var Qh=class{constructor(e,t,r,i,s,a,c,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=p}},pc="(default)",mc=class n{constructor(e,t){this.projectId=e,this.database=t||pc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Of="__type__",Hv="__max__",rc={mapValue:{fields:{__type__:{stringValue:Hv}}}},Nf="__vector__",ai="value";function kn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kf(n)?4:Wv(n)?9007199254740991:Gv(n)?10:11:q(28295,{value:n})}function Bt(n,e){if(n===e)return!0;let t=kn(n);if(t!==kn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qs(n).isEqual(Qs(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=an(i.timestampValue),c=an(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return cn(i.bytesValue).isEqual(cn(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return _e(i.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return _e(i.integerValue)===_e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=_e(i.doubleValue),c=_e(s.doubleValue);return a===c?Ks(a)===Ks(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return oi(n.arrayValue.values||[],e.arrayValue.values||[],Bt);case 10:case 11:return(function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Fy(a)!==Fy(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Bt(a[l],c[l])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function Ys(n,e){return(n.values||[]).find(t=>Bt(t,e))!==void 0}function ci(n,e){if(n===e)return 0;let t=kn(n),r=kn(e);if(t!==r)return J(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,e.booleanValue);case 2:return(function(s,a){let c=_e(s.integerValue||s.doubleValue),l=_e(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return Ly(n.timestampValue,e.timestampValue);case 4:return Ly(Qs(n),Qs(e));case 5:return Gh(n.stringValue,e.stringValue);case 6:return(function(s,a){let c=cn(s),l=cn(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let p=J(c[d],l[d]);if(p!==0)return p}return J(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){let c=J(_e(s.latitude),_e(a.latitude));return c!==0?c:J(_e(s.longitude),_e(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Uy(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,l,d,p;let g=s.fields||{},v=a.fields||{},S=(c=g[ai])===null||c===void 0?void 0:c.arrayValue,D=(l=v[ai])===null||l===void 0?void 0:l.arrayValue,V=J(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((p=D?.values)===null||p===void 0?void 0:p.length)||0);return V!==0?V:Uy(S,D)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===rc.mapValue&&a===rc.mapValue)return 0;if(s===rc.mapValue)return 1;if(a===rc.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let g=0;g<l.length&&g<p.length;++g){let v=Gh(l[g],p[g]);if(v!==0)return v;let S=ci(c[l[g]],d[p[g]]);if(S!==0)return S}return J(l.length,p.length)})(n.mapValue,e.mapValue);default:throw q(23264,{le:t})}}function Ly(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return J(n,e);let t=an(n),r=an(e),i=J(t.seconds,r.seconds);return i!==0?i:J(t.nanos,r.nanos)}function Uy(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ci(t[i],r[i]);if(s)return s}return J(t.length,r.length)}function ui(n){return Yh(n)}function Yh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=an(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Yh(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${Yh(t.fields[a])}`;return i+"}"})(n.mapValue):q(61005,{value:n})}function oc(n){switch(kn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qc(n);return e?16+oc(e):16;case 5:return 2*n.stringValue.length;case 6:return cn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+oc(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return yr(r.fields,(s,a)=>{i+=s.length+oc(a)}),i})(n.mapValue);default:throw q(13486,{value:n})}}function jy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jh(n){return!!n&&"integerValue"in n}function Mf(n){return!!n&&"arrayValue"in n}function By(n){return!!n&&"nullValue"in n}function $y(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ac(n){return!!n&&"mapValue"in n}function Gv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Of])===null||t===void 0?void 0:t.stringValue)===Nf}function $s(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return yr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$s(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$s(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Wv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Hv}var GN={mapValue:{fields:{[Of]:{stringValue:Nf},[ai]:{arrayValue:{}}}}};var At=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$s(t)}setAll(e){let t=ut.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=$s(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yr(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n($s(this.value))}};function Kv(n){let e=[];return yr(n.fields,(t,r)=>{let i=new ut([t]);if(ac(r)){let s=Kv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Ft(e)}var St=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),At.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),At.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var li=class{constructor(e,t){this.position=e,this.inclusive=t}};function qy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(a.referenceValue),t.key):r=ci(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bt(n.position[t],e.position[t]))return!1;return!0}var hr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function MS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gc=class{},Se=class n extends gc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Zh(e,t,r):t==="array-contains"?new nd(e,r):t==="in"?new rd(e,r):t==="not-in"?new id(e,r):t==="array-contains-any"?new sd(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ed(e,r):new td(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ci(t,this.value)):t!==null&&kn(this.value)===kn(t)&&this.matchesComparison(ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rt=class n extends gc{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Qv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Qv(n){return n.op==="and"}function Yv(n){return xS(n)&&Qv(n)}function xS(n){for(let e of n.filters)if(e instanceof Rt)return!1;return!0}function Xh(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+ui(n.value);if(Yv(n))return n.filters.map(e=>Xh(e)).join(",");{let e=n.filters.map(t=>Xh(t)).join(",");return`${n.op}(${e})`}}function Jv(n,e){return n instanceof Se?(function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&Bt(r.value,i.value)})(n,e):n instanceof Rt?(function(r,i){return i instanceof Rt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Jv(a,i.filters[c]),!0):!1})(n,e):void q(19439)}function Xv(n){return n instanceof Se?(function(t){return`${t.field.canonicalString()} ${t.op} ${ui(t.value)}`})(n):n instanceof Rt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xv).join(" ,")+"}"})(n):"Filter"}var Zh=class extends Se{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},ed=class extends Se{constructor(e,t){super(e,"in",t),this.keys=Zv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},td=class extends Se{constructor(e,t){super(e,"not-in",t),this.keys=Zv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Zv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var nd=class extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Mf(t)&&Ys(t.arrayValue,this.value)}},rd=class extends Se{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ys(this.value.arrayValue,t)}},id=class extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ys(this.value.arrayValue,t)}},sd=class extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ys(this.value.arrayValue,r))}};var od=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.Pe=null}};function Hy(n,e=null,t=[],r=[],i=null,s=null,a=null){return new od(n,e,t,r,i,s,a)}function xf(n){let e=Q(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),$c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ui(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ui(r)).join(",")),e.Pe=t}return e.Pe}function Vf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zy(n.startAt,e.startAt)&&zy(n.endAt,e.endAt)}function ad(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var On=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function VS(n,e,t,r,i,s,a,c){return new On(n,e,t,r,i,s,a,c)}function Ff(n){return new On(n)}function Gy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ew(n){return n.collectionGroup!==null}function qs(n){let e=Q(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ne(ut.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new hr(s,r))}),t.has(ut.keyField().canonicalString())||e.Te.push(new hr(ut.keyField(),r))}return e.Te}function Ut(n){let e=Q(n);return e.Ie||(e.Ie=FS(e,qs(n))),e.Ie}function FS(n,e){if(n.limitType==="F")return Hy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new hr(i.field,s)});let t=n.endAt?new li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new li(n.startAt.position,n.startAt.inclusive):null;return Hy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cd(n,e){let t=n.filters.concat([e]);return new On(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ud(n,e,t){return new On(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zc(n,e){return Vf(Ut(n),Ut(e))&&n.limitType===e.limitType}function tw(n){return`${xf(Ut(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Xv(i)).join(", ")}]`),$c(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ui(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ui(i)).join(",")),`Target(${r})`})(Ut(n))}; limitType=${n.limitType})`}function Hc(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of qs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,l){let d=qy(a,c,l);return a.inclusive?d<=0:d<0})(r.startAt,qs(r),i)||r.endAt&&!(function(a,c,l){let d=qy(a,c,l);return a.inclusive?d>=0:d>0})(r.endAt,qs(r),i))})(n,e)}function LS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nw(n){return(e,t)=>{let r=!1;for(let i of qs(n)){let s=US(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function US(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?ci(l,d):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}var un=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}};var jS=new Ie(B.comparator);function ln(){return jS}var rw=new Ie(B.comparator);function js(...n){let e=rw;for(let t of n)e=e.insert(t.key,t);return e}function iw(n){let e=rw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ir(){return zs()}function sw(){return zs()}function zs(){return new un(n=>n.toString(),(n,e)=>n.isEqual(e))}var BS=new Ie(B.comparator),$S=new Ne(B.comparator);function Z(...n){let e=$S;for(let t of n)e=e.add(t);return e}var qS=new Ne(J);function zS(){return qS}function Lf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ks(e)?"-0":e}}function ow(n){return{integerValue:""+n}}function HS(n,e){return wS(e)?ow(e):Lf(n,e)}var hi=class{constructor(){this._=void 0}};function GS(n,e,t){return n instanceof dr?(function(i,s){let a={fields:{[$v]:{stringValue:Bv},[zv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kf(s)&&(s=qc(s)),s&&(a.fields[qv]=s),{mapValue:a}})(t,e):n instanceof fr?cw(n,e):n instanceof pr?uw(n,e):(function(i,s){let a=aw(i,s),c=Wy(a)+Wy(i.Ee);return Jh(a)&&Jh(i.Ee)?ow(c):Lf(i.serializer,c)})(n,e)}function WS(n,e,t){return n instanceof fr?cw(n,e):n instanceof pr?uw(n,e):t}function aw(n,e){return n instanceof di?(function(r){return Jh(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var dr=class extends hi{},fr=class extends hi{constructor(e){super(),this.elements=e}};function cw(n,e){let t=lw(e);for(let r of n.elements)t.some(i=>Bt(i,r))||t.push(r);return{arrayValue:{values:t}}}var pr=class extends hi{constructor(e){super(),this.elements=e}};function uw(n,e){let t=lw(e);for(let r of n.elements)t=t.filter(i=>!Bt(i,r));return{arrayValue:{values:t}}}var di=class extends hi{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Wy(n){return _e(n.integerValue||n.doubleValue)}function lw(n){return Mf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ld=class{constructor(e,t){this.field=e,this.transform=t}};function KS(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fr&&i instanceof fr||r instanceof pr&&i instanceof pr?oi(r.elements,i.elements,Bt):r instanceof di&&i instanceof di?Bt(r.Ee,i.Ee):r instanceof dr&&i instanceof dr})(n.transform,e.transform)}var hd=class{constructor(e,t){this.version=e,this.transformResults=t}},ar=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var fi=class{};function hw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _c(n.key,ar.none()):new mr(n.key,n.data,ar.none());{let t=n.data,r=At.empty(),i=new Ne(ut.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new hn(n.key,r,new Ft(i.toArray()),ar.none())}}function QS(n,e,t){n instanceof mr?(function(i,s,a){let c=i.value.clone(),l=Qy(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof hn?(function(i,s,a){if(!cc(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=Qy(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(dw(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Hs(n,e,t,r){return n instanceof mr?(function(s,a,c,l){if(!cc(s.precondition,a))return c;let d=s.value.clone(),p=Yy(s.fieldTransforms,l,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof hn?(function(s,a,c,l){if(!cc(s.precondition,a))return c;let d=Yy(s.fieldTransforms,l,a),p=a.data;return p.setAll(dw(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,a,c){return cc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function YS(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=aw(r.transform,i||null);s!=null&&(t===null&&(t=At.empty()),t.set(r.field,s))}return t||null}function Ky(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oi(r,i,(s,a)=>KS(s,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var mr=class extends fi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hn=class extends fi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function dw(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Qy(n,e,t){let r=new Map;ae(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,WS(a,c,t[i]))}return r}function Yy(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,GS(s,a,e))}return r}var _c=class extends fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dd=class extends fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fd=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&QS(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Hs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=sw();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=hw(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(t,r)=>Ky(t,r))&&oi(this.baseMutations,e.baseMutations,(t,r)=>Ky(t,r))}},pd=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ae(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return BS})(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var md=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gd=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ce,ee;function JS(n){switch(n){case R.OK:return q(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function fw(n){if(n===void 0)return on("GRPC error has no .code"),R.UNKNOWN;switch(n){case Ce.OK:return R.OK;case Ce.CANCELLED:return R.CANCELLED;case Ce.UNKNOWN:return R.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return R.INTERNAL;case Ce.UNAVAILABLE:return R.UNAVAILABLE;case Ce.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ce.NOT_FOUND:return R.NOT_FOUND;case Ce.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ce.ABORTED:return R.ABORTED;case Ce.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ce.DATA_LOSS:return R.DATA_LOSS;default:return q(39323,{code:n})}}(ee=Ce||(Ce={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";var Jy=null;var XS=new nn([4294967295,4294967295],0);function Xy(n){let e=bv().encode(n),t=new Dh;return t.update(e),new Uint8Array(t.digest())}function Zy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nn([t,r],0),new nn([i,s],0)]}var _d=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sr(`Invalid padding: ${t}`);if(r<0)throw new sr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sr(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=nn.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(nn.fromNumber(r)));return i.compare(XS)===1&&(i=new nn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Xy(e),[r,i]=Zy(t);for(let s=0;s<this.hashCount;s++){let a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.fe===0)return;let t=Xy(e),[r,i]=Zy(t);for(let s=0;s<this.hashCount;s++){let a=this.pe(r,i,s);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},sr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Js.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ie(J),ln(),Z())}},Js=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Z(),Z(),Z())}};var ri=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},vc=class{constructor(e,t){this.targetId=e,this.De=t}},wc=class{constructor(e,t,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ec=class{constructor(){this.ve=0,this.Ce=ev(),this.Fe=qe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Z(),t=Z(),r=Z();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:s})}}),new Js(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=ev()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},yd=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ln(),this.je=ic(),this.Je=ic(),this.He=new Ie(J)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(ad(s))if(r===0){let a=new B(s.path);this.Xe(t,a,St.newNoDocument(a,Y.min()))}else ae(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let c=this._t(e),l=c?this.ut(c,e,a):1;if(l!==0){this.rt(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}Jy?.ct((function(p,g,v,S,D){var V,k,G,z,H,le;let ze={localCacheCount:p,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},ce=g.unchangedNames;return ce&&(ze.bloomFilter={applied:D===0,hashCount:(V=ce?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(z=(G=(k=ce?.bits)===null||k===void 0?void 0:k.bitmap)===null||G===void 0?void 0:G.length)!==null&&z!==void 0?z:0,padding:(le=(H=ce?.bits)===null||H===void 0?void 0:H.padding)!==null&&le!==void 0?le:0,mightContain:E=>{var m;return(m=S?.mightContain(E))!==null&&m!==void 0&&m}}),ze})(a,e.De,this.We.lt(),c,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=cn(r).toUint8Array()}catch(l){if(l instanceof fc)return Dn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new _d(a,i,s)}catch(l){return Dn(l instanceof sr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.We.lt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,a)=>{let c=this.st(a);if(c){if(s.current&&ad(c.target)){let l=new B(c.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,St.newNoDocument(l,e))}s.Ne&&(t.set(a,s.Le()),s.ke())}});let r=Z();this.Je.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let d=this.st(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));let i=new yc(e,t,this.He,this.ze,r);return this.ze=ln(),this.je=ic(),this.Je=ic(),this.He=new Ie(J),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ec,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ne(J),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ne(J),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ec),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function ic(){return new Ie(B.comparator)}function ev(){return new Ie(B.comparator)}var ZS={asc:"ASCENDING",desc:"DESCENDING"},eR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tR={and:"AND",or:"OR"},vd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wd(n,e){return n.useProto3Json||$c(e)?e:{value:e}}function Ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nR(n,e){return Ic(n,e.toTimestamp())}function jt(n){return ae(!!n,49232),Y.fromTimestamp((function(t){let r=an(t);return new Pe(r.seconds,r.nanos)})(n))}function Uf(n,e){return Ed(n,e).canonicalString()}function Ed(n,e){let t=(function(i){return new ye(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mw(n){let e=ye.fromString(n);return ae(ww(e),10190,{key:e.toString()}),e}function Id(n,e){return Uf(n.databaseId,e.path)}function Vh(n,e){let t=mw(e);if(t.get(1)!==n.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(_w(t))}function gw(n,e){return Uf(n.databaseId,e)}function rR(n){let e=mw(n);return e.length===4?ye.emptyPath():_w(e)}function bd(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _w(n){return ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tv(n,e,t){return{name:Id(n,e),fields:t.value.mapValue.fields}}function iR(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:q(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,p){return d.useProto3Json?(ae(p===void 0||typeof p=="string",58123),qe.fromBase64String(p||"")):(ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),qe.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(d){let p=d.code===void 0?R.UNKNOWN:fw(d.code);return new F(p,d.message||"")})(a);t=new wc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vh(n,r.document.name),s=jt(r.document.updateTime),a=r.document.createTime?jt(r.document.createTime):Y.min(),c=new At({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new ri(d,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vh(n,r.document),s=r.readTime?jt(r.readTime):Y.min(),a=St.newNoDocument(i,s),c=r.removedTargetIds||[];t=new ri([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vh(n,r.document),s=r.removedTargetIds||[];t=new ri([],s,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new gd(i,s),c=r.targetId;t=new vc(c,a)}}return t}function sR(n,e){let t;if(e instanceof mr)t={update:tv(n,e.key,e.value)};else if(e instanceof _c)t={delete:Id(n,e.key)};else if(e instanceof hn)t={update:tv(n,e.key,e.data),updateMask:pR(e.fieldMask)};else{if(!(e instanceof dd))return q(16599,{Rt:e.type});t={verify:Id(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,a){let c=a.transform;if(c instanceof dr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof pr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof di)return{fieldPath:a.field.canonicalString(),increment:c.Ee};throw q(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:nR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q(27497)})(n,e.precondition)),t}function oR(n,e){return n&&n.length>0?(ae(e!==void 0,14353),n.map(t=>(function(i,s){let a=i.updateTime?jt(i.updateTime):jt(s);return a.isEqual(Y.min())&&(a=jt(s)),new hd(a,i.transformResults||[])})(t,e))):[]}function aR(n,e){return{documents:[gw(n,e.path)]}}function cR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gw(n,i);let s=(function(d){if(d.length!==0)return vw(Rt.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let a=(function(d){if(d.length!==0)return d.map(p=>(function(v){return{field:ei(v.field),direction:hR(v.dir)}})(p))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=wd(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function uR(n){let e=rR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ae(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(g){let v=yw(g);return v instanceof Rt&&Yv(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map(v=>(function(D){return new hr(ti(D.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(v))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let v;return v=typeof g=="object"?g.value:g,$c(v)?null:v})(t.limit));let l=null;t.startAt&&(l=(function(g){let v=!!g.before,S=g.values||[];return new li(S,v)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let v=!g.before,S=g.values||[];return new li(S,v)})(t.endAt)),VS(e,i,a,s,c,"F",l,d)}function lR(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ti(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ti(t.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ti(t.unaryFilter.field);return Se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ti(t.unaryFilter.field);return Se.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Se.create(ti(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Rt.create(t.compositeFilter.filters.map(r=>yw(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function hR(n){return ZS[n]}function dR(n){return eR[n]}function fR(n){return tR[n]}function ei(n){return{fieldPath:n.canonicalString()}}function ti(n){return ut.fromServerFormat(n.fieldPath)}function vw(n){return n instanceof Se?(function(t){if(t.op==="=="){if($y(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NAN"}};if(By(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($y(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NOT_NAN"}};if(By(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(t.field),op:dR(t.op),value:t.value}}})(n):n instanceof Rt?(function(t){let r=t.getFilters().map(i=>vw(i));return r.length===1?r[0]:{compositeFilter:{op:fR(t.op),filters:r}}})(n):q(54877,{filter:n})}function pR(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ww(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xs=class n{constructor(e,t,r,i,s=Y.min(),a=Y.min(),c=qe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Td=class{constructor(e){this.gt=e}};function mR(n){let e=uR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ud(e,e.limit,"L"):e}var bc=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Ks(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=an(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(cn(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Wv(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Gv(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let a=ai,c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(_e(c)),this.xt(a,t),this.Dt(s[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),B.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};bc.Ut=new bc;var Cd=class{constructor(){this.Dn=new Ad}addToCollectionParentIndex(e,t){return this.Dn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(lr.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Ad=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ne(ye.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(ye.comparator)).toArray()}};var WN=new Uint8Array(0);var nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=41943040,_t=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(Ew,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);var Zs=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var rv="LruGarbageCollector",gR=1048576;function iv([n,e],[t,r]){let i=J(n,t);return i===0?J(e,r):i}var Sd=class{constructor(e){this.Tr=e,this.buffer=new Ne(iv),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();iv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Rd=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(rv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){vi(t)?L(rv,"Ignoring IndexedDB error during garbage collection: ",t):yield yi(t)}yield this.Rr(3e5)}))}},Pd=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(Pf.ue);let r=new Sd(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(nv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nv):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,a,c,l,d,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Xr()<=X.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(d-l)+`ms
Total Duration: ${d-p}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function _R(n,e){return new Pd(n,e)}var Dd=class{constructor(){this.changes=new un(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var kd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Od=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Hs(r.mutation,i,Ft.empty(),Pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){let i=ir();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=js();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=ln(),a=zs(),c=(function(){return zs()})();return t.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof hn)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Hs(p.mutation,d,p.mutation.getFieldMask(),Pe.now())):a.set(d.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var g;return c.set(d,new kd(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=zs(),i=new Ie((a,c)=>a-c),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let p=r.get(l)||Ft.empty();p=c.applyToLocalView(d,p),r.set(l,p);let g=(i.get(c.batchId)||Z()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,p=l.value,g=sw();p.forEach(v=>{if(!s.has(v)){let S=hw(t.get(v),r.get(v));S!==null&&g.set(v,S),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return P.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return B.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ew(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(ir()),c=Ws,l=s;return a.next(d=>P.forEach(d,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(p)?P.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{l=l.insert(p,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,Z())).next(p=>({batchId:c,changes:iw(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=js();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=js();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,l=>{let d=(function(g,v){return new On(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,St.newInvalidDocument(p)))});let c=js();return a.forEach((l,d)=>{let p=s.get(l);p!==void 0&&Hs(p.mutation,d,Ft.empty(),Pe.now()),Hc(t,d)&&(c=c.insert(l,d))}),c})}};var Nd=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return P.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:jt(i.createTime)}})(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:mR(i.bundledQuery),readTime:jt(i.readTime)}})(t)),P.resolve()}};var Md=class{constructor(){this.overlays=new Ie(B.comparator),this.kr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ir();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=ir(),s=t.length+1,a=new B(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ie((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=ir(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=ir(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return P.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new md(t,r));let s=this.kr.get(t);s===void 0&&(s=Z(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var xd=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var eo=class{constructor(){this.qr=new Ne(Ae.Qr),this.$r=new Ne(Ae.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ae(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ae(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new B(new ye([])),r=new Ae(t,e),i=new Ae(t,e+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new B(new ye([])),r=new Ae(t,e),i=new Ae(t,e+1),s=Z();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new Ae(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return B.comparator(e.key,t.key)||J(e.Hr,t.Hr)}static Ur(e,t){return J(e.Hr,t.Hr)||B.comparator(e.key,t.key)}};var Vd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ne(Ae.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new fd(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.Yr=this.Yr.add(new Ae(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,t){return P.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Df:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ae(t,0),i=new Ae(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{let c=this.Zr(a.Hr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ne(J);return t.forEach(i=>{let s=new Ae(i,0),a=new Ae(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],c=>{r=r.add(c.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;B.isDocumentKey(s)||(s=s.child(""));let a=new Ae(new B(s),0),c=new Ne(J);return this.Yr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Hr)),!0)},a),P.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ae(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(t.mutations,i=>{let s=new Ae(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ae(t,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Fd=class{constructor(e){this.ni=e,this.docs=(function(){return new Ie(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():St.newInvalidDocument(t))}getEntries(e,t){let r=ln();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ln(),a=t.path,c=new B(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||_S(gS(p),r)<=0||(i.has(p.key)||Hc(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){q(9500)}ri(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ld(this)}getSize(e){return P.resolve(this.size)}},Ld=class extends Dd{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Ud=class{constructor(e){this.persistence=e,this.ii=new un(t=>xf(t),Vf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.si=0,this.oi=new eo,this.targetCount=0,this._i=Zs.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),P.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.hr(t),P.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.oi.containsKey(t))}};var Tc=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Pf(0),this.ci=!1,this.ci=!0,this.li=new xd,this.referenceDelegate=e(this),this.hi=new Ud(this),this.indexManager=new Cd,this.remoteDocumentCache=(function(i){return new Fd(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Td(t),this.Ti=new Nd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Md,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Vd(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new jd(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},jd=class extends Kh{constructor(e){super(),this.currentSequenceNumber=e}},Bd=class n{constructor(e){this.persistence=e,this.Ai=new eo,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=B.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return P.or([()=>P.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Cc=class n{constructor(e,t){this.persistence=e,this.gi=new un(r=>ES(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=_R(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(c=>{c||(r++,s.removeEntry(a,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oc(e.data.value)),t}Sr(e,t,r){return P.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var $d=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Z(),i=Z();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var qd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zd=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return k_()?8:vS(ct())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new qd;return this.ws(e,t,a).next(c=>{if(s.result=c,this.Rs)return this.Ss(e,t,a,c.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Xr()<=X.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Xr()<=X.DEBUG&&L("QueryEngine","Query:",Zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xr()<=X.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):P.resolve())}ps(e,t){if(Gy(t))return P.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ud(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=Z(...s);return this.gs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.bs(t,c);return this.Ds(t,d,a,l.readTime)?this.ps(e,ud(t,null,"F")):this.vs(e,d,t,l)}))})))}ys(e,t,r,i){return Gy(t)||i.isEqual(Y.min())?P.resolve(null):this.gs.getDocuments(e,r).next(s=>{let a=this.bs(t,s);return this.Ds(t,a,r,i)?P.resolve(null):(Xr()<=X.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(t)),this.vs(e,a,t,mS(i,Ws)).next(c=>c))})}bs(e,t){let r=new Ne(nw(e));return t.forEach((i,s)=>{Hc(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Xr()<=X.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.gs.getDocumentsMatchingQuery(e,t,lr.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var jf="LocalStore",yR=3e8,Hd=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ie(J),this.Ms=new un(s=>xf(s),Vf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Od(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function vR(n,e,t,r){return new Hd(n,e,t,r)}function Iw(n,e){return C(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=Z();for(let d of i){a.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:c}))})})})}function wR(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,l,d,p){let g=d.batch,v=g.keys(),S=P.resolve();return v.forEach(D=>{S=S.next(()=>p.getEntry(l,D)).next(V=>{let k=d.docVersions.get(D);ae(k!==null,48541),V.version.compareTo(k)<0&&(g.applyToRemoteDocument(V,d),V.isValidDocument()&&(V.setReadTime(d.commitVersion),p.addEntry(V)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(l,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Z();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bw(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function ER(n,e){let t=Q(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((p,g)=>{let v=i.get(g);if(!v)return;c.push(t.hi.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.hi.addMatchingKeys(s,p.addedDocuments,g)));let S=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),i=i.insert(g,S),(function(V,k,G){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=yR?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(v,S,p)&&c.push(t.hi.updateTargetData(s,S))});let l=ln(),d=Z();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(IR(s,a,e.documentUpdates).next(p=>{l=p.Ls,d=p.ks})),!r.isEqual(Y.min())){let p=t.hi.getLastRemoteSnapshotVersion(s).next(g=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return P.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.Fs=i,s))}function IR(n,e,t){let r=Z(),i=Z();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=ln();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):L(jf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function bR(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Df),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TR(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new Xs(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Gd(n,e,t){return C(this,null,function*(){let r=Q(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!vi(a))throw a;L(jf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function sv(n,e,t){let r=Q(n),i=Y.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,d,p){let g=Q(l),v=g.Ms.get(p);return v!==void 0?P.resolve(g.Fs.get(v)):g.hi.getTargetData(d,p)})(r,a,Ut(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Y.min(),t?s:Z())).next(c=>(CR(r,LS(e),c),{documents:c,qs:s})))}function CR(n,e,t){let r=n.xs.get(e)||Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var Ac=class{constructor(){this.activeTargetIds=zS()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Wd=class{constructor(){this.Fo=new Ac,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ac,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Kd=class{xo(e){}shutdown(){}};var ov="ConnectivityMonitor",Sc=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(ov,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(ov,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sc=null;function Qd(){return sc===null?sc=(function(){return 268435456+Math.round(2147483648*Math.random())})():sc++,"0x"+sc.toString(16)}var Fh="RestConnection",AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Yd=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===pc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let a=Qd(),c=this.Go(e,t.toUriEncodedString());L(Fh,`Sending RPC '${e}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);let{host:d}=new URL(c),p=Kn(d);return this.jo(e,c,l,r,p).then(g=>(L(Fh,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Dn(Fh,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g})}Jo(e,t,r,i,s,a){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_i})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=AR[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Jd=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Be="WebChannelConnection",Xd=class extends Yd{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let a=Qd();return new Promise((c,l)=>{let d=new kh;d.setWithCredentials(!0),d.listenOnce(Oh.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Us.NO_ERROR:let g=d.getResponseJson();L(Be,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Us.TIMEOUT:L(Be,`RPC '${e}' ${a} timed out`),l(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case Us.HTTP_ERROR:let v=d.getStatus();if(L(Be,`RPC '${e}' ${a} failed with status:`,v,"response text:",d.getResponseText()),v>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let D=S?.error;if(D&&D.status&&D.message){let V=(function(G){let z=G.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(z)>=0?z:R.UNKNOWN})(D.status);l(new F(V,D.message))}else l(new F(R.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new F(R.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{L(Be,`RPC '${e}' ${a} completed.`)}});let p=JSON.stringify(i);L(Be,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",p,r,15)})}P_(e,t,r){let i=Qd(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xh(),c=Mh(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");L(Be,`Creating RPC '${e}' stream ${i}: ${p}`,l);let g=a.createWebChannel(p,l);this.T_(g);let v=!1,S=!1,D=new Jd({Ho:k=>{S?L(Be,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(v||(L(Be,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),L(Be,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Yo:()=>g.close()}),V=(k,G,z)=>{k.listen(G,H=>{try{z(H)}catch(le){setTimeout(()=>{throw le},0)}})};return V(g,Jr.EventType.OPEN,()=>{S||(L(Be,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),V(g,Jr.EventType.CLOSE,()=>{S||(S=!0,L(Be,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(g))}),V(g,Jr.EventType.ERROR,k=>{S||(S=!0,Dn(Be,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),D.__(new F(R.UNAVAILABLE,"The operation could not be completed")))}),V(g,Jr.EventType.MESSAGE,k=>{var G;if(!S){let z=k.data[0];ae(!!z,16349);let H=z,le=H?.error||((G=H[0])===null||G===void 0?void 0:G.error);if(le){L(Be,`RPC '${e}' stream ${i} received error:`,le);let ze=le.status,ce=(function(y){let w=Ce[y];if(w!==void 0)return fw(w)})(ze),E=le.message;ce===void 0&&(ce=R.INTERNAL,E="Unknown error status: "+ze+" with message "+le.message),S=!0,D.__(new F(ce,E)),g.close()}else L(Be,`RPC '${e}' stream ${i} received:`,z),D.a_(z)}}),V(c,Nh.STAT_EVENT,k=>{k.stat===nc.PROXY?L(Be,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===nc.NOPROXY&&L(Be,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Lh(){return typeof document<"u"?document:null}function Gc(n){return new vd(n,!0)}var Rc=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var av="PersistentStream",Pc=class{constructor(e,t,r,i,s,a,c,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Rc(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(on(t.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(av,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(L(av,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Zd=class extends Pc{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=iR(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Y.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?Y.min():a.readTime?jt(a.readTime):Y.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=bd(this.serializer),t.addTarget=(function(s,a){let c,l=a.target;if(c=ad(l)?{documents:aR(s,l)}:{query:cR(s,l).Vt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=pw(s,a.resumeToken);let d=wd(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Y.min())>0){c.readTime=Ic(s,a.snapshotVersion.toTimestamp());let d=wd(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=lR(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=bd(this.serializer),t.removeTarget=e,this.k_(t)}},ef=class extends Pc{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=oR(e.writeResults,e.commitTime),r=jt(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=bd(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>sR(this.serializer,r))};this.k_(t)}};var tf=class{},nf=class extends tf{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Ed(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Jo(e,Ed(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(R.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},rf=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(on(t),this._a=!1):L("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var gr="RemoteStore",sf=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(()=>C(this,null,function*(){vr(this)&&(L(gr,"Restarting streams for network reachability change."),yield(function(l){return C(this,null,function*(){let d=Q(l);d.Ia.add(4),yield so(d),d.Aa.set("Unknown"),d.Ia.delete(4),yield Wc(d)})})(this))}))}),this.Aa=new rf(r,i)}};function Wc(n){return C(this,null,function*(){if(vr(n))for(let e of n.da)yield e(!0)})}function so(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function Tw(n,e){let t=Q(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),zf(t)?qf(t):wi(t).x_()&&$f(t,e))}function Bf(n,e){let t=Q(n),r=wi(t);t.Ta.delete(e),r.x_()&&Cw(t,e),t.Ta.size===0&&(r.x_()?r.B_():vr(t)&&t.Aa.set("Unknown"))}function $f(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wi(n).H_(e)}function Cw(n,e){n.Ra.$e(e),wi(n).Y_(e)}function qf(n){n.Ra=new yd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),wi(n).start(),n.Aa.aa()}function zf(n){return vr(n)&&!wi(n).M_()&&n.Ta.size>0}function vr(n){return Q(n).Ia.size===0}function Aw(n){n.Ra=void 0}function SR(n){return C(this,null,function*(){n.Aa.set("Online")})}function RR(n){return C(this,null,function*(){n.Ta.forEach((e,t)=>{$f(n,e)})})}function PR(n,e){return C(this,null,function*(){Aw(n),zf(n)?(n.Aa.la(e),qf(n)):n.Aa.set("Unknown")})}function DR(n,e,t){return C(this,null,function*(){if(n.Aa.set("Online"),e instanceof wc&&e.state===2&&e.cause)try{yield(function(i,s){return C(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){L(gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Dc(n,r)}else if(e instanceof ri?n.Ra.Ye(e):e instanceof vc?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Y.min()))try{let r=yield bw(n.localStore);t.compareTo(r)>=0&&(yield(function(s,a){let c=s.Ra.Pt(a);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.Ta.get(d);p&&s.Ta.set(d,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,d)=>{let p=s.Ta.get(l);if(!p)return;s.Ta.set(l,p.withResumeToken(qe.EMPTY_BYTE_STRING,p.snapshotVersion)),Cw(s,l);let g=new Xs(p.target,l,d,p.sequenceNumber);$f(s,g)}),s.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){L(gr,"Failed to raise snapshot:",r),yield Dc(n,r)}})}function Dc(n,e,t){return C(this,null,function*(){if(!vi(e))throw e;n.Ia.add(1),yield so(n),n.Aa.set("Offline"),t||(t=()=>bw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){L(gr,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Wc(n)}))})}function Sw(n,e){return e().catch(t=>Dc(n,t,e))}function Kc(n){return C(this,null,function*(){let e=Q(n),t=Nn(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Df;for(;kR(e);)try{let i=yield bR(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,OR(e,i)}catch(i){yield Dc(e,i)}Rw(e)&&Pw(e)})}function kR(n){return vr(n)&&n.Pa.length<10}function OR(n,e){n.Pa.push(e);let t=Nn(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Rw(n){return vr(n)&&!Nn(n).M_()&&n.Pa.length>0}function Pw(n){Nn(n).start()}function NR(n){return C(this,null,function*(){Nn(n).na()})}function MR(n){return C(this,null,function*(){let e=Nn(n);for(let t of n.Pa)e.X_(t.mutations)})}function xR(n,e,t){return C(this,null,function*(){let r=n.Pa.shift(),i=pd.from(r,e,t);yield Sw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kc(n)})}function VR(n,e){return C(this,null,function*(){e&&Nn(n).Z_&&(yield(function(r,i){return C(this,null,function*(){if((function(a){return JS(a)&&a!==R.ABORTED})(i.code)){let s=r.Pa.shift();Nn(r).N_(),yield Sw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Kc(r)}})})(n,e)),Rw(n)&&Pw(n)})}function cv(n,e){return C(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),L(gr,"RemoteStore received new credentials");let r=vr(t);t.Ia.add(3),yield so(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Wc(t)})}function FR(n,e){return C(this,null,function*(){let t=Q(n);e?(t.Ia.delete(2),yield Wc(t)):e||(t.Ia.add(2),yield so(t),t.Aa.set("Unknown"))})}function wi(n){return n.Va||(n.Va=(function(t,r,i){let s=Q(t);return s.ia(),new Zd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:SR.bind(null,n),e_:RR.bind(null,n),n_:PR.bind(null,n),J_:DR.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.Va.N_(),zf(n)?qf(n):n.Aa.set("Unknown")):(yield n.Va.stop(),Aw(n))}))),n.Va}function Nn(n){return n.ma||(n.ma=(function(t,r,i){let s=Q(t);return s.ia(),new ef(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:NR.bind(null,n),n_:VR.bind(null,n),ea:MR.bind(null,n),ta:xR.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield Kc(n)):(yield n.ma.stop(),n.Pa.length>0&&(L(gr,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var of=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hf(n,e){if(on("AsyncQueue",`${e}: ${n}`),vi(n))return new F(R.UNAVAILABLE,`${e}: ${n}`);throw n}var kc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=js(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Oc=class{constructor(){this.fa=new Ie(B.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},pi=class n{constructor(e,t,r,i,s,a,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,kc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var af=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},cf=class{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Q(t),s=i.queries;i.queries=uv(),s.forEach((a,c)=>{for(let l of c.wa)l.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function uv(){return new un(n=>tw(n),zc)}function LR(n,e){return C(this,null,function*(){let t=Q(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new af,r=e.ba()?0:1);try{switch(r){case 0:s.ya=yield t.onListen(i,!0);break;case 1:s.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=Hf(a,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Gf(t)})}function UR(n,e){return C(this,null,function*(){let t=Q(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function jR(n,e){let t=Q(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.wa)c.Ca(i)&&(r=!0);a.ya=i}}r&&Gf(t)}function BR(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function Gf(n){n.Da.forEach(e=>{e.next()})}var uf,lv;(lv=uf||(uf={})).Fa="default",lv.Cache="cache";var lf=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uf.Cache}};var Nc=class{constructor(e){this.key=e}},Mc=class{constructor(e){this.key=e}},hf=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Z(),this.mutatedKeys=Z(),this.Xa=nw(e),this.eu=new kc(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Oc,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{let v=i.get(p),S=Hc(this.query,g)?g:null,D=!!v&&this.mutatedKeys.has(v.key),V=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),k=!1;v&&S?v.data.isEqual(S.data)?D!==V&&(r.track({type:3,doc:S}),k=!0):this.iu(v,S)||(r.track({type:2,doc:S}),k=!0,(l&&this.Xa(S,l)>0||d&&this.Xa(S,d)<0)&&(c=!0)):!v&&S?(r.track({type:0,doc:S}),k=!0):v&&!S&&(r.track({type:1,doc:v}),k=!0,(l||d)&&(c=!0)),k&&(S?(a=a.add(S),s=V?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{eu:a,ru:r,Ds:c,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((p,g)=>(function(S,D){let V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:k})}};return V(S)-V(D)})(p.type,g.type)||this.Xa(p.doc,g.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,d=l!==this.Ya;return this.Ya=l,a.length!==0||d?{snapshot:new pi(this.query,e.eu,s,a,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Oc,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Z(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Mc(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Nc(r))}),t}uu(e){this.Ha=e.qs,this.Za=Z();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return pi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Wf="SyncEngine",df=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ff=class{constructor(e){this.key=e,this.lu=!1}},pf=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new un(c=>tw(c),zc),this.Tu=new Map,this.Iu=new Set,this.du=new Ie(B.comparator),this.Eu=new Map,this.Au=new eo,this.Ru={},this.Vu=new Map,this.mu=Zs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function $R(n,e,t=!0){return C(this,null,function*(){let r=xw(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=yield Dw(r,e,t,!0),i})}function qR(n,e){return C(this,null,function*(){let t=xw(n);yield Dw(t,e,!0,!1)})}function Dw(n,e,t,r){return C(this,null,function*(){let i=yield TR(n.localStore,Ut(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield zR(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Tw(n.remoteStore,i),c})}function zR(n,e,t,r,i){return C(this,null,function*(){n.gu=(g,v,S)=>(function(V,k,G,z){return C(this,null,function*(){let H=k.view.nu(G);H.Ds&&(H=yield sv(V.localStore,k.query,!1).then(({documents:E})=>k.view.nu(E,H)));let le=z&&z.targetChanges.get(k.targetId),ze=z&&z.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(H,V.isPrimaryClient,le,ze);return dv(V,k.targetId,ce._u),ce.snapshot})})(n,g,v,S);let s=yield sv(n.localStore,e,!0),a=new hf(e,s.qs),c=a.nu(s.documents),l=Js.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,l);dv(n,t,d._u);let p=new df(e,t,a);return n.Pu.set(e,p),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot})}function HR(n,e,t){return C(this,null,function*(){let r=Q(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!zc(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Gd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bf(r.remoteStore,i.targetId),mf(r,i.targetId)}).catch(yi))):(mf(r,i.targetId),yield Gd(r.localStore,i.targetId,!0))})}function GR(n,e){return C(this,null,function*(){let t=Q(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bf(t.remoteStore,r.targetId))})}function WR(n,e,t){return C(this,null,function*(){let r=eP(n);try{let i=yield(function(a,c){let l=Q(a),d=Pe.now(),p=c.reduce((S,D)=>S.add(D.key),Z()),g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=ln(),V=Z();return l.Os.getEntries(S,p).next(k=>{D=k,D.forEach((G,z)=>{z.isValidDocument()||(V=V.add(G))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,D)).next(k=>{g=k;let G=[];for(let z of c){let H=YS(z,g.get(z.key).overlayedDocument);H!=null&&G.push(new hn(z.key,H,Kv(H.value.mapValue),ar.exists(!0)))}return l.mutationQueue.addMutationBatch(S,d,G,c)}).next(k=>{v=k;let G=k.applyToLocalDocumentSet(g,V);return l.documentOverlayCache.saveOverlays(S,k.batchId,G)})}).then(()=>({batchId:v.batchId,changes:iw(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,l){let d=a.Ru[a.currentUser.toKey()];d||(d=new Ie(J)),d=d.insert(c,l),a.Ru[a.currentUser.toKey()]=d})(r,i.batchId,t),yield oo(r,i.changes),yield Kc(r.remoteStore)}catch(i){let s=Hf(i,"Failed to persist write");t.reject(s)}})}function kw(n,e){return C(this,null,function*(){let t=Q(n);try{let r=yield ER(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Eu.get(s);a&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?ae(a.lu,14607):i.removedDocuments.size>0&&(ae(a.lu,42227),a.lu=!1))}),yield oo(t,r,e)}catch(r){yield yi(r)}})}function hv(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,a)=>{let c=a.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(a,c){let l=Q(a);l.onlineState=c;let d=!1;l.queries.forEach((p,g)=>{for(let v of g.wa)v.va(c)&&(d=!0)}),d&&Gf(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KR(n,e,t){return C(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let a=new Ie(B.comparator);a=a.insert(s,St.newNoDocument(s,Y.min()));let c=Z().add(s),l=new yc(Y.min(),new Map,new Ie(J),a,c);yield kw(r,l),r.du=r.du.remove(s),r.Eu.delete(e),Kf(r)}else yield Gd(r.localStore,e,!1).then(()=>mf(r,e,t)).catch(yi)})}function QR(n,e){return C(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield wR(t.localStore,e);Nw(t,r,null),Ow(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield oo(t,i)}catch(i){yield yi(i)}})}function YR(n,e,t){return C(this,null,function*(){let r=Q(n);try{let i=yield(function(a,c){let l=Q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(ae(g!==null,37113),p=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>l.localDocuments.getDocuments(d,p))})})(r.localStore,e);Nw(r,e,t),Ow(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield oo(r,i)}catch(i){yield yi(i)}})}function Ow(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Nw(n,e,t){let r=Q(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function mf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||Mw(n,r)})}function Mw(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Bf(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Kf(n))}function dv(n,e,t){for(let r of t)r instanceof Nc?(n.Au.addReference(r.key,e),JR(n,r)):r instanceof Mc?(L(Wf,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Mw(n,r.key)):q(19791,{yu:r})}function JR(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(L(Wf,"New document in limbo: "+t),n.Iu.add(r),Kf(n))}function Kf(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new B(ye.fromString(e)),r=n.mu.next();n.Eu.set(r,new ff(t)),n.du=n.du.insert(t,r),Tw(n.remoteStore,new Xs(Ut(Ff(t.path)),r,"TargetPurposeLimboResolution",Pf.ue))}}function oo(n,e,t){return C(this,null,function*(){let r=Q(n),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((c,l)=>{a.push(r.gu(l,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(d){i.push(d);let g=$d.Es(l.targetId,d);s.push(g)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(l,d){return C(this,null,function*(){let p=Q(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(d,v=>P.forEach(v.Is,S=>p.persistence.referenceDelegate.addReference(g,v.targetId,S)).next(()=>P.forEach(v.ds,S=>p.persistence.referenceDelegate.removeReference(g,v.targetId,S)))))}catch(g){if(!vi(g))throw g;L(jf,"Failed to update sequence numbers: "+g)}for(let g of d){let v=g.targetId;if(!g.fromCache){let S=p.Fs.get(v),D=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(D);p.Fs=p.Fs.insert(v,V)}}})})(r.localStore,s))})}function XR(n,e){return C(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){L(Wf,"User change. New user:",e.toKey());let r=yield Iw(t.localStore,e);t.currentUser=e,(function(s,a){s.Vu.forEach(c=>{c.forEach(l=>{l.reject(new F(R.CANCELLED,a))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield oo(t,r.Bs)}})}function ZR(n,e){let t=Q(n),r=t.Eu.get(e);if(r&&r.lu)return Z().add(r.key);{let i=Z(),s=t.Tu.get(e);if(!s)return i;for(let a of s){let c=t.Pu.get(a);i=i.unionWith(c.view.tu)}return i}}function xw(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.hu.J_=jR.bind(null,e.eventManager),e.hu.pu=BR.bind(null,e.eventManager),e}function eP(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YR.bind(null,e),e}var Vw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=Gc(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return vR(this.persistence,new zd,t.initialUser,this.serializer)}Du(t){return new Tc(Bd.Vi,this.serializer)}bu(t){return new Wd}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),gf=class extends Vw{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ae(this.persistence.referenceDelegate instanceof Cc,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Rd(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new Tc(r=>Cc.Vi(r,t),this.serializer)}};var tP=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XR.bind(null,this.syncEngine),yield FR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new cf})()}createDatastore(t){let r=Gc(t.databaseInfo.databaseId),i=(function(a){return new Xd(a)})(t.databaseInfo);return(function(a,c,l,d){return new nf(a,c,l,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,a,c,l){return new sf(i,s,a,c,l)})(this.localStore,this.datastore,t.asyncQueue,r=>hv(this.syncEngine,r,0),(function(){return Sc.C()?new Sc:new Kd})())}createSyncEngine(t,r){return(function(s,a,c,l,d,p,g){let v=new pf(s,a,c,l,d,p);return g&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield(function(s){return C(this,null,function*(){let a=Q(s);L(gr,"RemoteStore shutting down."),a.Ia.add(5),yield so(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var _f=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Mn="FirestoreClient",yf=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Oe.UNAUTHENTICATED,this.clientId=Gs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,a=>C(this,null,function*(){L(Mn,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(L(Mn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Hf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Uh(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L(Mn,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield Iw(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Dn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Dn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function fv(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nP(n);L(Mn,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cv(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cv(e.remoteStore,i)),n._onlineComponents=e})}function nP(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L(Mn,"Using user provided OfflineComponentProvider");try{yield Uh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Dn("Error using user provided cache. Falling back to memory cache: "+t),yield Uh(n,new Vw)}}else L(Mn,"Using default OfflineComponentProvider"),yield Uh(n,new gf(void 0));return n._offlineComponents})}function Fw(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L(Mn,"Using user provided OnlineComponentProvider"),yield fv(n,n._uninitializedComponentsProvider._online)):(L(Mn,"Using default OnlineComponentProvider"),yield fv(n,new tP))),n._onlineComponents})}function rP(n){return Fw(n).then(e=>e.syncEngine)}function pv(n){return C(this,null,function*(){let e=yield Fw(n),t=e.eventManager;return t.onListen=$R.bind(null,e.syncEngine),t.onUnlisten=HR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GR.bind(null,e.syncEngine),t})}function Lw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mv=new Map;var Uw="firestore.googleapis.com",gv=!0,xc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=gv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gR)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jh;switch(r.type){case"firstParty":return new zh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=mv.get(t);r&&(L("ComponentProvider","Removing Datastore"),mv.delete(t),r.terminate())})(this),Promise.resolve()}};function jw(n,e,t,r={}){var i;n=Bs(n,mi);let s=Kn(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(Hl(`https://${l}`),Gl("Firestore",!0)),a.host!==Uw&&a.host!==l&&Dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!Qn(d,c)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Oe.MOCK_USER;else{p=A_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Oe(v)}n._authCredentials=new Bh(new uc(p,g))}}var _r=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$e=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new An(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(io(t,n._jsonSchema))return new n(e,r||null,new B(ye.fromString(t.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Re("string",$e._jsonSchemaVersion),referencePath:Re("string")};var An=class n extends _r{constructor(e,t,r){super(e,t,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Bw(n,e,...t){if(n=tt(n),Tv("collection","path",e),n instanceof mi){let r=ye.fromString(e,...t);return Ny(r),new An(n,null,r)}{if(!(n instanceof $e||n instanceof An))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return Ny(r),new An(n.firestore,null,r)}}function $w(n,e,...t){if(n=tt(n),arguments.length===1&&(e=Gs.newId()),Tv("doc","path",e),n instanceof mi){let r=ye.fromString(e,...t);return Oy(r),new $e(n,null,new B(r))}{if(!(n instanceof $e||n instanceof An))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return Oy(r),new $e(n.firestore,n instanceof An?n.converter:null,new B(r))}}var _v="AsyncQueue",Vc=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Rc(this,"async_queue_retry"),this.oc=()=>{let r=Lh();r&&L(_v,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new sn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!vi(e))throw e;L(_v,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,on("INTERNAL UNHANDLED ERROR: ",yv(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=of.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:yv(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function yv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function vv(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var gi=class extends mi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vc,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vc(e),this._firestoreClient=void 0,yield e}})}};function qw(n,e){let t=typeof n=="object"?n:Kr(),r=typeof n=="string"?n:e||pc,i=Fa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=T_("firestore");s&&jw(i,...s)}return i}function zw(n){if(n._terminated)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iP(n),n._firestoreClient}function iP(n){var e,t,r;let i=n._freezeSettings(),s=(function(c,l,d,p){return new Qh(c,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Lw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new yf(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}})(n._componentsProvider))}var Sn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qe.fromBase64String(e))}catch(t){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(io(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:Re("string",Sn._jsonSchemaVersion),bytes:Re("string")};var to=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var no=class{constructor(e){this._methodName=e}};var Rn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(io(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:Re("string",Rn._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};var Pn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(io(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new F(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:Re("string",Pn._jsonSchemaVersion),vectorValues:Re("object")};var sP=/^__.*__$/,vf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hn(e,this.data,this.fieldMask,t,this.fieldTransforms):new mr(e,this.data,t,this.fieldTransforms)}};function Hw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:n})}}var wf=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Hw(this.Ec)&&sP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Ef=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gc(e)}Dc(e,t,r,i=!1){return new wf({Ec:e,methodName:t,bc:r,path:ut.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Gw(n){let e=n._freezeSettings(),t=Gc(n._databaseId);return new Ef(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oP(n,e,t,r,i,s={}){let a=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Qw("Data must be an object, but it was:",a,r);let c=Ww(r,a),l,d;if(s.merge)l=new Ft(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let g of s.mergeFields){let v=cP(e,g,t);if(!a.contains(v))throw new F(R.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);lP(p,v)||p.push(v)}l=new Ft(p),d=a.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,d=a.fieldTransforms;return new vf(new At(c),l,d)}var If=class n extends no{_toFieldTransform(e){return new ld(e.path,new dr)}isEqual(e){return e instanceof n}};function aP(n,e,t,r=!1){return Qf(t,n.Dc(r?4:3,e))}function Qf(n,e){if(Kw(n=tt(n)))return Qw("Unsupported field value:",e,n),Ww(n,e);if(n instanceof no)return(function(r,i){if(!Hw(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],a=0;for(let c of r){let l=Qf(c,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Pe.fromDate(r);return{timestampValue:Ic(i.serializer,s)}}if(r instanceof Pe){let s=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,s)}}if(r instanceof Rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sn)return{bytesValue:pw(i.serializer,r._byteString)};if(r instanceof $e){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Uf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pn)return(function(a,c){return{mapValue:{fields:{[Of]:{stringValue:Nf},[ai]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Lf(c.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Bc(r)}`)})(n,e)}function Ww(n,e){let t={};return jv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yr(n,(r,i)=>{let s=Qf(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Kw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof Rn||n instanceof Sn||n instanceof $e||n instanceof no||n instanceof Pn)}function Qw(n,e,t){if(!Kw(t)||!Cv(t)){let r=Bc(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function cP(n,e,t){if((e=tt(e))instanceof to)return e._internalPath;if(typeof e=="string")return Yw(n,e);throw Fc("Field path arguments must be of type string or ",n,!1,void 0,t)}var uP=new RegExp("[~\\*/\\[\\]]");function Yw(n,e,t){if(e.search(uP)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new to(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fc(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(R.INVALID_ARGUMENT,c+n+l)}function lP(n,e){return n.some(t=>t.isEqual(e))}var Lc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Yf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},bf=class extends Lc{data(){return super.data()}};function Yf(n,e){return typeof e=="string"?Yw(n,e):e instanceof to?e._internalPath:e._delegate._internalPath}function hP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ro=class{},Uc=class extends ro{};function Jw(n,e,...t){let r=[];e instanceof ro&&r.push(e),r=r.concat(t),(function(s){let a=s.filter(l=>l instanceof Cf).length,c=s.filter(l=>l instanceof Tf).length;if(a>1||a>0&&c>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Tf=class n extends Uc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Zw(e._query,t),new _r(e.firestore,e.converter,cd(e._query,t))}_parse(e){let t=Gw(e.firestore);return(function(s,a,c,l,d,p,g){let v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ev(g,p);let D=[];for(let V of g)D.push(wv(l,s,V));v={arrayValue:{values:D}}}else v=wv(l,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ev(g,p),v=aP(c,a,g,p==="in"||p==="not-in");return Se.create(d,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Cf=class n extends ro{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Rt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i,c=s.getFlattenedFilters();for(let l of c)Zw(a,l),a=cd(a,l)})(e._query,t),new _r(e.firestore,e.converter,cd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Af=class n extends Uc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,a){if(i.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hr(s,a)})(e._query,this._field,this._direction);return new _r(e.firestore,e.converter,(function(i,s){let a=i.explicitOrderBy.concat([s]);return new On(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Xw(n,e="asc"){let t=e,r=Yf("orderBy",n);return Af._create(r,t)}function wv(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&t.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!B.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jy(n,new B(r))}if(t instanceof $e)return jy(n,t._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(t)}.`)}function Ev(n,e){if(!Array.isArray(n)||n.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zw(n,e){let t=(function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Sf=class{convertValue(e,t="none"){switch(kn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return yr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ai].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>_e(a.doubleValue));return new Pn(s)}convertGeoPoint(e){return new Rn(_e(e.latitude),_e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}convertTimestamp(e){let t=an(e);return new Pe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);ae(ww(r),9688,{name:e});let i=new mc(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(t)||on(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function dP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cr=class n extends Lc{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ii(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Yf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",cr._jsonSchema={type:Re("string",cr._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};var ii=class extends cr{data(e={}){return super.data(e)}},si=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ii(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new ii(i._firestore,i._userDataWriter,c.doc.key,c.doc,new or(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new ii(i._firestore,i._userDataWriter,c.doc.key,c.doc,new or(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:fP(c.type),doc:l,oldIndex:d,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function fP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}si._jsonSchemaVersion="firestore/querySnapshot/1.0",si._jsonSchema={type:Re("string",si._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};var jc=class extends Sf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};function eE(n,e){let t=Bs(n.firestore,gi),r=$w(n),i=dP(n.converter,e);return pP(t,[oP(Gw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}function Jf(n,...e){var t,r,i;n=tt(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||vv(e[a])||(s=e[a++]);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vv(e[a])){let g=e[a];e[a]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,d,p;if(n instanceof $e)d=Bs(n.firestore,gi),p=Ff(n._key.path),l={next:g=>{e[a]&&e[a](mP(d,n,g))},error:e[a+1],complete:e[a+2]};else{let g=Bs(n,_r);d=Bs(g.firestore,gi),p=g._query;let v=new jc(d);l={next:S=>{e[a]&&e[a](new si(d,v,g,S))},error:e[a+1],complete:e[a+2]},hP(n._query)}return(function(v,S,D,V){let k=new _f(V),G=new lf(S,k,D);return v.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return LR(yield pv(v),G)})),()=>{k.Ou(),v.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return UR(yield pv(v),G)}))}})(zw(d),p,c,l)}function pP(n,e){return(function(r,i){let s=new sn;return r.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return WR(yield rP(r),i,s)})),s.promise})(zw(n),e)}function mP(n,e,t){let r=t.docs.get(e._key),i=new jc(n);return new cr(n,i,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}function tE(){return new If("serverTimestamp")}(function(e,t=!0){(function(i){_i=i})(Wr),bt(new Ze("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new gi(new $h(r.getProvider("auth-internal")),new Hh(a,r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(d.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Te(Ry,Py,e),Te(Ry,Py,"esm2017")})();var Qc=function(){return Qc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Qc.apply(this,arguments)};var yP={includeMetadataChanges:!1};function nE(n,e){return e===void 0&&(e=yP),new Ht(function(t){var r=Jf(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function rE(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Qc(Qc({},r),(t={},t[e.idField]=n.id,t))}function iE(n){return nE(n,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function sE(n,e){return e===void 0&&(e={}),iE(n).pipe(ne(function(t){return t.map(function(r){return rE(r,e)})}))}var wr=class{constructor(e){return e}},oE="firestore",Xf=class{constructor(){return Yr(oE)}};var Zf=new de("angularfire2.firestore-instances");function vP(n,e){let t=ja(oE,n,e);return t&&new wr(t)}function wP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new wr(r)}}var EP={provide:Xf,deps:[[new yn,Zf]]},IP={provide:wr,useFactory:vP,deps:[[new yn,Zf],er]};function aE(n,...e){return Te("angularfire",Xn.full,"fst"),Rr([IP,EP,{provide:Zf,useFactory:wP(n),multi:!0,deps:[it,Dt,Zn,Os,[new yn,ec],[new yn,$a],...e]}])}var cE=Tt(sE,!0);var uE=Tt(eE,!0,2);var ep=Tt(Bw,!0,2);var lE=Tt(qw,!0);var tp=Tt(Xw,!0,2),hE=Tt(Jw,!0,2);var Yc=class n{firestore=j(wr);bookAppointment(e){let t=ep(this.firestore,"appointments");return uE(t,ue(U({},e),{createdAt:tE()}))}getAllAppointments(){let e=ep(this.firestore,"appointments"),t=hE(e,tp("date"),tp("time"));return cE(t,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})};function bP(n,e){n&1&&(M(0,"small",26),x(1," Bitte gib Deinen Namen ein. "),O())}function TP(n,e){n&1&&(M(0,"small",26),x(1," Bitte gib eine g\xFCltige E-Mail-Adresse ein. "),O())}function CP(n,e){if(n&1&&(M(0,"option",27),x(1),O()),n&2){let t=e.$implicit;re("value",t.value),$(),pt(" ",t.label," ")}}function AP(n,e){n&1&&(M(0,"small",26),x(1," Bitte w\xE4hle einen Service. "),O())}function SP(n,e){if(n&1&&(M(0,"option",27),x(1),O()),n&2){let t=e.$implicit;re("value",t.value),$(),pt(" ",t.label," ")}}function RP(n,e){n&1&&(M(0,"small",26),x(1," Bitte w\xE4hle eine:n Stylist:in. "),O())}function PP(n,e){n&1&&(M(0,"small",26),x(1," Bitte w\xE4hle ein Datum. "),O())}function DP(n,e){n&1&&(M(0,"small",26),x(1," Bitte w\xE4hle eine Uhrzeit. "),O())}function kP(n,e){n&1&&(M(0,"p",28),x(1," Danke! Termin erfolgreich reserviert. "),O())}function OP(n,e){if(n&1&&(M(0,"p",29),x(1),O()),n&2){let t=kt();$(),Ye(t.submitError)}}function NP(n,e){if(n&1){let t=Oo();M(0,"button",30),et("click",function(){let i=So(t).$implicit,s=kt();return Ro(s.selectTime(i))}),x(1),O()}if(n&2){let t=e.$implicit,r=kt();Qt("selected",r.selectedTime===t),Gu("aria-pressed",r.selectedTime===t),$(),pt(" ",t," ")}}var Jc=class n{formBuilder=j(__);bookingService=j(Yc);services=[{value:"herren-schneiden-foehnen",label:"Herren \xB7 Schneiden/F\xF6hnen"},{value:"herren-waschen-schneiden-foehnen",label:"Herren \xB7 Waschen/Schneiden/F\xF6hnen"},{value:"herren-nassrasur",label:"Herren \xB7 Nassrasur"},{value:"herren-schneiden-formen-schere",label:"Herren \xB7 Schneiden/Formen mit Schere"},{value:"herren-bart-stutzen",label:"Herren \xB7 Bart stutzen"},{value:"herren-bart-formen",label:"Herren \xB7 Bart formen"},{value:"herren-augenbrauen-faden",label:"Herren \xB7 Augenbrauen zupfen mit Faden"},{value:"herren-wachs-gesicht",label:"Herren \xB7 Wachs Gesicht komplett"},{value:"herren-augenbrauen-messer",label:"Herren \xB7 Augenbrauen mit Messer"},{value:"herren-farbe-strahnen",label:"Herren \xB7 Farbe/Str\xE4hnen"},{value:"herren-dauerwelle",label:"Herren \xB7 Dauerwelle"},{value:"herren-haare-glaettung",label:"Herren \xB7 Haare Gl\xE4ttung"},{value:"herren-haare-waschen",label:"Herren \xB7 Haare Waschen"},{value:"damen-waschen-schneiden-kurz",label:"Damen \xB7 Waschen/Schneiden (kurz)"},{value:"damen-waschen-schneiden-lang",label:"Damen \xB7 Waschen/Schneiden (lang)"},{value:"damen-waschen-schneiden-foehnen",label:"Damen \xB7 Waschen/Schneiden/F\xF6hnen"},{value:"damen-haarmaske",label:"Damen \xB7 Haarmaske"},{value:"damen-pony-schneiden",label:"Damen \xB7 Pony schneiden"},{value:"damen-ansaetze-faerben",label:"Damen \xB7 Ans\xE4tze f\xE4rben"},{value:"damen-komplett-faerben",label:"Damen \xB7 Komplett f\xE4rben"},{value:"damen-strahnen-oberkopf",label:"Damen \xB7 Str\xE4hnen am Oberkopf"},{value:"damen-strahnen-komplett",label:"Damen \xB7 Str\xE4hnen komplett"},{value:"damen-foehnen",label:"Damen \xB7 F\xF6hnen"},{value:"damen-dauerwelle",label:"Damen \xB7 Dauerwelle"},{value:"damen-haare-glaettung",label:"Damen \xB7 Haare Gl\xE4ttung"},{value:"damen-augenbrauen-faden",label:"Damen \xB7 Augenbrauen zupfen (Faden)"},{value:"damen-augenbrauen-faerben",label:"Damen \xB7 Augenbrauen f\xE4rben"},{value:"damen-wimpern-faerben",label:"Damen \xB7 Wimpern f\xE4rben"},{value:"damen-balayage",label:"Damen \xB7 Balayage"},{value:"kinder-jungs-bis-7",label:"Kinder \xB7 Jungs bis 7 Jahre"},{value:"kinder-maedchen-bis-7",label:"Kinder \xB7 M\xE4dchen bis 7 Jahre"}];stylists=[{value:"egal",label:"Beliebig"},{value:"mahmoud",label:"Mahmoud"},{value:"tarek",label:"Tarek"}];timeSlots=this.createTimeSlots(8,21,30);appointmentForm=this.formBuilder.group({service:["",Et.required],stylist:["",Et.required],date:["",Et.required],time:["",Et.required],name:["",[Et.required,Et.minLength(2)]],email:["",[Et.required,Et.email]],notes:[""]});selectedTime=null;isSubmitting=!1;submitError="";submitSuccess=!1;submitted=!1;selectTime(e){this.selectedTime=e;let t=this.appointmentForm.get("time");t?.setValue(e),t?.markAsDirty(),t?.markAsTouched()}submit(){return C(this,null,function*(){if(console.log("\u2705 submit() aufgerufen"),this.submitted=!0,this.submitError="",this.submitSuccess=!1,this.appointmentForm.invalid){console.warn("\u274C Formular ist ung\xFCltig",this.appointmentForm.value),this.appointmentForm.markAllAsTouched();return}let e=this.appointmentForm.value;console.log("\u{1F4E6} Payload f\xFCr Firestore & Mail:",e),this.isSubmitting=!0;try{console.log("\u{1F4BE} Speichere Termin in Firestore \u2026"),yield this.bookingService.bookAppointment(e),console.log("\u2705 Termin in Firestore gespeichert"),console.log("\u{1F4E8} Sende Daten an Vercel/Resend \u2026");let t=yield fetch("https://city-style-mail-api.vercel.app/api/send-appointment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log("\u{1F501} Response von Vercel:",t.status,t.statusText);let r="";try{r=yield t.text(),console.log("\u{1F4E8} Response-Body:",r)}catch(i){console.warn("Konnte Response-Body nicht lesen",i)}if(!t.ok)throw new Error(`E-Mail API Fehler: ${t.status} ${r}`);this.submitSuccess=!0,this.appointmentForm.reset(),this.selectedTime=null,this.submitted=!1,console.log("\u{1F389} Alles erfolgreich \u2013 Termin + E-Mails")}catch(t){console.error("\u274C Fehler bei Buchung oder Mail-Versand:",t),this.submitError="Ups! Etwas ist schiefgelaufen. Bitte versuche es erneut."}finally{this.isSubmitting=!1}})}createTimeSlots(e,t,r){let i=[],s=e*60,a=t*60;for(let c=s;c<=a;c+=r){let l=Math.floor(c/60),d=c%60;i.push(`${l.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`)}return i}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-appointment"]],decls:65,vars:17,consts:[["id","termine",1,"appointment-section"],[1,"section-heading"],[1,"eyebrow"],["href","tel:+49911421966"],[1,"appointment-wrapper"],[3,"ngSubmit","formGroup"],[1,"form-grid"],["type","text","formControlName","name","placeholder","Dein Name"],["class","error",4,"ngIf"],["type","email","formControlName","email","placeholder","you@citymail.de"],["formControlName","service"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","stylist"],["type","date","formControlName","date"],[1,"time-display"],[1,"time-value"],["type","hidden","formControlName","time"],[1,"notes"],["formControlName","notes","rows","4","placeholder","Moodboard, Haarstruktur oder W\xFCnsche \u2026"],["type","submit",1,"submit",3,"disabled"],["class","confirmation",4,"ngIf"],["class","error global",4,"ngIf"],[1,"info-card"],[1,"time-grid"],["type","button","class","time-slot",3,"selected","click",4,"ngFor","ngForOf"],[1,"error"],[3,"value"],[1,"confirmation"],[1,"error","global"],["type","button",1,"time-slot",3,"click"]],template:function(t,r){if(t&1&&(M(0,"section",0)(1,"div",1)(2,"span",2),x(3,"Termin vereinbaren"),O(),M(4,"h2"),x(5,"Dein Termin im City-Style Salon"),O(),M(6,"p"),x(7," Service, Stylist:in und Termin w\xE4hlen \u2013 wir melden uns blitzschnell zur Best\xE4tigung. Kurzfristig erreichbar unter "),M(8,"a",3),x(9,"0911 421966"),O(),x(10,". "),O()(),M(11,"div",4)(12,"form",5),et("ngSubmit",function(){return r.submit()}),M(13,"div",6)(14,"label")(15,"span"),x(16,"Name"),O(),be(17,"input",7),ge(18,bP,2,0,"small",8),O(),M(19,"label")(20,"span"),x(21,"E-Mail"),O(),be(22,"input",9),ge(23,TP,2,0,"small",8),O(),M(24,"label")(25,"span"),x(26,"Service"),O(),M(27,"select",10)(28,"option",11),x(29,"Bitte ausw\xE4hlen"),O(),ge(30,CP,2,2,"option",12),O(),ge(31,AP,2,0,"small",8),O(),M(32,"label")(33,"span"),x(34,"Stylist:in"),O(),M(35,"select",13)(36,"option",11),x(37,"Bitte ausw\xE4hlen"),O(),ge(38,SP,2,2,"option",12),O(),ge(39,RP,2,0,"small",8),O(),M(40,"label")(41,"span"),x(42,"Datum"),O(),be(43,"input",14),ge(44,PP,2,0,"small",8),O(),M(45,"label",15)(46,"span"),x(47,"Uhrzeit"),O(),M(48,"div",16),x(49),O(),be(50,"input",17),ge(51,DP,2,0,"small",8),O()(),M(52,"label",18)(53,"span"),x(54,"Styling-Notes (optional)"),O(),be(55,"textarea",19),O(),M(56,"button",20),x(57),O(),ge(58,kP,2,0,"p",21)(59,OP,2,1,"p",22),O(),M(60,"aside",23)(61,"h3"),x(62,"W\xE4hle Deine Uhrzeit"),O(),M(63,"div",24),ge(64,NP,2,4,"button",25),O()()()()),t&2){let i,s,a,c,l,d;$(12),re("formGroup",r.appointmentForm),$(6),re("ngIf",((i=r.appointmentForm.get("name"))==null?null:i.touched)&&((i=r.appointmentForm.get("name"))==null?null:i.invalid)),$(5),re("ngIf",((s=r.appointmentForm.get("email"))==null?null:s.touched)&&((s=r.appointmentForm.get("email"))==null?null:s.invalid)),$(7),re("ngForOf",r.services),$(),re("ngIf",((a=r.appointmentForm.get("service"))==null?null:a.touched)&&((a=r.appointmentForm.get("service"))==null?null:a.invalid)),$(7),re("ngForOf",r.stylists),$(),re("ngIf",((c=r.appointmentForm.get("stylist"))==null?null:c.touched)&&((c=r.appointmentForm.get("stylist"))==null?null:c.invalid)),$(5),re("ngIf",((l=r.appointmentForm.get("date"))==null?null:l.touched)&&((l=r.appointmentForm.get("date"))==null?null:l.invalid)),$(4),Qt("empty",!r.selectedTime),$(),pt(" ",r.selectedTime??"Bitte rechts eine Uhrzeit anklicken"," "),$(2),re("ngIf",((d=r.appointmentForm.get("time"))==null?null:d.touched)&&((d=r.appointmentForm.get("time"))==null?null:d.invalid)),$(5),re("disabled",r.isSubmitting),$(),pt(" ",r.isSubmitting?"Wird gesendet \u2026":"Termin sichern"," "),$(),re("ngIf",r.submitSuccess),$(),re("ngIf",r.submitError),$(5),re("ngForOf",r.timeSlots)}},dependencies:[De,mt,xo,y_,h_,p_,g_,Pa,ka,s_,o_,Ll,Ul],styles:[".appointment-section[_ngcontent-%COMP%]{padding:3.5rem 0;background:#f1edf4;min-height:100vh;display:flex;flex-direction:column;justify-content:center;gap:1.6rem}.section-heading[_ngcontent-%COMP%]{text-align:center;max-width:640px;margin:0 auto 1.6rem;color:#0c0a18}.section-heading[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.45rem;color:#dcbf68;display:block;margin-bottom:1.1rem}.section-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:clamp(2.1rem,2.6vw,3.1rem);margin-bottom:.8rem}.section-heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5;font-size:.96rem}.section-heading[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcbf68;font-weight:600;text-decoration:none}.appointment-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1400px;margin:0 auto;padding:0 2.5rem;display:grid;grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);gap:1.6rem;align-items:stretch}form[_ngcontent-%COMP%]{background:#fff;padding:1.75rem;border-radius:1.5rem;box-shadow:0 20px 48px #0c0a181a;border:1px solid rgba(12,10,24,.04);display:flex;flex-direction:column;height:100%}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}label[_ngcontent-%COMP%]{display:grid;gap:.45rem;color:#0c0a18c7;font-weight:600;letter-spacing:.02rem}.time-display[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{background:#0c0a180a;border:1px dashed rgba(12,10,24,.18);border-radius:.85rem;padding:.7rem .95rem;font-weight:600;color:#0c0a18}.time-display[_ngcontent-%COMP%]   .time-value.empty[_ngcontent-%COMP%]{color:#0c0a1873}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem .95rem;border-radius:1rem;border:1px solid rgba(12,10,24,.1);font-size:1rem;background:#0c0a1805;transition:border-color .3s ease,box-shadow .3s ease;font-family:Poppins,sans-serif}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#dcbf68;box-shadow:0 0 0 4px #dcbf6838;outline:none}.notes[_ngcontent-%COMP%]{margin-top:1rem}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.submit[_ngcontent-%COMP%]{margin-top:1.5rem;width:100%;padding:.9rem 1.4rem;border-radius:999px;border:none;background:linear-gradient(135deg,#f7e7b4,#dcbf68);color:#0c0a18;font-weight:700;letter-spacing:.08rem;text-transform:uppercase;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease,opacity .3s ease}.submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-4px);box-shadow:0 20px 35px #dcbf6861}.submit[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;box-shadow:none}.error[_ngcontent-%COMP%]{font-size:.78rem;color:#d92855;font-weight:500}.error.global[_ngcontent-%COMP%]{text-align:center;margin-top:.8rem}.confirmation[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:center;font-weight:600;color:#28a97a}.info-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0c0a18,#1c1133);color:#fff;padding:1.7rem;border-radius:1.5rem;box-shadow:0 20px 48px #0c0a1833;display:flex;flex-direction:column;gap:1.2rem;height:100%}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.35rem;color:#dcbf68}.time-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:.6rem;max-height:clamp(260px,45vh,360px);overflow-y:auto;padding-right:.2rem;scroll-snap-type:y proximity;flex:1 1 auto}.time-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.time-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.time-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff59}.time-slot[_ngcontent-%COMP%]{width:100%;padding:.7rem .4rem;border-radius:.85rem;border:1px solid rgba(255,255,255,.12);background:#ffffff14;color:#fff;font-weight:600;letter-spacing:.04rem;cursor:pointer;transition:transform .2s ease,background .2s ease,border-color .2s ease;scroll-snap-align:start}.time-slot[_ngcontent-%COMP%]:hover{transform:translateY(-1px);background:#ffffff29}.time-slot.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7e7b4,#dcbf68);color:#0c0a18;border-color:transparent;box-shadow:0 12px 24px #dcbf6847}.time-note[_ngcontent-%COMP%]{margin:0;font-size:.85rem;line-height:1.45;color:#ffffffb8;flex-shrink:0}@media (max-width: 900px){.appointment-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem;padding:0 1.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 600px){.time-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr));max-height:240px}}"]})};function MP(n,e){if(n&1&&(M(0,"figure"),be(1,"img",6),O()),n&2){let t=e.$implicit,r=e.index,i=kt();$(),re("src",t.image,Pr)("alt","City-Style Look "+(r%i.itemCount+1))}}var Xc=class n{baseItems=[{image:"assets/bild1.jpeg"},{image:"assets/bild2.jpeg"},{image:"assets/bild3.jpeg"},{image:"assets/city5.webp"},{image:"assets/city6.webp"},{image:"assets/city8.webp"},{image:"assets/city9.webp"}];marqueeItems=[...this.baseItems,...this.baseItems];itemCount=this.baseItems.length;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-gallery"]],decls:11,vars:1,consts:[["id","galerie",1,"gallery-section"],[1,"section-heading"],[1,"eyebrow"],["aria-label","City-Style Galerie",1,"marquee"],[1,"marquee-track"],[4,"ngFor","ngForOf"],["loading","lazy",3,"src","alt"]],template:function(t,r){t&1&&(M(0,"section",0)(1,"div",1)(2,"span",2),x(3,"Galerie"),O(),M(4,"h2"),x(5,"Looks, die City-Style definieren"),O(),M(6,"p"),x(7," Lass Dich von unseren aktuellen Trend- und Signature-Looks inspirieren. "),O()(),M(8,"div",3)(9,"div",4),ge(10,MP,2,2,"figure",5),O()()()),t&2&&($(10),re("ngForOf",r.marqueeItems))},dependencies:[De,mt],styles:[".gallery-section[_ngcontent-%COMP%]{padding:4.5rem 1.5rem;min-height:100vh;display:flex;flex-direction:column;justify-content:center;gap:2.5rem}.section-heading[_ngcontent-%COMP%]{text-align:center;max-width:680px;margin:0 auto 2rem}.section-heading[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.45rem;color:#dcbf68;display:block;margin-bottom:1.1rem}.section-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:clamp(2.2rem,3vw,3.3rem);margin-bottom:1rem;color:#0c0a18}.section-heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0c0a18a6;line-height:1.6;font-size:1rem}.marquee[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;border-radius:1.5rem;box-shadow:0 20px 45px #0c0a182e}.marquee-track[_ngcontent-%COMP%]{display:flex;gap:1.2rem;animation:_ngcontent-%COMP%_gallery-scroll 18s linear infinite}.marquee[_ngcontent-%COMP%]:hover   .marquee-track[_ngcontent-%COMP%]{animation-play-state:paused}.marquee-track[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{flex:0 0 clamp(240px,28vw,380px);margin:0;border-radius:1.4rem;overflow:hidden;box-shadow:0 18px 35px #0c0a182e}.marquee-track[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:clamp(220px,45vh,420px);object-fit:cover;display:block}@keyframes _ngcontent-%COMP%_gallery-scroll{0%{transform:translate(0)}to{transform:translate(-50%)}}@media (max-width: 900px){.marquee-track[_ngcontent-%COMP%]{gap:1rem;animation-duration:10s}.marquee-track[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{flex:0 0 clamp(200px,45vw,320px)}}@media (max-width: 600px){.marquee-track[_ngcontent-%COMP%]{gap:.75rem;animation-duration:10s}.marquee-track[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{flex:0 0 clamp(180px,70vw,260px)}.marquee-track[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:clamp(200px,40vh,320px)}}"]})};function xP(n,e){if(n&1&&(M(0,"li")(1,"a",15),x(2),M(3,"span"),x(4),O()()()),n&2){let t=e.$implicit;$(),re("href",t.url,Pr),$(),pt(" ",t.label," "),$(2),Ye(t.handle)}}function VP(n,e){if(n&1&&(M(0,"li")(1,"span",16),x(2),O(),M(3,"span",17),x(4),O()()),n&2){let t=e.$implicit;$(2),Ye(t.day),$(2),Ye(t.time)}}var Zc=class n{socials=[{label:"Instagram",url:"https://www.instagram.com/city0style/",handle:"@citystyle.salon"},{label:"Facebook",url:"https://www.facebook.com/City0Style/",handle:"/citystyle.salon"}];hours=[{day:"Mo \xB7 Sa",time:"09:00 \u2013 20:00"},{day:"So",time:"Geschlossen"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-contact"]],decls:28,vars:2,consts:[["id","kontakt",1,"contact-section"],["data-animate","fade-right",1,"contact-info"],[1,"contact-header"],[1,"eyebrow"],[1,"intro"],[1,"contact-details"],["href","tel:+49911421966"],["href","mailto:hallo@city-style.de"],[1,"socials"],[4,"ngFor","ngForOf"],[1,"map-embed"],["title","City-Style Salon N\xFCrnberg","src",ym`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2597.1069302718883!2d11.08333667633661!3d49.4385072629948!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x479f5668c4e5c543%3A0xdaf7c1d508edc437!2sGibitzenhofstra%C3%9Fe%2019%2C%2090443%20N%C3%BCrnberg!5e0!3m2!1sde!2sde!4v1700000000000!5m2!1sde!2sde`,"loading","lazy","referrerpolicy","no-referrer-when-downgrade"],["data-animate","fade-left",1,"hours-card"],[1,"hours-list"],[1,"hours-note"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"day"],[1,"time"]],template:function(t,r){t&1&&(M(0,"section",0)(1,"div",1)(2,"header",2)(3,"p",3),x(4,"City-Style N\xFCrnberg"),O(),M(5,"h2"),x(6,"Kontakt & Anfahrt"),O(),M(7,"p",4),x(8," Gibitzenhofstra\xDFe 19 \xB7 90443 N\xFCrnberg"),be(9,"br"),O()(),M(10,"div",5)(11,"a",6),x(12,"0911 421966"),O(),M(13,"a",7),x(14,"hallo@city-style.de"),O()(),M(15,"ul",8),ge(16,xP,5,3,"li",9),O(),M(17,"div",10),be(18,"iframe",11),O()(),M(19,"div",12)(20,"h3"),x(21,"Salon Hours"),O(),M(22,"p"),x(23," Wir arbeiten mit flexiblen Slots \u2013 sichere Dir Deinen Termin online oder ruf kurz durch, wenn Du einen Express-Service brauchst. "),O(),M(24,"ul",13),ge(25,VP,5,2,"li",9),O(),M(26,"p",14),x(27," Late-Night-Termine auf Anfrage \xB7 Silent Appointments m\xF6glich \xB7 Walk-ins nach Verf\xFCgbarkeit "),O()()()),t&2&&($(16),re("ngForOf",r.socials),$(9),re("ngForOf",r.hours))},dependencies:[De,mt],styles:['.contact-section[_ngcontent-%COMP%]{width:100%;max-width:1360px;margin:0 auto;padding:2rem 0;display:grid;grid-template-columns:minmax(0,1.15fr) minmax(0,.85fr);gap:1.5rem;align-items:stretch;min-height:85vh}.contact-info[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0c0a18,#1c1133);color:#fff;border-radius:1.6rem;padding:1.8rem;display:flex;flex-direction:column;gap:1rem;position:relative;overflow:hidden;box-shadow:0 22px 45px #0c0a1842}.contact-info[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at top right,rgba(220,191,104,.3),transparent 60%);pointer-events:none}.contact-header[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.4rem;color:#f7e7b4e6;font-size:.8rem}.contact-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:clamp(1.8rem,2.6vw,2.3rem);margin:.2rem 0 .5rem}.contact-header[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{margin:0;line-height:1.45;color:#ffffffc7;font-size:.9rem}.contact-details[_ngcontent-%COMP%]{display:grid;gap:.65rem}.contact-details[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dcbf68;text-decoration:none;font-weight:600}.map-embed[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;border-radius:1.3rem;overflow:hidden;box-shadow:0 16px 32px #00000047}.map-embed[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:0;width:100%;height:100%;min-height:230px;filter:saturate(.9)}.map-overlay[_ngcontent-%COMP%]{position:absolute;left:.8rem;bottom:.8rem;right:.8rem;display:flex;justify-content:space-between;padding:.75rem 1rem;border-radius:.9rem;background:#0c0a18cc;color:#f7e7b4;font-weight:600;letter-spacing:.04rem}.socials[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.8rem}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffbf;text-decoration:none;display:flex;justify-content:space-between;align-items:center;padding:.85rem 1rem;border-radius:1rem;transition:background .3s ease,transform .3s ease}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#dcbf68}.socials[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(6px)}.hours-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 18px 40px #0c0a1817;padding:1.8rem;display:flex;flex-direction:column;gap:.9rem}.hours-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#0c0a18;margin:0}.hours-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0c0a18a6;font-size:.95rem;line-height:1.5}.hours-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:.65rem}.hours-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:600;color:#0c0a18;padding:.45rem 0;border-bottom:1px solid rgba(12,10,24,.08)}.hours-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.hours-list[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{color:#0c0a188c}.hours-note[_ngcontent-%COMP%]{font-size:.85rem;color:#0c0a1899;margin-top:auto}[data-animate=fade-right][_ngcontent-%COMP%], [data-animate=fade-left][_ngcontent-%COMP%]{opacity:0;transform:translate3d(-30px,0,0);animation:_ngcontent-%COMP%_contactFade 1.1s ease forwards}[data-animate=fade-left][_ngcontent-%COMP%]{transform:translate3d(30px,0,0);animation-delay:.2s}@keyframes _ngcontent-%COMP%_contactFade{to{opacity:1;transform:translateZ(0)}}@media (max-width: 1024px){.contact-section[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:2.5rem 1.2rem;min-height:auto}.map-embed[_ngcontent-%COMP%]{min-height:280px}}@media (max-width: 600px){.contact-info[_ngcontent-%COMP%]{padding:1.6rem}.hours-card[_ngcontent-%COMP%]{padding:1.5rem}.map-overlay[_ngcontent-%COMP%]{flex-direction:column;gap:.4rem;text-align:center}}']})};var eu=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[[1,"page"]],template:function(t,r){t&1&&(M(0,"main",0),be(1,"app-hero")(2,"app-about")(3,"app-pricing")(4,"app-appointment")(5,"app-gallery")(6,"app-contact"),O())},dependencies:[De,ga,_a,ya,Jc,Xc,Zc],styles:["[_nghost-%COMP%]{display:block}.page[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}"]})};var dE=[{path:"",component:eu},{path:"datenschutzundimpressum",loadComponent:()=>import("./chunk-YKDUN5QM.js").then(n=>n.LegalComponent)},{path:"**",redirectTo:""}];var fE={production:!1,firebase:{apiKey:"AIzaSyDHr47BoMyrRiuCzPHp85fFWEIwmjBFLkU",authDomain:"city-style-d7c72.firebaseapp.com",projectId:"city-style-d7c72",storageBucket:"city-style-d7c72.firebasestorage.app",messagingSenderId:"860651812709",appId:"1:860651812709:web:0330305fe6234ed626d38c",measurementId:"G-SQVWDV27QS"}};var pE={providers:[Al(dE),J_(()=>X_(fE.firebase)),aE(()=>lE())]};nl(ma,pE).catch(n=>console.error(n));
